(this["webpackJsonprhomis-data-manager"]=this["webpackJsonprhomis-data-manager"]||[]).push([[0],{132:function(e,t,a){},152:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},172:function(e,t){},174:function(e,t){},195:function(e,t,a){},196:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(37),s=a.n(c),o=(a(132),a(4)),i=(a(47),a(133),a(11)),l=a.n(i),d=a(5),j=a.n(d),u=a(9),b=a(219),h=a(215),m=a(119),p=a(211),f=a(52),O=a(92),x=a(12),g=(a(152),Object(r.createContext)()),v=a(20),y=a(1);function S(e){return null===e.email|""===e.email?(v.Store.addNotification({title:"User Error",message:"Must include email",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),!1):!(null===e.password|""===e.password)||(v.Store.addNotification({title:"User Error",message:"Must password",type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),!1)}function k(e){var t=Object(r.useContext)(g),a=Object(o.a)(t,2),n=(a[0],a[1]),c=Object(x.g)(),s=Object(r.useState)(""),i=Object(o.a)(s,2),l=i[0],d=i[1],f=Object(r.useState)(""),v=Object(o.a)(f,2),S=v[0],k=v[1],N=Object(r.useState)(""),_=Object(o.a)(N,2),T=_[0],D=_[1],C=Object(r.useState)(""),F=Object(o.a)(C,2),I=F[0],P=F[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("userToken");console.log("Local Token"),console.log(e);var t=new Date,a=new Date(localStorage.getItem("createdAt"));if(console.log("Current date"),console.log(t),console.log("Token time"),console.log(a),console.log("Difference"),console.log(t.getTime()-a.getTime()),t.getTime()-a.getTime()<36e5)return n(e),void c.push("/")}),[]),Object(y.jsxs)(b.a,{className:"card-style border-0 login-card",children:[Object(y.jsx)(b.a.Header,{className:"bg-dark text-white",children:Object(y.jsx)("h2",{children:"Login"})}),Object(y.jsxs)(b.a.Body,{children:[Object(y.jsx)("div",{className:"icon-container",children:Object(y.jsx)(O.a,{size:60})}),Object(y.jsxs)(h.a,{style:{marginLeft:"2em",marginRight:"2em"},children:[Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"email",children:"Email"}),Object(y.jsx)(h.a.Control,{id:"email",type:"text",onChange:function(e){return d(e.target.value)}})]}),Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"password",children:"Password"}),Object(y.jsx)(h.a.Control,{type:"password",onChange:function(e){return k(e.target.value)}})]}),T?Object(y.jsx)("p",{className:"warning",children:T}):null,Object(y.jsx)("div",{className:"button-container",children:I?Object(y.jsxs)(m.a,{className:"login-buttons",variant:"dark",children:[Object(y.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Loading"]}):Object(y.jsx)(m.a,{className:"login-buttons",type:"submit",variant:"dark",onClick:function(){var e=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,w({event:t,email:l,password:S,requestError:T,setRequestError:D});case 3:if(a=e.sent,P(!1),400!==a.status){e.next=8;break}return c.push("/login"),e.abrupt("return");case 8:200===a.status&&(n(a.data),localStorage.setItem("userToken",a.data),r=new Date,localStorage.setItem("createdAt",r),c.push("/"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Login"})}),Object(y.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:["Don't have an account?\xa0",Object(y.jsx)("a",{href:"/#/register",children:"Click here"})," for registration"]})]})]})]})}function w(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.event.preventDefault(),t.setRequestError(null),0!=S({email:t.email,password:t.password})){e.next=5;break}return e.abrupt("return",{status:400,message:"Missing Credentials"});case 5:return e.prev=5,e.next=8,l()({method:"post",url:"https://auth.l-gorman.com/api/user/login",data:{email:t.email,password:t.password}});case 8:return a=e.sent,console.log(a),e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(5),v.Store.addNotification({title:"Error",message:e.t0.response.data,type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",e.t0.response);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function _(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){c(!0)}),[]),Object(y.jsx)(f.a,{in:n,children:Object(y.jsx)("div",{className:"child-login-container",children:Object(y.jsx)(k,{})})})}var T=a(212),D=a(213),C=a(127);a(158);function F(e){if(null===e)return Object(y.jsx)("h1",{children:"No Data found"});if(void 0===e.length)return Object(y.jsx)("h1",{children:"No Data found"});if(null!==e){for(var t=e.slice(0,9),a=[],r=0;r<t.length;r++)for(var n=Object.keys(t[r]),c=0;c<n.length;c++){var s=n[c];if(!a.some((function(e){return e===s}))&&(0===r&&a.splice(c,0,s),r>0))if(void 0!==!n[c-1]){var o=a.indexOf(n[c-1]);a.splice(o+1,0,s)}else a.splice(c+1,0,s)}return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,size:"sm",variant:"dark",responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsx)("tr",{children:a.map((function(e,t){return Object(y.jsx)("th",{children:e},"row_1_column_"+t)}))},"row_1")}),Object(y.jsx)("tbody",{children:t.map((function(e,t){return Object(y.jsx)("tr",{children:a.map((function(a,r){return Object(y.jsx)("td",{children:e[a]},"row_"+t+"column_"+r+"_household_"+t)}))},"row_"+t)}))})]})})}}function I(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"get",url:"https://api.l-gorman.com/api/meta-data/form-data",headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,a,r){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(j.a.mark((function e(t,a,r,n){var c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://api.l-gorman.com/api/data",data:{dataType:t,projectID:a,formID:r},headers:{Authorization:n}});case 2:if(c=e.sent,null!==(s=c.data)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){var a=function(e){if(null!==e&&void 0!==e.length){for(var t=[],a=e,r=[],n=0;n<a.length;n++)for(var c=Object.keys(a[n]),s=0;s<c.length;s++){var o=c[s];if(!r.some((function(e){return e===o}))&&(0===n&&r.splice(s,0,o),n>0))if(void 0!==!c[s-1]){var i=r.indexOf(c[s-1]);r.splice(i+1,0,o)}else r.splice(s+1,0,o)}t.push(r.join(", "));var l=a.map((function(e){return r.map((function(t){return null!==e[t]?e[t]:""})).join(", ")}));return(t=t.concat(l)).join("\n")}}(e),r=new Blob([a],{type:"text/plain"});return""!==t&&window.URL.revokeObjectURL(t),window.URL.createObjectURL(r)}function G(e,t,a,r,n){if(t)return Object(y.jsx)("div",{className:"end-button-container",children:Object(y.jsx)("a",{download:r+"_"+n+"_"+a+"_.csv",href:e,children:Object(y.jsx)(m.a,{className:"end-button",children:"Download Data as CSV"})})})}function z(e,t){return null===t?e:t}function U(e,t,a,r,n,c,s,o){if(e){var i=t.map((function(e){return e.name})),l=[];if(null!==a){var d=t.filter((function(e){return e.name===a}));null!==d&&l.push(d[0].forms)}return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(b.a.Body,{children:[Object(y.jsx)("p",{children:'Please use the filters below to select the data you would like to access. If the data has not been processed, or you are unsure whether it has been processed, click the "Process Data" button. Then click "fetch" data to access a preview of the dataset and make it available for download'}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"button-row",children:[Object(y.jsx)(D.a,{className:"filter-button",onSelect:function(e){return r(e)},title:z("Project Name",a),children:i.map((function(e){return Object(y.jsx)(C.a.Item,{eventKey:e,children:e},e)}))}),Object(y.jsx)(D.a,{className:"filter-button",onSelect:function(e){return c(e)},title:z("Form ID",n),children:l.map((function(e){return Object(y.jsx)(C.a.Item,{eventKey:e,children:e},e)}))}),Object(y.jsxs)(D.a,{className:"filter-button",onSelect:function(e){return o(e)},title:z("Select Data to View",s),children:[Object(y.jsx)(C.a.Item,{eventKey:"processedData",children:"Whole Survey"}),Object(y.jsx)(C.a.Item,{eventKey:"indicatorData",children:"Indicator Data"}),Object(y.jsx)(C.a.Item,{eventKey:"metaData",children:"Meta Data"}),Object(y.jsx)(C.a.Item,{eventKey:"cropData",children:"Crop Data"}),Object(y.jsx)(C.a.Item,{eventKey:"livestockData",children:"Livestock Data"})]})]})})]})})}}function M(e,t,a,r,n){if(!a)return Object(y.jsxs)("div",{children:[Object(y.jsx)(b.a.Body,{children:Object(y.jsx)("p",{children:"Click the button below to begin querying the data. This will load information on the projects and forms used for various RHoMIS projects."})}),Object(y.jsx)("div",{className:"end-button-container",children:Object(y.jsx)(m.a,{"data-testid":"fetchProjectButton",className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(n);case 2:void 0!==(a=e.sent)&&(t(a),r(!0));case 4:case"end":return e.stop()}}),e)}))),children:"Get Project Information"})})]})}function B(e,t,a,r,n,c,s,o,i){if(e)return Object(y.jsx)("div",{className:"end-button-container",children:Object(y.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){var l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,a,r,i);case 2:l=e.sent,c(E(l,n)),s(l),o(!0);case 6:case"end":return e.stop()}}),e)}))),children:"Fetch Data"})})}function R(e,t,a){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://api.l-gorman.com/api/process-data",data:{projectName:t,formName:a},headers:{Authorization:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://api.l-gorman.com/api/generate-data",data:{projectName:t,formName:a,numberOfResponses:10},headers:{Authorization:r}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t,a,r){if(e)return Object(y.jsx)("div",{className:"end-button-container",children:Object(y.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t,a,r);case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),children:"Process Data"})})}function J(e,t,a,r){if(e)return Object(y.jsx)("div",{className:"end-button-container",children:Object(y.jsx)(m.a,{className:"end-button",onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,a,r);case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))),children:"Generate Data"})})}function Q(e){var t=Object(r.useState)(null),a=Object(o.a)(t,2),n=(a[0],a[1],Object(r.useContext)(g)),c=Object(o.a)(n,2),s=c[0],i=(c[1],Object(r.useState)(null)),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(r.useState)(""),h=Object(o.a)(u,2),m=h[0],p=h[1],f=Object(r.useState)(!1),O=Object(o.a)(f,2),x=O[0],v=O[1],S=Object(r.useState)(!1),k=Object(o.a)(S,2),w=k[0],N=k[1],_=Object(r.useState)([]),T=Object(o.a)(_,2),D=T[0],C=T[1],I=Object(r.useState)(null),P=Object(o.a)(I,2),A=P[0],L=P[1],E=Object(r.useState)(null),z=Object(o.a)(E,2),R=z[0],H=z[1],V=Object(r.useState)(null),q=Object(o.a)(V,2),Q=q[0],Y=q[1];return Object(y.jsxs)("div",{id:"data-query-container",className:"sub-page-container",children:[Object(y.jsx)("h1",{id:"data-query-title",children:"RHoMIS 2.0 Data Querying"}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(b.a.Header,{className:"bg-dark text-white",children:"Data Filters"}),U(w,D,R,H,Q,Y,A,L),M(0,C,w,N,s),J(w,R,Q,s),K(w,R,Q,s),B(w,A,R,Q,m,p,j,v,s)]}),F(d),G(m,x,A,R,Q)]})}var Y=a(214),X=a(118),W=(a(159),a(126)),Z=a(122),$=a.n(Z);function ee(e){return null===e.email?(e.setRequestError("No email given"),!1):null!==e.password||(e.setRequestError("No password given"),!1)}function te(e){console.log(e);var t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),l=i[0],d=i[1],f=Object(r.useState)(""),O=Object(o.a)(f,2),g=O[0],v=O[1],S=Object(r.useState)(""),k=Object(o.a)(S,2),w=k[0],N=k[1],_=Object(r.useState)(""),T=Object(o.a)(_,2),D=T[0],C=T[1],F=Object(r.useState)(""),I=Object(o.a)(F,2),P=I[0],A=I[1],L=Object(r.useState)(""),E=Object(o.a)(L,2),G=E[0],z=E[1],U=Object(r.useState)(!1),M=Object(o.a)(U,2),B=M[0],R=M[1],H=Object(r.useState)(null),V=Object(o.a)(H,2),q=V[0],K=V[1],J=Object(r.useState)(null),Q=Object(o.a)(J,2),Z=Q[0],ee=Q[1],te=Object(x.g)(),re=l===g,ne=l.length>0&&g.length>0,ce=w===D,se=w.length>0&&D.length>0,oe=!0;return console.log(re),console.log(ne),console.log(ce),console.log(se),console.log(n.length>0),console.log(P.length>0),console.log(G.length>0),console.log(ce),console.log(se),console.log(n.length>0),console.log(P.length>0),console.log(G.length>0),console.log(Z),re&&ne&&ce&&se&&n.length>0&&P.length>0&&G.length>0&&Z&&(oe=!1),Object(y.jsxs)(b.a,{className:"card-style border-0 registration-card",children:[Object(y.jsx)(b.a.Header,{className:"bg-dark text-white",children:Object(y.jsx)("h2",{children:"Signup"})}),Object(y.jsx)(b.a.Body,{children:Object(y.jsxs)(h.a,{style:{marginLeft:"3em",marginRight:"3em"},children:[Object(y.jsxs)(Y.a,{children:[Object(y.jsx)(X.a,{xs:3,children:Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"email",children:"Title"}),Object(y.jsxs)(h.a.Select,{id:"title",defaultValue:"Select",onChange:function(e){return c(e.target.value)},children:[Object(y.jsx)("option",{disabled:"true",children:"Select"}),Object(y.jsx)("option",{value:"ms",children:"Ms"}),Object(y.jsx)("option",{value:"misss",children:"Miss"}),Object(y.jsx)("option",{value:"mrs",children:"Mrs"}),Object(y.jsx)("option",{value:"dr",children:"Dr"}),Object(y.jsx)("option",{value:"mr",children:"Mr"}),Object(y.jsx)("option",{value:"mx",children:"Mx"})]})]})}),Object(y.jsx)(X.a,{xs:4,children:Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"name",children:"First Name"}),Object(y.jsx)(h.a.Control,{id:"name",type:"text",onChange:function(e){return A(e.target.value)}})]})}),Object(y.jsx)(X.a,{xs:5,children:Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"surname",children:"Surname"}),Object(y.jsx)(h.a.Control,{id:"surname",type:"text",onChange:function(e){return z(e.target.value)}})]})})]}),Object(y.jsxs)(Y.a,{children:[Object(y.jsx)(X.a,{children:Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"email",children:"Email"}),Object(y.jsx)(h.a.Control,{id:"email",type:"text",onChange:function(e){return N(e.target.value)}})]})}),Object(y.jsxs)(X.a,{children:[Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"email",children:"Confirm Email"}),Object(y.jsx)(h.a.Control,{id:"confirmemail",type:"text",onChange:function(e){return C(e.target.value)}})]}),se?Object(y.jsx)(h.a.Text,{style:{textAlign:"end"},children:ce?"Emails match":"Emails don't match"}):Object(y.jsx)(y.Fragment,{})]})]}),Object(y.jsxs)(Y.a,{children:[Object(y.jsxs)(X.a,{children:[Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"password",children:"Password"}),Object(y.jsx)(h.a.Control,{type:"password",onChange:function(e){d(e.target.value)}})]}),Object(y.jsx)($.a,{password:l})]}),Object(y.jsx)(X.a,{children:Object(y.jsxs)(h.a.Group,{className:"form-group-spaced",children:[Object(y.jsx)(h.a.Label,{htmlFor:"password",children:"Confirm Password"}),Object(y.jsx)(h.a.Control,{type:"password",onChange:function(e){v(e.target.value)}}),ne?Object(y.jsx)(h.a.Text,{style:{textAlign:"end"},children:re?"Passwords match":"Passwords don't match"}):Object(y.jsx)(y.Fragment,{})]})})]}),q?Object(y.jsx)("p",{className:"warning",children:q}):null,Object(y.jsx)("div",{className:"icon-container",children:Object(y.jsx)(W.a,{sitekey:"6LfXLTsdAAAAAOqMXGb9rOqoIpGGPJN9HjcyoUYp",onChange:function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(y.jsx)("div",{className:"button-container",children:B?Object(y.jsxs)(m.a,{className:"login-buttons",variant:"dark",children:[Object(y.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(y.jsx)(m.a,{disabled:oe,className:"login-buttons",variant:"dark",onClick:function(){var e=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,ae({event:t,title:n,firstName:P,surname:G,email:w,password:l,captchaToken:Z,requestError:q,setRequestError:K});case 3:a=e.sent,R(!1),(a.status>199||a.status<300)&&te.push("/#/login"),console.log("registrationResult"),console.log(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Register"})}),Object(y.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:["Already got an account?\xa0",Object(y.jsx)("a",{href:"/#/login",children:"Click here"})," for login"]})]})})]})}function ae(e){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.event.preventDefault(),t.setRequestError(null),ee({title:t.title,firstName:t.firstName,surname:t.surname,email:t.email,password:t.password,requestError:t.requestError,setRequestError:t.setRequestError,captchaToken:t.captchaToken}),e.prev=3,e.next=6,l()({method:"post",url:"https://auth.l-gorman.com/api/user/register",data:{title:t.title,firstName:t.firstName,surname:t.surname,email:t.email,password:t.password,captchaToken:t.captchaToken}});case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),t.setRequestError(e.t0.response.data),e.abrupt("return",e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function ne(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){c(!0)}),[]),Object(y.jsx)(f.a,{in:n,children:Object(y.jsx)("div",{className:"child-login-container",children:Object(y.jsx)(te,{})})})}var ce=a(32),se=a(123),oe=a(124),ie=a(57),le=[{name:"Build a Survey",label:"surveyBuilder",text:"Get started straight away. Build a survey, collect test-data, and view your data.",icon:se.a,link:"https://rhomis-survey.stats4sdtest.online/login/",external:!0},{name:"Manage Existing Projects",label:"projectManager",text:"Check up on your projects, download your data, and control user access.",icon:ie.c,link:"/projects",external:!1},{name:"Global Dataset",label:"globalData",text:"Query publicly available survey data by time, location, and content.",icon:oe.a,link:"https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/9M6EHS",external:!0},{name:"Help",label:"help",text:"See guidance for more advanced use case and how to contribute to our system",icon:ie.a,link:"https://l-gorman.github.io/rhomis-docs/source/user-guide/first-time-user.html#rhomis-portal",external:!0},{name:"Administration",label:"administrator",text:"Create projects and forms (only used for development)",icon:ie.b,link:"/administration",external:!1}];a(160);function de(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"get",url:"https://auth.l-gorman.com/api/user/",headers:{Authorization:t}});case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){var t=e.data.icon,a=Object(x.g)();return!1===e.data.external?Object(y.jsx)("div",{onClick:function(){a.push(e.data.link)},children:Object(y.jsxs)(b.a,{className:"sub-card portal-card border-0",children:[Object(y.jsx)("div",{className:"portal-card-header-container",children:Object(y.jsx)("h4",{className:"portal-card-header",children:e.data.name},"card-header-"+e.data.name)},"header-container-"+e.data.name),Object(y.jsx)("div",{className:"portal-icon-container",children:Object(y.jsx)(t,{size:100,color:"white"})},"icon-container-"+e.data.name)]},"card-"+e.data.name)}):!0===e.data.external&"surveyBuilder"===e.data.label?(console.log("Auth token"),console.log(e.authToken),Object(y.jsx)("div",{children:Object(y.jsxs)("form",{method:"post",action:e.data.link,class:"inline",children:[Object(y.jsx)("input",{type:"hidden",name:"token",value:e.authToken}),Object(y.jsx)("input",{type:"hidden",name:"redirect_url",value:"/admin/xlsform/create"}),Object(y.jsx)("button",{type:"submit",style:{margin:0,padding:0,border:0,backgroundColor:"white"},children:Object(y.jsxs)(b.a,{className:"sub-card portal-card border-0",children:[Object(y.jsx)("div",{className:"portal-card-header-container",children:Object(y.jsx)("h4",{className:"portal-card-header",children:e.data.name},"card-header-"+e.data.name)},"header-container-"+e.data.name),Object(y.jsx)("div",{className:"portal-icon-container",children:Object(y.jsx)(t,{size:100,color:"white"})},"icon-container-"+e.data.name)]},"card-"+e.data.name)})]})})):!0===e.data.external&"surveyBuilder"!==e.data.label?Object(y.jsx)("div",{children:Object(y.jsx)("a",{style:{textDecoration:"none"},href:e.data.link,target:"_blank",children:Object(y.jsxs)(b.a,{className:"sub-card portal-card border-0",children:[Object(y.jsx)("div",{className:"portal-card-header-container",children:Object(y.jsx)("h4",{className:"portal-card-header",children:e.data.name})}),Object(y.jsx)("div",{className:"portal-icon-container",children:Object(y.jsx)(t,{size:100,color:"white"})})]})})}):void 0}function be(e){var t=[];if(console.log(e.data[0]),console.log(e.userData),e.userData){if(!0===e.userData.basic){var a=e.data.filter((function(e){return"surveyBuilder"===e.label}));t.push.apply(t,Object(ce.a)(a))}if(e.userData.dataCollector.length>0){var r=e.data.filter((function(e){return"dataCollector"===e.label}));t.push.apply(t,Object(ce.a)(r))}if(e.userData.projectManager.length>0|e.userData.analyst.length>0){var n=e.data.filter((function(e){return"projectManager"===e.label}));t.push.apply(t,Object(ce.a)(n))}if(!0===e.userData.administrator){var c=e.data.filter((function(e){return"administrator"===e.label}));t.push.apply(t,Object(ce.a)(c))}if(e.userData.researcher.length>0|!0===e.userData.basic){var s=e.data.filter((function(e){return"globalData"===e.label}));t.push.apply(t,Object(ce.a)(s))}if(!0===e.userData.basic){var o=e.data.filter((function(e){return"help"===e.label}));t.push.apply(t,Object(ce.a)(o))}}return e.userData||t.push(e.data[0]),Object(y.jsx)(y.Fragment,{children:t.map((function(t){return Object(y.jsx)(ue,{data:t,authToken:e.authToken})}))})}function he(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),s=Object(o.a)(c,2),i=(s[0],s[1]),l=Object(r.useContext)(g),d=Object(o.a)(l,2),h=d[0];d[1];return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(h);case 2:t=e.sent,n(t),i(!0);case 5:case"end":return e.stop()}}),e)}))),[]),Object(y.jsx)("div",{className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:"bg-dark text-white",children:Object(y.jsx)("h3",{children:"Portal"})}),Object(y.jsx)(b.a.Body,{className:"main-card-body",children:Object(y.jsx)(be,{data:le,userData:a,authToken:h})})]})})}a(161);var me=Object(r.createContext)(),pe=(a(88),a(26)),fe=a(46),Oe=a.n(fe),xe=a(43);a(194);function ge(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(j.a.mark((function e(t){var a,r,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,r=!1,!0===t.getSubmissionCount&&(a=!0,r=t.projectName),console.log("Get Submissions Count"),console.log(r),!t.authToken){e.next=20;break}return e.prev=6,e.next=9,l()({method:"post",url:"https://auth.l-gorman.com/api/meta-data/",data:{getSubmissionCount:a,projectName:r},headers:{Authorization:t.authToken}});case 9:n=e.sent,console.log("user info"),console.log(n.data),c=JSON.parse(JSON.stringify(n.data)),console.log(c),t.setUserInfo(c),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}function ye(e){var t=localStorage.getItem("userToken");if(console.log("local_token is :"+t),!t)return e.setAuthToken(null),null;var a=new Date,r=new Date(localStorage.getItem("createdAt"));console.log("Difference"),console.log(a.getTime()-r.getTime());var n=a.getTime()-r.getTime();return n<36e5&&e.setAuthToken(t),n>36e5?(e.setAuthToken(null),null):t}function Se(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://api.l-gorman.com/api/project-data",headers:{Authorization:t.authToken},data:{projectName:t.projectName,formName:t.formName}});case 2:200===(a=e.sent).status&&t.setFormData(a.data),400===a.status&&alert(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("GET FORM INFO"),console.log(t),e.next=4,ye({setAuthToken:t.setAuthToken});case 4:return a=e.sent,e.next=7,ge({authToken:a,setUserInfo:t.setUserInfo});case 7:return e.next=9,Se({authToken:a,projectName:t.projectName,formName:t.formName,setFormData:t.setFormData});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return Object(y.jsx)("div",{children:Object(y.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Project Name"},"table-head-item-1"),Object(y.jsx)("th",{children:"Description"},"table-head-item-2"),Object(y.jsx)("th",{children:"Created at"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(y.jsx)("tbody",{children:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{style:{"text-align":"center"},colSpan:3,children:"No projects found"})})})]})})}function Te(e){var t=Object(x.g)();return console.log(e),e.data&&e.data.projects?0===e.data.projects.length?Object(y.jsx)(_e,{}):void 0!==e.data.projects?Object(y.jsx)("div",{children:Object(y.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Project Name"},"table-head-item-1"),Object(y.jsx)("th",{children:"Description"},"table-head-item-2"),Object(y.jsx)("th",{children:"Created at"},"table-head-item-3"),Object(y.jsx)("th",{},"table-head-item-4")]},"table-row-1")},"table-header"),Object(y.jsx)("tbody",{children:e.data.projects.map((function(e,a){var r=new Date(e.createdAt).toDateString();return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:e.name},"table-row-"+a+"-item-1"),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:e.description},"table-row-"+a+"-item-2"),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:r},"table-row-"+a+"-item-3"),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:Object(y.jsx)(m.a,{className:"bg-dark text-white border-0",onClick:function(){t.push("/projects/"+e.name)},children:"Select"})},"table-row-"+a+"-item-4")]},"table-row-"+a)}))},"table-body")]})}):void 0:Object(y.jsx)(_e,{})}function De(e){var t=Object(x.g)(),a=Object(r.useContext)(g),n=Object(o.a)(a,2),c=n[0],s=(n[1],Object(r.useContext)(me)),i=Object(o.a)(s,2),l=i[0],d=i[1],h=Object(r.useState)([]),p=Object(o.a)(h,2),f=p[0],O=p[1],v=Object(r.useState)("Select a Project"),S=Object(o.a)(v,2),k=S[0],w=S[1],N=Object(r.useState)(!1),_=Object(o.a)(N,2),T=(_[0],_[1]),D=Object(r.useState)(!1),C=Object(o.a)(D,2),F=(C[0],C[1]);return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Effect running"),e.next=3,ge({authToken:c,setUserInfo:d});case 3:case"end":return e.stop()}}),e)}))),[]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsxs)("div",{className:"main-card-header-container",children:[Object(y.jsx)("h3",{children:k}),Object(y.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[f?f.map((function(e){return Object(y.jsx)("div",{className:"main-card-header-item",children:e})})):"",f.length>0?Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){!function(e){if(1===e.filters.length&&(e.setProjectSelected(!1),e.setFilters([]),e.setTitle("Select a Project")),2===e.filters.length){e.setFormSelected(!1);var t=e.filters[0];e.setFilters([t]),e.setTitle("Select a Form")}}({setProjectSelected:T,setFilters:O,filters:f,setFormSelected:F,setTitle:w})},children:Object(y.jsx)(pe.a,{size:25})}):Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){t.push("/")},children:Object(y.jsx)(pe.a,{size:25})})]})]})}),Object(y.jsx)(b.a.Body,{className:"main-card-body",children:Object(y.jsx)(Te,{data:l,setProjectSelected:T,filters:f,setFilters:O,setTitle:w})})]})})}a(195);function Ce(){return Object(y.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Form Name"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{children:"Created At"})]})}),Object(y.jsx)("tbody",{children:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:3,children:"Forms Not Found"})})})]})}function Fe(e){var t=Object(x.g)(),a=!1;if(!e.data)return Object(y.jsx)(Ce,{});if(!e.data.user)return Object(y.jsx)(Ce,{});if(!e.data.user.roles)return Object(y.jsx)(Ce,{});void 0!==e.data.user.roles.projectManager&&e.data.user.roles.projectManager.includes(e.projectSelected)&&(a=!0);var r=!1;void 0!==e.data.forms&&(e.data.forms.length>0&&(r=e.data.forms.filter((function(t){return t.project===e.projectSelected})).length>0));return Object(y.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Form Name"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{children:"Created At"}),Object(y.jsx)("th",{children:"Submissions"}),Object(y.jsx)("th",{})]})}),Object(y.jsx)("tbody",{children:r?e.data.forms.map((function(r){var n=function(e){var t=new Date(e),a=""+(t.getMonth()+1),r=""+t.getDate(),n=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[r,a,n].join("/")}(r.createdAt);if(r.project===e.projectSelected){var c=!1;return!1===a&&!1,r.draft&&!1,r.submissions>0&&(c=!0),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:r.name}),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:r.draft?"Draft":"Finalized"}),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:n}),Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:e.submissionsLoading?Object(y.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):r.submissions}),Object(y.jsx)("td",{style:{"text-align":"center"},children:Object(y.jsxs)(D.a,{title:"Options",variant:"dark",menuVariant:"dark border-0",drop:"end",children:[Object(y.jsx)(C.a.Item,{className:"dark text-white border-0",onClick:function(){t.push("/projects/"+e.projectSelected+"/forms/"+r.name+"/collect")},children:"Collect Data"}),r.draft?Object(y.jsxs)("form",{method:"post",action:"https://rhomis-survey.stats4sdtest.online/login",class:"inline",children:[Object(y.jsx)("input",{type:"hidden",name:"token",value:e.authToken}),Object(y.jsx)("input",{type:"hidden",name:"redirect_url",value:"/xlsform/"+r.name+"/edit"}),Object(y.jsx)("button",{type:"submit",value:"submit",className:"form-button",children:"Edit Form"})]}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)(C.a.Item,{className:"dark text-white border-0",onClick:function(){t.push("/projects/"+e.projectSelected+"/forms/"+r.name+"/users")},children:"Manage Users"}),c?Object(y.jsx)(C.a.Item,{className:"dark text-white border-0",onClick:function(){t.push("/projects/"+e.projectSelected+"/forms/"+r.name+"/data")},children:"Access Data"}):Object(y.jsx)(y.Fragment,{})]})})]})}})):Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{style:{"text-align":"center"},colSpan:5,children:"No forms created yet"})})})})]})}function Ie(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2);a[0],a[1];return e.data&&e.data.user&&e.data.user.roles?(void 0!==e.data.user.roles.projectManager&&e.data.user.roles.projectManager.includes(e.projectSelected)&&!0,Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(b.a,{className:"project-management-card",children:[Object(y.jsx)(b.a.Header,{as:"h5",children:"Select a Form"}),Object(y.jsx)(b.a.Body,{children:Object(y.jsx)(Fe,{submissionsLoading:e.submissionsLoading,projectSelected:e.projectSelected,authToken:e.authToken,setAdminData:e.setAdminData,data:e.data,filters:e.filters,setFilters:e.setFilters,setFormSelected:e.setFormSelected})})]})})):Object(y.jsx)(Ce,{})}var Pe=function(){var e=Object(x.g)(),t=Object(x.h)().projectName,a=Object(r.useContext)(g),n=Object(o.a)(a,2),c=n[0],s=(n[1],Object(r.useContext)(me)),i=Object(o.a)(s,2),l=i[0],d=i[1],h=Object(r.useState)(!0),p=Object(o.a)(h,2),f=p[0],O=p[1],v=Object(r.useState)(),S=Object(o.a)(v,2);S[0],S[1],console.log("admin data"),console.log(l);var k=Object(r.useState)(null),w=Object(o.a)(k,2),N=w[0],_=w[1],T=Object(r.useState)(null),D=Object(o.a)(T,2),C=D[0],F=D[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({authToken:c,setUserInfo:d,getSubmissionCount:!0,projectName:t});case 2:O(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("projectSelected:  "+t),function(){e.apply(this,arguments)}()}),[]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsxs)("div",{className:"main-card-header-container",children:[Object(y.jsx)("h3",{children:"Form Overview"}),Object(y.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(y.jsx)("div",{className:"main-card-header-item",children:t}),Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){e.push("/projects")},children:Object(y.jsx)(pe.a,{size:25})})]})]})}),Object(y.jsx)(b.a.Body,{className:"main-card-body",children:Object(y.jsx)(Ie,{authToken:c,projectSelected:t,formSelected:N,setAdminData:d,data:l,setFormSelected:_,filters:C,setFilters:F,submissionsLoading:f})})]})})};var Ae=a(218),Le=a(217),Ee=a(125),Ge=a(19);a(196);function ze(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"get",url:"https://auth.l-gorman.com/api/meta-data",headers:{Authorization:t.authToken}});case 2:200===(a=e.sent).status&&(a.data.projects.length>0&&t.setShowProjectManagement(!0),!0===a.data.user.roles.administrator&&t.setShowAdmin(!0),a.data.user.roles.dataCollector.length>0&&t.setShowCollectData(!0)),400===a.status&&alert(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){var t=Object(r.useContext)(g),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],d=i[1],b=function(){return d(!1)},h=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(r.useState)(!1),p=Object(o.a)(m,2),f=p[0],O=p[1],x=Object(r.useState)(!1),v=Object(o.a)(x,2),S=(v[0],v[1]),k=Object(r.useState)(!1),w=Object(o.a)(k,2),N=w[0],_=w[1];return Object(r.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze({authToken:n,setShowAdmin:O,setShowCollectData:S,setShowProjectManagement:_});case 2:case"end":return e.stop()}}),e)}))),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(Ae.a,{fixed:"top",bg:"dark",variant:"dark",expand:"false",children:[Object(y.jsx)("div",{className:"menu-button",onClick:h,children:Object(y.jsx)(ie.d,{className:"menu-button-icon",size:30})}),Object(y.jsx)("h2",{style:{color:"white"},children:"RHoMIS"}),Object(y.jsx)(Le.a.Link,{className:"logout-button",as:Ge.b,to:"/login",onClick:function(){c(null),localStorage.clear()},children:"Logout"}),Object(y.jsxs)(Ee.a,{backdrop:"true",style:{"background-color":"#212529",width:"25%"},id:"offcanvasNavbar","aria-labelledby":"offcanvasNavbarLabel",placement:"start",show:l,onHide:b,children:[Object(y.jsx)(Ee.a.Header,{closeVariant:"white",closeButton:!0,style:{color:"white","background-color":"#212529"},children:Object(y.jsx)(Ee.a.Title,{id:"offcanvasNavbarLabel",children:Object(y.jsx)("h2",{style:{"padding-left":"20px"},children:"Dashboard"})})}),Object(y.jsxs)("div",{className:"side-bar-container",children:[Object(y.jsx)("div",{className:"side-bar-item",children:Object(y.jsx)(Le.a.Link,{className:"side-bar-link",as:Ge.b,onClick:function(){b()},to:"/",children:"Portal"})}),Object(y.jsx)("div",{className:"side-bar-item",children:Object(y.jsxs)("form",{style:{width:"100%"},method:"post",action:"https://rhomis-survey.stats4sdtest.online/login/",class:"inline",children:[Object(y.jsx)("input",{type:"hidden",name:"token",value:n}),Object(y.jsx)("input",{type:"hidden",name:"redirect_url",value:"/admin/xlsform/create"}),Object(y.jsx)("input",{className:"form-link",type:"submit",value:"Build a Survey"})]})}),N?Object(y.jsx)("div",{className:"side-bar-item",children:Object(y.jsx)(Le.a.Link,{className:"side-bar-link",as:Ge.b,onClick:function(){b()},to:"/projects",children:"Manage Projects"})}):Object(y.jsx)(y.Fragment,{}),f?Object(y.jsx)("div",{className:"side-bar-item",children:Object(y.jsx)(Le.a.Link,{className:"side-bar-link",as:Ge.b,onClick:function(){b()},to:"/administration",children:"Administration"})}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)("div",{className:"side-bar-item",children:Object(y.jsx)(Le.a.Link,{className:"side-bar-link",as:Ge.b,to:"/login",onClick:function(){c(null),localStorage.clear()},children:"Logout"})})]})]})]})})}var Be=a(216);a(199);function Re(e){return He.apply(this,arguments)}function He(){return(He=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("authToken: ",t.authToken),e.next=3,l()({method:"post",url:"https://auth.l-gorman.com/api/meta-data",headers:{Authorization:t.authToken}});case 3:a=e.sent,console.log("response: "),console.log(a),200===a.status&&(console.log("Setting project information"),console.log(a.data),t.setProjectInformation(a.data)),400===a.status&&alert(a.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t,a){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(j.a.mark((function e(t,a,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(t),e.next=4,l()({method:"post",url:"https://auth.l-gorman.com/api/projects/create",data:{name:a,description:r},headers:{Authorization:t}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(u.a)(j.a.mark((function e(t,a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log(t),e.next=4,l()({method:"delete",url:"https://auth.l-gorman.com/api/projects/delete",data:{name:a},headers:{Authorization:t}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t,a,r,n){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(u.a)(j.a.mark((function e(t,a,r,n,c){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),console.log("https://auth.l-gorman.com/api/forms/new?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false"),e.next=4,l()({method:"post",url:"https://auth.l-gorman.com/api/forms/new?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false",data:c,headers:{Authorization:t,"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t,a,r,n){return We.apply(this,arguments)}function We(){return(We=Object(u.a)(j.a.mark((function e(t,a,r,n,c){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://auth.l-gorman.com/api/forms/new-draft?form_name="+r+"&form_version="+n+"&project_name="+a+"&publish=false",data:c,headers:{Authorization:t,"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Project Name"}),Object(y.jsx)(h.a.Control,{type:"text",onChange:function(t){e.setNewProjectName(t.target.value)}})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Project Description"}),Object(y.jsx)(h.a.Control,{as:"textarea",rows:3,onChange:function(t){e.setNewProjectDescription(t.target.value)}})]})]}),Object(y.jsx)(m.a,{style:{"text-align":"right"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ve(e.authToken,e.newProjectName,e.newProjectDescription);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Add project"})]})}function $e(e){console.log(e.data);var t=["No Projects"],a=!0;return void 0!==e.data&null!==e.data&&(void 0!==e.data.projects&&(t=e.data.projects.map((function(e){return e.name})),a=!1),0===e.data.projects.length&&(t=["No Projects"],a=!0)),console.log(t),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select a Project"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select a Project",onChange:function(t){e.setSelectedProject(t.target.value)},disabled:a,"aria-label":"Default select example",children:[Object(y.jsx)("option",{disabled:!0,children:"Select a Project"}),t.map((function(e){return Object(y.jsx)("option",{children:e})}))]})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Enter the name of the form"}),Object(y.jsx)(h.a.Control,{onChange:function(t){e.setNewFormName(t.target.value)}}),Object(y.jsx)(h.a.Text,{children:'This must match the "form_title" field in your xlsx form settings'})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Enter the form version"}),Object(y.jsx)(h.a.Control,{onChange:function(t){e.setNewFormVersion(t.target.value)}}),Object(y.jsx)(h.a.Text,{children:'This must match the "version" field in your xlsx settings tab'})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select your file"}),Object(y.jsx)(h.a.Control,{type:"file",size:"lg",onChange:function(t){return e.setSelectedFile(t.target.files[0])}})]}),Object(y.jsx)(m.a,{onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qe(e.authToken,e.selectedProject,e.newFormName,e.newFormVersion,e.selectedFile);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Submit"})]})})}function et(e){console.log("Draft form data");var t=Object(r.useState)([]),a=Object(o.a)(t,2),n=a[0],c=a[1];console.log(e.data);var s=["No Projects"],i=!0;return void 0!==e.data&null!==e.data&&(void 0!==e.data.projects&&(s=e.data.projects.map((function(e){return e.name})),i=!1),0===e.data.projects.length&&(s=["No Projects"],i=!0)),console.log(s),console.log(e.data),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select the form you would like to update"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select a Project",onChange:function(t){e.setSelectedDraftProject(t.target.value);var a=[];void 0!==e.data&null!==e.data&&(void 0!==e.data.forms&&(e.data.forms.map((function(e){e.project===t.target.value&&a.push(e.name)})),c(a)),0===e.data.projects.length&&c([]))},disabled:i,"aria-label":"Default select example",children:[Object(y.jsx)("option",{disabled:!0,children:"Select a Project"}),s.map((function(e){return Object(y.jsx)("option",{children:e})}))]})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select the form you would like to update"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select a form",onChange:function(t){e.setNewDraftFormName(t.target.value)},"aria-label":"Default select example",children:[Object(y.jsx)("option",{disabled:!0,children:"Select a form"}),n.map((function(e){return Object(y.jsx)("option",{children:e})}))]})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Enter the new form version"}),Object(y.jsx)(h.a.Control,{onChange:function(t){e.setNewDraftFormVersion(t.target.value)}}),Object(y.jsx)(h.a.Text,{children:'This must match the "version" field in your xlsx settings tab, please ensure it is different to the previous version'})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select your file"}),Object(y.jsx)(h.a.Control,{type:"file",size:"lg",onChange:function(t){return e.setSelectedDraftFile(t.target.files[0])}})]}),Object(y.jsx)(m.a,{onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(e.authToken,e.selectedDraftProject,e.newDraftFormName,e.newDraftFormVersion,e.selectedDraftFile);case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Submit"})]})})}function tt(e){console.log("Draft form data");var t=Object(r.useState)([]),a=Object(o.a)(t,2),n=a[0],c=a[1];console.log(e.data);var s=["No Projects"],i=!0;return void 0!==e.data&null!==e.data&&(void 0!==e.data.projects&&(s=e.data.projects.map((function(e){return e.name})),i=!1),0===e.data.projects.length&&(s=["No Projects"],i=!0)),console.log(s),console.log(e.data),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select a project"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select a Project",onChange:function(t){e.setSelectedDraftProject(t.target.value);var a=[];void 0!==e.data&null!==e.data&&(void 0!==e.data.forms&&(e.data.forms.map((function(e){e.project===t.target.value&&a.push(e.name)})),c(a)),0===e.data.projects.length&&c([]))},disabled:i,"aria-label":"Default select example",children:[Object(y.jsx)("option",{disabled:!0,children:"Select a Project"}),s.map((function(e){return Object(y.jsx)("option",{children:e})}))]})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select the form you would like to finalize"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select a form",onChange:function(t){console.log("Form name seleceted"),console.log(t.target.value),e.setNewDraftFormName(t.target.value)},"aria-label":"Default select example",children:[Object(y.jsx)("option",{disabled:!0,children:"Select a form"}),n.map((function(e){return Object(y.jsx)("option",{children:e})}))]})]}),Object(y.jsx)(m.a,{onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at({authToken:e.authToken,project:e.selectedDraftProject,form:e.newDraftFormName});case 2:return t.next=4,e.GetProjectInformation({authToken:e.authToken,setProjectInformation:e.setProjectInformation});case 4:case"end":return t.stop()}}),t)}))),children:"Finalise"})]})})}function at(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Finalizing form"),console.log(t),e.next=4,l()({method:"post",url:"https://auth.l-gorman.com/api/forms/publish",headers:{Authorization:t.authToken},params:{form_name:t.form,project_name:t.project}});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return console.log(e),e.data?void 0!==e.data.projects?Object(y.jsx)("div",{children:Object(y.jsxs)(T.a,{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"},"table-head-item-1"),Object(y.jsx)("th",{children:"Project Name"},"table-head-item-2"),Object(y.jsx)("th",{children:"Description"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(y.jsx)("tbody",{children:e.data.projects.map((function(t,a){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)(m.a,{variant:"danger",onClick:Object(u.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ke(e.authToken,t.name);case 2:case"end":return a.stop()}}),a)}))),children:"Delete"})},"table-row-"+a+"-item-1"),Object(y.jsx)("td",{children:t.name},"table-row-"+a+"-item-2"),Object(y.jsx)("td",{children:t.description},"table-row-"+a+"-item-3")]},"table-row-"+a)}))},"table-body")]})}):void 0:Object(y.jsx)("div",{children:Object(y.jsxs)(T.a,{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"#"},"table-head-item-1"),Object(y.jsx)("th",{children:"Project Name"},"table-head-item-2"),Object(y.jsx)("th",{children:"Description"},"table-head-item-3")]},"table-row-1")},"table-header"),Object(y.jsx)("tbody",{children:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:3,children:"No projects found"})})})]})})}function ct(e){return st.apply(this,arguments)}function st(){return(st=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l()({url:"https://auth.l-gorman.com/api/admin",method:"post",headers:{Authorization:t.authToken},data:{email:t.newAdmin}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ot(){var e=Object(r.useContext)(g),t=Object(o.a)(e,2),a=t[0],n=(t[1],Object(r.useState)(null)),c=Object(o.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(null),d=Object(o.a)(l,2),p=d[0],f=d[1],O=Object(r.useState)(null),x=Object(o.a)(O,2),v=x[0],S=x[1],k=Object(r.useState)(null),w=Object(o.a)(k,2),N=w[0],_=w[1],T=Object(r.useState)(null),D=Object(o.a)(T,2),C=D[0],F=D[1],I=Object(r.useState)(null),P=Object(o.a)(I,2),A=P[0],L=P[1],E=Object(r.useState)(null),G=Object(o.a)(E,2),z=G[0],U=G[1],M=Object(r.useState)(null),B=Object(o.a)(M,2),R=B[0],H=B[1],V=Object(r.useState)(null),q=Object(o.a)(V,2),K=q[0],J=q[1],Q=Object(r.useState)(null),W=Object(o.a)(Q,2),Z=W[0],$=W[1],ee=Object(r.useState)(null),te=Object(o.a)(ee,2),ae=te[0],re=te[1],ne=Object(r.useState)(null),ce=Object(o.a)(ne,2),se=ce[0],oe=ce[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re({authToken:a,setProjectInformation:i});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsx)("h3",{children:"Creating Forms/Projects"})}),Object(y.jsx)(b.a.Body,{children:Object(y.jsxs)(Be.a,{defaultActiveKey:"0",children:[Object(y.jsxs)(Be.a.Item,{eventKey:"0",children:[Object(y.jsx)(Be.a.Header,{children:"Projects"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)(nt,{GetProjectInformation:Re,setProjectInformation:i,data:s,authToken:a})})]}),Object(y.jsxs)(Be.a.Item,{eventKey:"1",children:[Object(y.jsx)(Be.a.Header,{children:"Create a Project"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)(Ze,{GetProjectInformation:Re,setProjectInformation:i,newProjectName:p,setNewProjectName:f,newProjectDescription:v,setNewProjectDescription:S,authToken:a})})]}),Object(y.jsxs)(Be.a.Item,{eventKey:"2",children:[Object(y.jsx)(Be.a.Header,{children:"Create a Form"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)($e,{GetProjectInformation:Re,setProjectInformation:i,authToken:a,data:s,selectedFile:C,setSelectedFile:F,setNewFormName:L,newFormName:A,setNewFormVersion:U,newFormVersion:z,setSelectedProject:_,selectedProject:N})})]}),Object(y.jsxs)(Be.a.Item,{eventKey:"3",children:[Object(y.jsx)(Be.a.Header,{children:"Update Draft Form"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)(et,{GetProjectInformation:Re,setProjectInformation:i,authToken:a,data:s,selectedDraftFile:K,setSelectedDraftFile:J,setNewDraftFormName:$,newDraftFormName:Z,setNewDraftFormVersion:re,newDraftFormVersion:ae,setSelectedDraftProject:H,selectedDraftProject:R})})]}),Object(y.jsxs)(Be.a.Item,{eventKey:"4",children:[Object(y.jsx)(Be.a.Header,{children:"Finalize a Form"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)(tt,{GetProjectInformation:Re,setProjectInformation:i,authToken:a,data:s,setSelectedDraftProject:H,selectedDraftProject:R,setNewDraftFormName:$,newDraftFormName:Z})})]}),Object(y.jsxs)(Be.a.Item,{eventKey:"5",children:[Object(y.jsx)(Be.a.Header,{children:"Add Administrator"}),Object(y.jsx)(Be.a.Body,{children:Object(y.jsx)(h.a,{children:Object(y.jsx)(Y.a,{children:Object(y.jsx)(X.a,{md:"4",children:Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"User Email"}),Object(y.jsx)(h.a.Control,{type:"email",onChange:function(e){oe(e.target.value)}}),Object(y.jsx)(m.a,{className:"border-0 bg-dark",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ct({authToken:a,newAdmin:se});case 1:case"end":return e.stop()}}),e)}))),children:"Add User"})]})})})})})]})]})})]})})}function it(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=t.data.forms.filter((function(e){return e.name===t.formSelected&&e.project===t.projectSelected}))[0],e.next=4,l()({method:"post",url:"https://api.l-gorman.com/api/process-data",headers:{Authorization:t.authToken},data:{commandType:t.commandType,projectName:t.projectSelected,formName:t.formSelected,formVersion:a.formVersion,draft:t.draft}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return console.log(e),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("ol",{children:[Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"https://docs.getodk.org/collect-install/",target:"_blank",children:"Install ODK"})}),Object(y.jsx)("li",{children:"Open the ODK app"}),Object(y.jsx)("li",{children:"Scan this QR code"})]}),Object(y.jsx)("div",{className:"qr-code-container",children:e.formState.encoded_settings?Object(y.jsx)(Oe.a,{value:e.formState.encoded_settings}):Object(y.jsx)(p.a,{as:"span",animation:"border",size:"100px",role:"status","aria-hidden":"true"})}),e.formState.draft?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(m.a,{className:"bg-dark border-0",style:{margin:"10px"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it({commandType:"generate",draft:e.formState.draft,authToken:e.authToken,data:e.data,formSelected:e.formSelected,projectSelected:e.projectSelected});case 2:console.log("Finished Generating Data");case 3:case"end":return t.stop()}}),t)}))),children:"Generate Mock Submissions"}),Object(y.jsx)("br",{}),Object(y.jsx)("p",{children:"*Your form is currently saved as a draft. Any submissions you make will be removed once the form is finalised. Mock submissions are a useful way to see what your data might look like, they will also be deleted once you finalise the form* "})]}):Object(y.jsx)(y.Fragment,{})]})}function jt(){var e=Object(x.h)().projectName,t=Object(x.h)().formName,a=Object(r.useState)(!1),n=Object(o.a)(a,2),c=(n[0],n[1],Object(r.useState)(!0)),s=Object(o.a)(c,2),i=(s[0],s[1],Object(r.useContext)(g)),l=Object(o.a)(i,2),d=l[0],h=(l[1],Object(r.useContext)(me)),p=Object(o.a)(h,2),f=p[0],O=p[1],v=Object(x.g)(),S=Object(r.useState)({renderODKFormCode:!1,projectManagerOfForm:!1,dataAnalystOfForm:!1,odkConf:!1,encoded_settings:!1,draft:!1,data:{forms:[],users:[],projects:[]}}),k=Object(o.a)(S,2),w=k[0],N=k[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({authToken:d,setUserInfo:O});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){var a,r={renderODKFormCode:function(e){return!!e.data&&!!e.data.forms&&1===e.data.forms.filter((function(t){return t.name===e.formSelected&t.project===e.projectSelected})).length}({data:(a={data:f,formSelected:t,projectSelected:e}).data,formSelected:a.formSelected,projectSelected:a.projectSelected}),projectManagerOfForm:function(e){return!!e.data&&!!e.data.user&&!!e.data.user.roles&&!!e.data.user.roles.projectManager&&!!e.data.user.roles.projectManager.includes(e.projectSelected)}({data:a.data,projectSelected:a.projectSelected}),odkConf:function(e){if(!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));return 1===t.length&&(!0===t[0].draft?t[0].draftCollectionDetails:!1===t[0].draft&&t[0].collectionDetails)}({data:a.data,projectSelected:a.projectSelected,formSelected:a.formSelected}),encoded_settings:function(e){if(!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));if(1!==t.length)return!1;if(!0===t[0].draft){var a=t[0].draftCollectionDetails;return Object(xe.deflateSync)(JSON.stringify(a)).toString("base64")}if(!1===t[0].draft){var r=t[0].collectionDetails;return Object(xe.deflateSync)(JSON.stringify(r)).toString("base64")}return!1}({data:a.data,projectSelected:a.projectSelected,formSelected:a.formSelected}),draft:function(e){if(!e.data)return!1;if(!e.data.forms)return!1;var t=e.data.forms.filter((function(t){return t.name===e.formSelected&&t.project===e.projectSelected}));return 1===t.length&&(!0===t[0].draft||(t[0].draft,!1))}({data:a.data,projectSelected:a.projectSelected,formSelected:a.formSelected})};console.log("Setting initial state"),console.log(r),console.log(f),N(r)}),[f]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsxs)("div",{className:"main-card-header-container",children:[Object(y.jsx)("h3",{children:"Collect Data"}),Object(y.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(y.jsx)("div",{className:"main-card-header-item",children:e}),Object(y.jsx)("div",{className:"main-card-header-item",children:t}),Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){v.push("/projects/"+e)},children:Object(y.jsx)(pe.a,{size:25})})]})]})}),Object(y.jsx)(b.a.Body,{className:"main-card-body",children:Object(y.jsx)(dt,{formState:w,data:f,authToken:d,formSelected:t,projectSelected:e})})]})})}var ut=a(3);a(200);function bt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"https://api.l-gorman.com/api/data",data:{dataType:t.dataType,projectID:t.projectID,formID:t.formID,unit:t.unit,data:t.data},headers:{Authorization:t.authToken}});case 2:if(a=e.sent,null!==(r=a.data)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return console.log(e),Object(y.jsx)("div",{className:"table-div",children:Object(y.jsxs)(T.a,{className:"units-table",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Survey Value"}),Object(y.jsx)("th",{children:"Conversion"})]},"row_1")}),Object(y.jsx)("tbody",{children:e.unitsData.map((function(t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{"vertical-align":"middle"},children:t.survey_value},"unit-row-"+t.survey_value+"-survey-value-"+t.id_rhomis_dataset),Object(y.jsxs)("td",{style:{"vertical-align":"middle"},children:[Object(y.jsx)("form",{children:Object(y.jsx)("input",{class:"form-control",type:"text",defaultValue:t.conversion,onChange:function(a){!function(e){console.log(e);var t=e.unitsData,a=t.findIndex((function(t){if(t.unit_type===e.unit.unit_type&&t.survey_value===e.unit.survey_value&&t.id_rhomis_dataset===e.unit.id_rhomis_dataset)return!0}));console.log(a),t[a].conversion=e.update,e.setUnitsData(t)}(Object(ut.a)(Object(ut.a)({},e),{},{update:a.target.value,unit:t}))}})})," "]},"unit-row-"+t.survey_value+"-conversion-"+t.id_rhomis_dataset)]},"unit-row-"+t.survey_value+t.id_rhomis_dataset)}))})]})})}function pt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.unitsData),e.prev=1,e.next=4,l()({method:"post",url:"https://api.l-gorman.com/api/conversions",headers:{Authorization:t.authToken},data:{projectSelected:t.projectSelected,formSelected:t.formSelected,unitType:t.unitsSelect,unitsData:t.unitsData}});case 4:return 200===(a=e.sent).status&&v.Store.addNotification({title:"Success",message:t.process_label+" Completed",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),v.Store.addNotification({title:"Error",message:e.t0.response.data,type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Ot(e){var t=Object(r.useState)(null),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],b=Object(r.useState)([{survey_value:"",conversion:""}]),p=Object(o.a)(b,2),f=p[0],O=p[1],x=Object(r.useState)(!1),g=Object(o.a)(x,2),v=g[0],S=g[1];console.log(e);var k=["mean_crop_price_lcu_per_kg","mean_livestock_price_per_animal","mean_meat_price_per_kg","mean_milk_price_per_litre","mean_eggs_price_per_kg","mean_bees_honey_price_per_kg","crop_calories","milk_calories","eggs_calories","honey_calories","meat_calories","staple_crop"];return Object(r.useEffect)((function(){console.log("Units"),console.log(f)}),[f]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(h.a,{children:[Object(y.jsx)(h.a.Label,{children:e.formLabel}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select",onChange:function(){var t=Object(u.a)(j.a.mark((function t(a){var r,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(a.target.value),t.next=3,bt({authToken:e.authToken,dataType:a.target.value,projectID:e.projectSelected,formID:e.formSelected,unit:!0,data:!1});case 3:r=t.sent,n=Nt(r,l),d(n),O(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(y.jsx)("option",{disabled:!0,children:"Select"},"default-select"),e.formData.units.map((function(t){return"units"===e.formType&&!1===k.some((function(e){return e==t}))||"prices"===e.formType&&!0===k.some((function(e){return e==t}))?Object(y.jsx)("option",{children:t},"unit-option-"+t):void 0}))]})]}),Object(y.jsx)("br",{}),n?Object(y.jsx)(mt,{unitsData:f,setUnitsData:O}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)("br",{}),Object(y.jsx)(h.a,{children:Object(y.jsx)(h.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(y.jsx)(h.a.Check,{type:"checkbox",label:e.checkBoxLabel,onChange:function(){S(!v)}})})}),Object(y.jsx)("div",{style:{display:"inline-grid",width:"100%"},children:Object(y.jsx)("div",{style:{marginLeft:"auto",marginRight:0},children:v?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt({commandType:e.commandType,formSelected:e.formSelected,projectSelected:e.projectSelected,process_label:e.processLabel,data:e.userInfo,authToken:e.authToken});case 2:we({setAuthToken:e.setAuthToken,authToken:e.authToken,setUserInfo:e.setUserInfo,projectName:e.projectSelected,formName:e.formSelected,setFormData:e.setFormData});case 3:case"end":return t.stop()}}),t)}))),children:e.submissionLabel})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("a",{download:e.projectSelected+"_"+e.formSelected+"_"+n+".csv",href:l,children:Object(y.jsx)(m.a,{style:{margin:"2px"},className:"bg-dark border-0",children:"Download"})}),Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt(Object(ut.a)(Object(ut.a)({},e),{},{unitsData:f,unitsSelect:n,process_label:"Conversion Submission"}));case 2:case"end":return t.stop()}}),t)}))),children:"Submit"})]})})})]})}function xt(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(u.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data.forms.filter((function(e){return e.name===t.formSelected&&e.project===t.projectSelected}))[0],v.Store.addNotification({title:"Processing data",type:"default",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.prev=2,e.next=5,l()({method:"post",url:"https://api.l-gorman.com/api/process-data",headers:{Authorization:t.authToken},data:{commandType:t.commandType,projectName:t.projectSelected,formName:t.formSelected,formVersion:a.formVersion,draft:a.draft}});case 5:return 200===e.sent.status&&v.Store.addNotification({title:"Success",message:t.process_label+" Completed",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0.response),v.Store.addNotification({title:"Error",message:e.t0.response.data,type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function vt(e){return Object(y.jsxs)(b.a,{style:{marginTop:"30px"},children:[Object(y.jsx)(b.a.Header,{children:"Units"}),Object(y.jsx)(b.a.Body,{children:Object(y.jsx)(Ot,Object(ut.a)(Object(ut.a)({},e),{},{formType:"units",formLabel:"Select the type of unit",checkBoxLabel:"I confirm that I have verified and submitted all units, proceed to (re)calculate product prices",submissionLabel:"Calculate Prices",commandType:"prices",processLabel:"Price Calculations"}))})]})}function yt(e){return Object(y.jsxs)(b.a,{style:{marginTop:"30px"},children:[Object(y.jsx)(b.a.Header,{children:"Prices and Calories"}),Object(y.jsx)(b.a.Body,{children:Object(y.jsx)(Ot,Object(ut.a)(Object(ut.a)({},e),{},{formType:"prices",formLabel:"Select the price/calorie conversion",checkBoxLabel:"I confirm that I have verified and submitted all price and calorie conversions, proceed to (re)calculate RHoMIS indicators",submissionLabel:"Calculate Indicators",commandType:"indicators",processLabel:"Indicator Calculations"}))})]})}function St(e){var t=Object(r.useState)(null),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(null),i=Object(o.a)(s,2),l=i[0],d=i[1],p=Object(r.useState)(""),f=Object(o.a)(p,2),O=f[0],x=f[1];return Object(y.jsxs)(b.a,{style:{"margin-top":"30px"},children:[Object(y.jsx)(b.a.Header,{children:"Final Outputs"}),Object(y.jsxs)(b.a.Body,{children:[Object(y.jsx)(h.a,{children:Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"Select the type of data"}),Object(y.jsxs)(h.a.Select,{defaultValue:"Select",onChange:function(){var t=Object(u.a)(j.a.mark((function t(a){var r,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(a.target.value),t.next=3,bt({authToken:e.authToken,dataType:a.target.value,projectID:e.projectSelected,formID:e.formSelected,unit:!1,data:!0});case 3:r=t.sent,n=Nt(r,O),x(n),d(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(y.jsx)("option",{disabled:!0,children:"Select"},"default-select"),e.formData.dataSets.map((function(e){return Object(y.jsx)("option",{children:e},"data-option-"+e)}))]})]})}),l?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("br",{}),wt(l),Object(y.jsx)("div",{style:{display:"inline-grid",width:"100%"},children:Object(y.jsx)("div",{style:{marginLeft:"auto",marginRight:0,marginTop:"2px"},children:Object(y.jsx)("a",{download:e.projectSelected+"_"+e.formSelected+"_"+n+".csv",href:O,children:Object(y.jsx)(m.a,{className:"bg-dark border-0",children:"Download Data"})})})})]}):Object(y.jsx)(y.Fragment,{})]})]})}function kt(e){return Object(y.jsxs)(y.Fragment,{children:[e.showUnits?Object(y.jsx)(vt,Object(ut.a)({},e)):Object(y.jsx)(y.Fragment,{}),e.showPrices?Object(y.jsx)(yt,Object(ut.a)({},e)):Object(y.jsx)(y.Fragment,{}),e.showOutputs?Object(y.jsx)(St,Object(ut.a)({},e)):Object(y.jsx)(y.Fragment,{})]})}function wt(e){if(null!==e){for(var t=e,a=[],r=0;r<t.length;r++)for(var n=Object.keys(t[r]),c=0;c<n.length;c++){var s=n[c];if(!a.some((function(e){return e===s}))&&(0===r&&a.splice(c,0,s),r>0))if(void 0!==!n[c-1]){var o=a.indexOf(n[c-1]);a.splice(o+1,0,s)}else a.splice(c+1,0,s)}return Object(y.jsx)("div",{className:"table-div",children:Object(y.jsxs)(T.a,{striped:!0,hover:!0,size:"sm",responsive:!0,children:[Object(y.jsx)("thead",{children:Object(y.jsx)("tr",{children:a.map((function(e,t){return Object(y.jsx)("th",{className:"col-md-1",children:e},"row_1_column_"+t)}))},"row_1")}),Object(y.jsx)("tbody",{children:t.map((function(e,t){return Object(y.jsx)("tr",{children:a.map((function(a,r){return Object(y.jsx)("td",{height:"10px",children:e[a]?e[a]:"NA"},"row_"+t+"column_"+r+"_household_"+t)}))},"row_"+t)}))})]})})}}function Nt(e,t){var a=function(e){if(null!==e&&void 0!==e.length){for(var t=[],a=e,r=[],n=0;n<a.length;n++)for(var c=Object.keys(a[n]),s=0;s<c.length;s++){var o=c[s];if(!r.some((function(e){return e===o}))&&(0===n&&r.splice(s,0,o),n>0))if(void 0!==!c[s-1]){var i=r.indexOf(c[s-1]);r.splice(i+1,0,o)}else r.splice(s+1,0,o)}t.push(r.join(", "));var l=a.map((function(e){return r.map((function(t){return null!==e[t]?e[t]:""})).join(", ")}));return(t=t.concat(l)).join("\n")}}(e),r=new Blob([a],{type:"text/plain"});return""!==t&&window.URL.revokeObjectURL(t),window.URL.createObjectURL(r)}function _t(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1==t.formData.unitsExtracted&&t.setShowUnits(!0),0!=t.formData.unitsExtracted){e.next=9;break}return v.Store.addNotification({title:"Extracting Units",message:"Please wait while we extract units from the dataset",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.next=5,xt({commandType:"units",formSelected:t.formSelected,projectSelected:t.projectSelected,process_label:"Unit Extraction",data:t.data,authToken:t.authToken});case 5:if(!0!==e.sent){e.next=9;break}return e.next=9,we({setAuthToken:t.setAuthToken,authToken:t.authToken,setUserInfo:t.setUserInfo,projectName:t.projectSelected,formName:t.formSelected,setFormData:t.setFormData});case 9:1==t.formData.pricesCalculated&&t.setShowPrices(!0),t.formData.pricesCalculated,1==t.formData.finalIndicators&&t.setShowOutputs(!0),t.formData.finalIndicators;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(){var e=Object(x.h)().projectName,t=Object(x.h)().formName,a=Object(r.useContext)(g),n=Object(o.a)(a,2),c=n[0],s=n[1],i=Object(r.useContext)(me),l=Object(o.a)(i,2),d=l[0],h=l[1],f=Object(x.g)(),O=Object(r.useState)({}),v=Object(o.a)(O,2),S=v[0],k=v[1],w=Object(r.useState)(!0),N=Object(o.a)(w,2),_=N[0],T=N[1],D=Object(r.useState)(!1),C=Object(o.a)(D,2),F=C[0],I=C[1],P=Object(r.useState)(!1),A=Object(o.a)(P,2),L=A[0],E=A[1],G=Object(r.useState)(!1),z=Object(o.a)(G,2),U=z[0],M=z[1];return Object(r.useEffect)((function(){function a(){return(a=Object(u.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,we({setAuthToken:s,authToken:c,setUserInfo:h,projectName:e,formName:t,setFormData:k});case 2:T(!1);case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function a(){return(a=Object(u.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_t({setAuthToken:s,authToken:c,setUserInfo:h,setFormData:k,formData:S,data:d,projectSelected:e,formSelected:t,setShowUnits:I,setShowPrices:E,setShowOutputs:M});case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}console.log("Form Data"),console.log(S),function(){a.apply(this,arguments)}()}),[S]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsxs)("div",{className:"main-card-header-container",children:[Object(y.jsx)("h3",{children:"Data"}),Object(y.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(y.jsx)("div",{className:"main-card-header-item",children:e}),Object(y.jsx)("div",{className:"main-card-header-item",children:t}),Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){f.push("/projects/"+e)},children:Object(y.jsx)(pe.a,{size:25})})]})]})}),Object(y.jsx)(b.a.Body,{children:_?Object(y.jsx)(p.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):Object(y.jsx)(kt,{authToken:c,formData:S,projectSelected:e,formSelected:t,showUnits:F,userInfo:d,showPrices:L,showOutputs:U,setAuthToken:s,setFormData:k})})]})})}function Ct(e){return!!e.data&&(!!e.data.user&&(!!e.data.user.roles&&(!!e.data.user.roles.projectManager&&!!e.data.user.roles.projectManager.includes(e.projectSelected))))}function Ft(e){return console.log(e),"projectManager"===e.userType?{method:"post",url:"https://auth.l-gorman.com/api/user/project-manager",headers:{Authorization:e.authToken},data:{projectName:e.projectName,email:e.email}}:"dataCollector"===e.userType?{method:"post",url:"https://auth.l-gorman.com/api/user/data-collector",headers:{Authorization:e.authToken},data:{formName:e.formName,email:e.email}}:"analyst"===e.userType?{method:"post",url:"https://auth.l-gorman.com/api/user/analyst",headers:{Authorization:e.authToken},data:{formName:e.formName,email:e.email}}:void 0}function It(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ft(t),e.prev=1,e.next=4,l()(a);case 4:return 200===(r=e.sent).status&&v.Store.addNotification({title:"Success",message:"User Added",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),v.Store.addNotification({title:"Error",message:e.t0.response.data,type:"danger",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:2e3}}),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function At(e){var t=Object(r.useState)(),a=Object(o.a)(t,2),n=(a[0],a[1],Object(r.useState)()),c=Object(o.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(""),d=Object(o.a)(l,2),p=d[0],f=d[1],O=Object(r.useState)(""),x=Object(o.a)(O,2),g=x[0],v=x[1];return console.log("User form props"),console.log(e),Object(y.jsx)(y.Fragment,{children:e.projectManagerOfForm?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(b.a.Body,{children:[Object(y.jsxs)(b.a,{children:[Object(y.jsx)(b.a.Header,{as:"h5",children:"Add Project Manager"}),Object(y.jsx)(b.a.Body,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"User email"}),Object(y.jsx)(h.a.Control,{onChange:function(e){i(e.target.value)}})]}),Object(y.jsx)(m.a,{className:"bg-dark text-white border-0 float-right",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.projectSelected),t.next=3,It({authToken:e.authToken,email:s,projectName:e.projectSelected,formName:null,userType:"projectManager"});case 3:a=t.sent,console.log(a);case 5:case"end":return t.stop()}}),t)}))),children:"Add Project Manager"})]})})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(b.a.Header,{as:"h5",children:"Add Form Level User"}),Object(y.jsx)(b.a.Body,{children:Object(y.jsxs)(h.a,{children:[Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"User email"}),Object(y.jsx)(h.a.Control,{onChange:function(e){v(e.target.value)}})]}),Object(y.jsxs)(h.a.Group,{children:[Object(y.jsx)(h.a.Label,{children:"User Role"}),Object(y.jsxs)(h.a.Select,{"aria-label":"Default select example",defaultValue:"Open this select menu",onChange:function(e){f(e.target.value)},children:[Object(y.jsx)("option",{disabled:!0,children:"Open this select menu"}),Object(y.jsx)("option",{value:"dataCollector",children:"Data Collector: Can access training materials and configure enumerator devices"}),Object(y.jsx)("option",{value:"analyst",children:"Data Analyst: Can download processed data"})]})]}),Object(y.jsx)(m.a,{className:"bg-dark text-white border-0 float-right",style:{marginTop:"10px"},onClick:Object(u.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It({authToken:e.authToken,email:g,formName:e.formSelected,userType:p});case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),children:"Add User"})]})})]})]})}):Object(y.jsx)(y.Fragment,{})})}function Lt(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(x.h)().projectName,s=Object(x.h)().formName,i=Object(r.useContext)(me),l=Object(o.a)(i,2),d=l[0],j=(l[1],Object(r.useContext)(g)),u=Object(o.a)(j,2),h=u[0],p=(u[1],Object(x.g)());return console.log("Admin data"),console.log(d),Object(r.useEffect)((function(){var e=Ct({data:d,projectSelected:c});console.log("project manager"),console.log(e),n(e)}),[d]),Object(r.useEffect)((function(){var e=Ct({data:d,projectSelected:c});console.log("project manager"),console.log(e),n(e)}),[]),Object(y.jsx)("div",{id:"project-management-container",className:"sub-page-container",children:Object(y.jsxs)(b.a,{className:"main-card border-0",children:[Object(y.jsx)(b.a.Header,{className:" bg-dark text-white",children:Object(y.jsxs)("div",{className:"main-card-header-container",children:[Object(y.jsx)("h3",{children:"User Management"}),Object(y.jsxs)("div",{style:{display:"flex","flex-direction":"row","margin-left":"auto"},children:[Object(y.jsx)("div",{className:"main-card-header-item",children:c}),Object(y.jsx)("div",{className:"main-card-header-item",children:s}),Object(y.jsx)(m.a,{className:"bg-dark border-0",onClick:function(){p.push("/projects/"+c)},children:Object(y.jsx)(pe.a,{size:25})})]})]})}),Object(y.jsx)(b.a.Body,{className:"main-card-body",children:Object(y.jsx)(At,{projectSelected:c,formSelected:s,projectManagerOfForm:a,authToken:h})})]})})}function Et(){var e=Object(r.useContext)(g),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(me),s=Object(o.a)(c,2),i=(s[0],s[1]);Object(x.g)();return Object(r.useEffect)((function(){ye({setAuthToken:n})}),[]),Object(r.useEffect)((function(){ge({authToken:a,setUserInfo:i})}),[a]),console.log("Auth token context"),console.log(a),Object(y.jsx)(Gt,{authToken:a})}function Gt(e){return console.log(e.authToken),e.authToken?Object(y.jsxs)(Ge.a,{children:[Object(y.jsx)(Me,{}),Object(y.jsxs)(x.d,{children:[Object(y.jsx)(x.b,{exact:!0,path:"/",children:Object(y.jsx)(x.a,{from:"/",to:"/home"})}),Object(y.jsx)(x.b,{path:"/home",component:he}),Object(y.jsx)(x.b,{path:"/register",children:Object(y.jsx)(ne,{})}),Object(y.jsx)(x.b,{path:"/projects/:projectName/forms/:formName/collect",component:jt}),Object(y.jsx)(x.b,{path:"/projects/:projectName/forms/:formName/users",component:Lt}),Object(y.jsx)(x.b,{path:"/projects/:projectName/forms/:formName/data",component:Dt}),Object(y.jsx)(x.b,{path:"/projects/:projectName",component:Pe}),Object(y.jsx)(x.b,{path:"/projects",children:Object(y.jsx)(De,{})}),Object(y.jsx)(x.b,{path:"/data-querying",component:Q}),Object(y.jsx)(x.b,{path:"/administration",component:ot}),Object(y.jsx)(x.a,{from:"*",to:"/home"})]})]}):e.authToken?void 0:Object(y.jsx)(Ge.a,{children:Object(y.jsxs)(x.d,{children:[Object(y.jsx)(x.b,{exact:!0,path:"/",children:Object(y.jsx)(x.a,{from:"/",to:"/login"})}),Object(y.jsx)(x.b,{path:"/register",children:Object(y.jsx)(ne,{})}),Object(y.jsx)(x.b,{path:"/login",children:Object(y.jsx)(_,{})})]})})}a(201);var zt=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),s=Object(o.a)(c,2),i=s[0],l=s[1];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v.ReactNotifications,{}),Object(y.jsx)(g.Provider,{value:[a,n],children:Object(y.jsx)(me.Provider,{value:[i,l],children:Object(y.jsx)("div",{className:"main-app-background",children:Object(y.jsx)("div",{className:"main-page",children:Object(y.jsx)(Et,{})})})})})]})},Ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,220)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(zt,{})}),document.getElementById("root")),Ut()},47:function(e,t,a){},88:function(e,t,a){}},[[202,1,2]]]);
//# sourceMappingURL=main.7c288809.chunk.js.map