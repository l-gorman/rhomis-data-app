{"version":3,"sources":["components/authentication-component/AuthContext.js","components/login-component/login-component.js","components/data-query-component/data-query-component.js","components/register-component/register-component.js","components/portal-component/portal-data.js","components/portal-component/portal-component.js","components/user-info-component/UserContext.js","components/fetching-context-info/fetching-context-info.js","components/project-management-component/project-management-component.js","components/form-management-component/form-management-component.js","components/navigation-bar/navigation-bar-component.js","components/form-creation-component/form-creation-component.js","components/data-collection-component/data-collection-component.js","components/data-access-component/data-access-component.js","components/user-management-component/user-management-component.js","components/routing-component/routing-component.js","App.js","reportWebVitals.js","index.js"],"names":["AuthContext","createContext","CheckCredentials","props","email","Store","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","password","LoginCard","useContext","setAuthToken","history","useHistory","useState","setEmail","setPassword","requestError","setRequestError","loading","setLoading","useEffect","localToken","localStorage","getItem","console","log","currentDate","Date","localTokenCreationTime","getTime","push","Card","className","Header","Body","size","Form","style","Group","Label","htmlFor","Control","id","onChange","event","target","value","Button","variant","Spinner","as","animation","role","onClick","a","Login","tokenResponse","status","data","setItem","tokenDate","textAlign","width","href","preventDefault","axios","method","url","process","response","LoginComponent","open","setOpen","Fade","in","renderTable","undefined","length","full_data_set","slice","column_names","household_index","household_column_names","Object","keys","column_index","new_column","some","column","splice","index_of_previous_column_name","indexOf","Table","striped","bordered","hover","responsive","map","column_key","household","household_key","fetchProjectInformation","authToken","headers","fetchData","dataType","projectName","formID","projectID","generateDataDownloadLink","dataToDownload","dataDownloadLink","dataCSV","csv_lines","join","household_data","concat","generateCSV","Blob","window","URL","revokeObjectURL","createObjectURL","dataDownloadButton","csvsAvailable","download","dropDownTitle","titleType","filterButtons","projectInformationAvailable","projectInformation","setProjectName","setFormID","setDataType","projectNames","project","name","formIDs","filter","forms","DropdownButton","onSelect","e","Dropdown","Item","eventKey","projectInformationButton","setProjectInformation","setProjectInformationAvailable","newProjectInfo","fetchDataButton","setDataDownloadLink","setData","setcsvAvailable","newData","processData","formName","generateData","numberOfResponses","processDataButton","generateDataButton","DataQueryComponent","RegistrationCard","setTitle","confirmPassword","setConfirmPassword","confirmEmail","setConfirmEmail","firstName","setfirstName","surname","setSurname","captchaToken","setCaptchaToken","passwordsMatch","bothPasswordsEntered","emailsMatch","bothEmailsEntered","registrationEnabled","Row","Col","xs","Select","defaultValue","disabled","Text","sitekey","RegisterUser","registrationResult","RegisterComponent","PortalDataAll","label","text","icon","RiSurveyFill","link","external","MdOutlineDashboardCustomize","FiDatabase","MdHelpOutline","MdOutlineCreate","FetchProjectInformation","PortalCard","Icon","color","action","class","margin","padding","border","backgroundColor","RenderPortalCards","portalCardData","userData","basic","cardToAdd","item","dataCollector","projectManager","analyst","administrator","researcher","PortalItem","PortalComponent","setUserData","setUserInfoAvail","newUserData","UserContext","FetchUserInformation","getSubmissionCount","result","JSON","parse","stringify","setUserInfo","CheckForLocalToken","timeDifference","GetFormInformation","setFormData","alert","GetInformationForFormComponent","NoProjectFound","colSpan","RenderProjectInformation","projects","index","dateString","createdAt","toDateString","description","ProjectManagementComponent","adminData","setAdminData","filters","setFilters","setProjectSelected","setFormSelected","newFilters","BackButton","NoInfoFound","FormTables","allowToFinalize","user","roles","includes","projectSelected","formsExist","form","date","d","month","getMonth","day","getDate","year","getFullYear","formatDate","accessData","draft","submissions","submissionsLoading","menuVariant","drop","RenderProjectAdmin","FormManagementComponent","useParams","setSubmissionLoading","formSelected","GetUserInfo","display","GetAdminData","setShowProjectManagement","setShowAdmin","setShowCollectData","MainNavbar","show","setShow","handleClose","handleShow","showAdmin","showProjectManagement","Navbar","fixed","bg","expand","Nav","Link","to","clear","Offcanvas","backdrop","placement","onHide","closeVariant","closeButton","Title","GetProjectInformation","CreateProject","projectDescription","projectCreationResponse","DeleteProject","CreateForm","formVersion","formFile","formCreationResponse","UpdateForm","CreateProjectForm","setNewProjectName","rows","setNewProjectDescription","newProjectName","newProjectDescription","NewFormEntry","projectList","setSelectedProject","option","setNewFormName","setNewFormVersion","setSelectedFile","files","selectedProject","newFormName","newFormVersion","selectedFile","NewDraftFormEntry","formList","setFormList","projectDisabled","setSelectedDraftProject","newFormList","setNewDraftFormName","setNewDraftFormVersion","setSelectedDraftFile","selectedDraftProject","newDraftFormName","newDraftFormVersion","selectedDraftFile","FinalizeFormEntry","FinalizeForm","params","form_name","project_name","AddAdministrator","Authorization","newAdmin","FormCreationComponent","setNewAdmin","Accordion","defaultActiveKey","md","ProcessData","commandType","CardBody","formState","encoded_settings","DataCollectionComponent","renderODKFormCode","projectManagerOfForm","dataAnalystOfForm","odkConf","users","initialState","setInitialState","FetchUserInfo","new_form_state","CheckFormCode","CheckProjectManager","draftCollectionDetails","collectionDetails","CheckODKConf","deflateSync","toString","CheckEncodedSettings","CheckDraft","FetchData","unit","RenderConversionTable","unitsData","survey_value","id_rhomis_dataset","conversion","changing_units","findIndex","elem","unit_type","update","setUnitsData","UpdateUnitsData","SubmitUnitsData","unitType","unitsSelect","process_label","ShowUnitsForm","setUnitsSelect","unitsDownloadLink","setUnitsDownloadLink","submitAllUnits","setSubmitAllUnits","pricesNames","formLabel","newUnitsData","units_download_link","formData","units","formType","priceName","controlId","Check","checkBoxLabel","processLabel","userInfo","submissionLabel","RenderUnitsForm","RenderPriceAndCalorieConversions","RenderFinalOutputs","rhomisDataSelect","setRHoMISSelect","rhomisData","setRHoMISData","newRHoMISData","rhomis_download_link","dataSets","dataSet","RenderDataCard","showUnits","showPrices","showOutputs","height","CheckFormData","unitsExtracted","setShowUnits","pricesCalculated","setShowPrices","finalIndicators","setShowOutputs","DataAccessComponent","CheckAndUpdateFormInformation","BuildRequest","userType","AddFormUser","request","UserForm","projectManagerEmail","setProjectManagerEmail","setUserType","UserManagementComponent","setProjectManagerOfForm","RoutingComponent","RedirectComponents","exact","path","from","component","App","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qjBA6BeA,G,OAFKC,2B,eCXpB,SAASC,EAAiBC,GACtB,OAAoB,OAAhBA,EAAMC,MACU,KAAhBD,EAAMC,OACNC,QAAMC,gBAAgB,CAClBC,MAAO,aACPC,QAAS,qBACTC,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACLC,SAAU,QAGX,KAEY,OAAnBZ,EAAMa,SACa,KAAnBb,EAAMa,YACNX,QAAMC,gBAAgB,CAClBC,MAAO,aACPC,QAAS,gBACTC,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACLC,SAAU,QAGX,GAMf,SAASE,EAAUd,GACf,MAAkCe,qBAAWlB,GAA7C,mBAAkBmB,GAAlB,WAEMC,EAAUC,cAEhB,EAA0BC,mBAAS,IAAnC,mBAAOlB,EAAP,KAAcmB,EAAd,KACA,EAAgCD,mBAAS,IAAzC,mBAAON,EAAP,KAAiBQ,EAAjB,KAEA,EAAwCF,mBAAS,IAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KACA,EAA8BJ,mBAAS,IAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KA4BA,OAzBAC,qBAAU,WACN,IAAMC,EAAaC,aAAaC,QAAQ,aACxCC,QAAQC,IAAI,eACZD,QAAQC,IAAIJ,GAEZ,IAAMK,EAAc,IAAIC,KAClBC,EAAyB,IAAID,KAAKL,aAAaC,QAAQ,cAU7D,GATAC,QAAQC,IAAI,gBACZD,QAAQC,IAAIC,GACZF,QAAQC,IAAI,cACZD,QAAQC,IAAIG,GAEZJ,QAAQC,IAAI,cACZD,QAAQC,IAAIC,EAAYG,UAAYD,EAAuBC,WAEpCH,EAAYG,UAAYD,EAAuBC,UACjD,KAGjB,OAFAnB,EAAaW,QACbV,EAAQmB,KAAK,OAGlB,IAKC,eAACC,EAAA,EAAD,CAAMC,UAAU,iCAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,qBAAvB,SACI,yCAGJ,eAACD,EAAA,EAAKG,KAAN,WACI,qBAAKF,UAAU,iBAAf,SACI,cAAC,IAAD,CAAcG,KAAM,OAExB,eAACC,EAAA,EAAD,CAAMC,MAAO,CAAE,WAAc,MAAO,YAAe,OAAnD,UACI,eAACD,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,QAApB,mBACA,cAACJ,EAAA,EAAKK,QAAN,CAAcC,GAAG,QAAQ1C,KAAK,OAAO2C,SAAU,SAACC,GAAD,OAAW9B,EAAS8B,EAAMC,OAAOC,aAEpF,eAACV,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,WAApB,sBACA,cAACJ,EAAA,EAAKK,QAAN,CAAczC,KAAK,WAAW2C,SAAU,SAACC,GAAD,OAAW7B,EAAY6B,EAAMC,OAAOC,aAE/E9B,EAAe,mBAAGgB,UAAU,UAAb,SAAwBhB,IAAoB,KAC5D,qBAAKgB,UAAU,mBAAf,SACKd,EAAU,eAAC6B,EAAA,EAAD,CAAQf,UAAU,gBAAgBgB,QAAQ,OAA1C,UACP,cAACC,EAAA,EAAD,CACIC,GAAG,OACHC,UAAU,SACVhB,KAAK,KACLiB,KAAK,SACL,cAAY,SANT,aASP,cAACL,EAAA,EAAD,CAAQf,UAAU,gBACdhC,KAAK,SACLgD,QAAQ,OACRK,QAAO,uCAAE,WAAOT,GAAP,iBAAAU,EAAA,6DACLnC,GAAW,GADN,SAGuBoC,EAAM,CAC9BX,MAAOA,EACPjD,MAAOA,EACPY,SAAUA,EACVS,aAAcA,EACdC,gBAAiBA,IARhB,UAGCuC,EAHD,OAaLrC,GAAW,GAEkB,MAAzBqC,EAAcC,OAfb,uBAgBD9C,EAAQmB,KAAK,UAhBZ,0BAoBwB,MAAzB0B,EAAcC,SAEd/C,EAAa8C,EAAcE,MAC3BpC,aAAaqC,QAAQ,YAAaH,EAAcE,MAC1CE,EAAY,IAAIjC,KACtBL,aAAaqC,QAAQ,YAAaC,GAClCjD,EAAQmB,KAAK,MA1BZ,2CAAF,sDAHX,qBAqCR,sBAAKO,MAAO,CAAEwB,UAAW,SAAUC,MAAO,QAA1C,uCAEI,mBAAGC,KAAK,cAAR,wBAFJ,gC,SAgBLR,E,8EAAf,WAAqB7D,GAArB,eAAA4D,EAAA,yDACI5D,EAAMkD,MAAMoB,iBACZtE,EAAMuB,gBAAgB,MAKE,GAFCxB,EAAiB,CAAEE,MAAOD,EAAMC,MAAOY,SAAUb,EAAMa,WALpF,yCAQgB,CACJkD,OAAQ,IACR1D,QAAS,wBAVrB,gCAmB+BkE,IAAM,CACzBC,OAAQ,OACRC,IAAKC,2CACLV,KAAM,CACF/D,MAAOD,EAAMC,MACbY,SAAUb,EAAMa,YAxBhC,cAmBc8D,EAnBd,OA2BQ7C,QAAQC,IAAI4C,GA3BpB,kBA4BgBA,GA5BhB,yCA8BQzE,QAAMC,gBAAgB,CAClBC,MAAO,QACPC,QAAS,KAAIsE,SAASX,KACtB1D,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACLC,SAAU,OAvC1B,kBA2CgB,KAAI+D,UA3CpB,2D,sBAkDA,SAASC,EAAe5E,GACpB,MAAwBmB,oBAAS,GAAjC,mBAAO0D,EAAP,KAAaC,EAAb,KAMA,OAJApD,qBAAU,WACNoD,GAAQ,KACT,IAGC,cAACC,EAAA,EAAD,CAAMC,GAAIH,EAAV,SAEI,qBAAKvC,UAAU,wBAAf,SACI,cAACxB,EAAD,Q,sCCjOhB,SAASmE,EAAYjB,GAEjB,GAAa,OAATA,EACA,OAAQ,+CAGZ,QAAoBkB,IAAhBlB,EAAKmB,OACL,OAAQ,+CAKZ,GAAa,OAATnB,EAAe,CAKf,IAJA,IAAIoB,EAAgBpB,EAAKqB,MAAM,EAAG,GAC9BC,EAAe,GAGVC,EAAkB,EAAGA,EAAkBH,EAAcD,OAAQI,IAIlE,IAFA,IAAIC,EAAyBC,OAAOC,KAAKN,EAAcG,IAE9CI,EAAe,EAAGA,EAAeH,EAAuBL,OAAQQ,IAAgB,CAErF,IAAIC,EAAaJ,EAAuBG,GAExC,IAAKL,EAAaO,MAAK,SAAAC,GAAM,OAAIA,IAAWF,OAEhB,IAApBL,GACAD,EAAaS,OAAOJ,EAAc,EAAGC,GAGrCL,EAAkB,GAGlB,QAAkDL,KAA7CM,EAAuBG,EAAe,GAAkB,CACzD,IAAIK,EAAgCV,EAAaW,QAAQT,EAAuBG,EAAe,IAC/FL,EAAaS,OAAOC,EAAgC,EAAG,EAAGJ,QAG1DN,EAAaS,OAAOJ,EAAe,EAAG,EAAGC,GAO7D,OACI,mCACI,eAACM,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAAC5D,KAAK,KAAKa,QAAQ,OAAOgD,YAAU,EAAjE,UAEI,gCACI,6BACKhB,EAAaiB,KAAI,SAACT,EAAQU,GACvB,OAAQ,6BAAwCV,GAA/B,gBAAkBU,OAFnC,WAOZ,gCACKpB,EAAcmB,KAAI,SAACE,EAAWC,GAC3B,OAAQ,6BACHpB,EAAaiB,KAAI,SAACT,EAAQU,GACvB,OAAQ,6BAAgGC,EAAUX,IAAjG,OAASY,EAAgB,UAAYF,EAArC,cAAuEE,OAF/E,OAASA,c,SAmGvCC,E,8EAAf,WAAuCC,GAAvC,eAAAhD,EAAA,sEAG2BW,IAAM,CACzBC,OAAQ,MACRC,IAAKC,mDACLmC,QAAS,CACL,cAAiBD,KAP7B,cAGUjC,EAHV,yBAWYA,EAASX,MAXrB,4C,+BAee8C,E,oFAAf,WAAyBC,EAAUC,EAAaC,EAAQL,GAAxD,iBAAAhD,EAAA,sEAI2BW,IAAM,CACzBC,OAAQ,OACRC,IAAKC,oCACLV,KAAM,CACF+C,SAAUA,EACVG,UAAWF,EACXC,OAAQA,GAEZJ,QAAS,CACL,cAAiBD,KAb7B,UAIUjC,EAJV,OAoBiB,QADTX,EAAOW,EAASX,MAnBxB,yCAqBe,MArBf,gCAuBgBA,GAvBhB,4C,sBA4BA,SAASmD,EAAyBC,EAAgBC,GAG9C,IAAMC,EAnIV,SAAqBtD,GAEjB,GAAa,OAATA,QAKgBkB,IAAhBlB,EAAKmB,OAAT,CAgBA,IAXA,IAAIoC,EAAY,GAGZnC,EAAgBpB,EAKhBsB,EAAe,GAGVC,EAAkB,EAAGA,EAAkBH,EAAcD,OAAQI,IAIlE,IAFA,IAAIC,EAAyBC,OAAOC,KAAKN,EAAcG,IAE9CI,EAAe,EAAGA,EAAeH,EAAuBL,OAAQQ,IAAgB,CAErF,IAAIC,EAAaJ,EAAuBG,GAExC,IAAKL,EAAaO,MAAK,SAAAC,GAAM,OAAIA,IAAWF,OAGhB,IAApBL,GACAD,EAAaS,OAAOJ,EAAc,EAAGC,GAGrCL,EAAkB,GAElB,QAAkDL,KAA7CM,EAAuBG,EAAe,GAAkB,CAGzD,IAAIK,EAAgCV,EAAaW,QAAQT,EAAuBG,EAAe,IAE/FL,EAAaS,OAAOC,EAAgC,EAAG,EAAGJ,QAK1DN,EAAaS,OAAOJ,EAAe,EAAG,EAAGC,GAU7D2B,EAAUnF,KAAKkD,EAAakC,KAAK,OAGjC,IAAIC,EAAiBrC,EAAcmB,KAAI,SAACE,GAWpC,OAVsBnB,EAAaiB,KAAI,SAACT,GACpC,OAA0B,OAAtBW,EAAUX,GACHW,EAAUX,GAEV,MAKqB0B,KAAK,SAQ7C,OAJAD,EAAYA,EAAUG,OAAOD,IAGFD,KAAK,OAmDhBG,CAAYP,GAEtBpD,EAAO,IAAI4D,KAAK,CAACN,GAAU,CAAEhH,KAAM,eAOzC,MAJyB,KAArB+G,GACAQ,OAAOC,IAAIC,gBAAgBV,GAGvBQ,OAAOC,IAAIE,gBAAgBhE,GAIvC,SAASiE,EAAmBZ,EAAkBa,EAAenB,EAAUC,EAAaC,GAChF,GAAIiB,EACA,OAAQ,qBAAK5F,UAAU,uBAAf,SACJ,mBAEI6F,SAAUnB,EAAc,IAAMC,EAAS,IAAMF,EAAnCC,QAEV3C,KAAMgD,EAJV,SAMI,cAAChE,EAAA,EAAD,CAAQf,UAAU,aAAlB,sCAShB,SAAS8F,EAAcC,EAAWjF,GAC9B,OAAc,OAAVA,EACQiF,EAEJjF,EAKZ,SAASkF,EAAcC,EAA6BC,EAAoBxB,EAAayB,EAAgBxB,EAAQyB,EAAW3B,EAAU4B,GAC9H,GAAIJ,EAA6B,CAG7B,IAAMK,EAAeJ,EAAmBjC,KAAI,SAAAsC,GAAO,OAAIA,EAAQC,QAGzDC,EAAU,GAEhB,GAAoB,OAAhB/B,EAAsB,CACtB,IAAM6B,EAAUL,EAAmBQ,QAAO,SAAAH,GAAO,OAAIA,EAAQC,OAAS9B,KAEtD,OAAZ6B,GACAE,EAAQ3G,KAAKyG,EAAQ,GAAGI,OAKhC,OACI,mCACI,eAAC5G,EAAA,EAAKG,KAAN,WACI,8TACA,8BACI,sBAAKF,UAAU,aAAf,UAEI,cAAC4G,EAAA,EAAD,CAAgB5G,UAAU,gBAAgB6G,SAAU,SAACC,GAAD,OAAOX,EAAeW,IAAIhJ,MAAOgI,EAAc,eAAgBpB,GAAnH,SACK4B,EAAarC,KAAI,SAACS,GACf,OAAQ,cAACqC,EAAA,EAASC,KAAV,CAAiCC,SAAUvC,EAA3C,SAAyDA,GAArCA,QAKpC,cAACkC,EAAA,EAAD,CAAgB5G,UAAU,gBAAgB6G,SAAU,SAACC,GAAD,OAAOV,EAAUU,IAAIhJ,MAAOgI,EAAc,UAAWnB,GAAzG,SAIQ8B,EAAQxC,KAAI,SAACU,GAET,OAAQ,cAACoC,EAAA,EAASC,KAAV,CAA4BC,SAAUtC,EAAtC,SAA+CA,GAA3BA,QAKxC,eAACiC,EAAA,EAAD,CAAgB5G,UAAU,gBAAgB6G,SAAU,SAACC,GAAD,OAAOT,EAAYS,IAAIhJ,MAAOgI,EAAc,sBAAuBrB,GAAvH,UACI,cAACsC,EAAA,EAASC,KAAV,CAAeC,SAAS,gBAAxB,0BACA,cAACF,EAAA,EAASC,KAAV,CAAeC,SAAS,gBAAxB,4BACA,cAACF,EAAA,EAASC,KAAV,CAAeC,SAAS,WAAxB,uBACA,cAACF,EAAA,EAASC,KAAV,CAAeC,SAAS,WAAxB,uBACA,cAACF,EAAA,EAASC,KAAV,CAAeC,SAAS,gBAAxB,0CAYhC,SAASC,EAAyBhB,EAAoBiB,EAAuBlB,EAA6BmB,EAAgC9C,GAEtI,IAAK2B,EACD,OACI,gCACI,cAAClG,EAAA,EAAKG,KAAN,UAEI,4KAGJ,qBAAKF,UAAU,uBAAf,SAEI,cAACe,EAAA,EAAD,CAAQ,cAAY,qBAAqBf,UAAU,aAAaqB,QAAO,sBAAE,4BAAAC,EAAA,sEACxC+C,EAAwBC,GADgB,YAG9C1B,KAFjByE,EAD+D,UAIjEF,EAAsBE,GACtBD,GAA+B,IALkC,2CAAzE,0CAepB,SAASE,EAAgBrB,EAA6BxB,EAAUC,EAAaC,EAAQI,EAAkBwC,EAAqBC,EAASC,EAAiBnD,GAClJ,GAAI2B,EACA,OACI,qBAAKjG,UAAU,uBAAf,SACI,cAAEe,EAAA,EAAF,CAASf,UAAU,aAAaqB,QAAO,sBAAE,4BAAAC,EAAA,sEACfkD,EAAUC,EAAUC,EAAaC,EAAQL,GAD1B,OAC/BoD,EAD+B,OAErCH,EAAoB1C,EAAyB6C,EAAS3C,IACtDyC,EAAQE,GACRD,GAAgB,GAJqB,2CAAzC,0B,SAYDE,E,kFAAf,WAA2BjD,EAAaC,EAAQL,GAAhD,eAAAhD,EAAA,sEAC2BW,IAAM,CACzBC,OAAQ,OACRC,IAAKC,4CACLV,KAAM,CACFgD,YAAaA,EACbkD,SAAUjD,GAEdJ,QAAS,CACL,cAAiBD,KAT7B,cACUjC,EADV,yBAaYA,GAbZ,4C,+BAiBewF,E,kFAAf,WAA4BnD,EAAaC,EAAQL,GAAjD,eAAAhD,EAAA,sEAC2BW,IAAM,CACzBC,OAAQ,OACRC,IAAKC,6CACLV,KAAM,CACFgD,YAAaA,EACbkD,SAAUjD,EACVmD,kBAAmB,IAGvBvD,QAAS,CACL,cAAiBD,KAX7B,cACUjC,EADV,yBAeYA,GAfZ,4C,sBAmBA,SAAS0F,EAAkB9B,EAA6BvB,EAAaC,EAAQL,GACzE,GAAI2B,EACA,OACI,qBAAKjG,UAAU,uBAAf,SACI,cAAEe,EAAA,EAAF,CAASf,UAAU,aAAaqB,QAAO,sBAAE,sBAAAC,EAAA,sEAEDqG,EAAYjD,EAAaC,EAAQL,GAFhC,yDAAzC,4BAWhB,SAAS0D,EAAmB/B,EAA6BvB,EAAaC,EAAQL,GAC1E,GAAI2B,EACA,OACI,qBAAKjG,UAAU,uBAAf,SACI,cAAEe,EAAA,EAAF,CAASf,UAAU,aAAaqB,QAAO,sBAAE,sBAAAC,EAAA,sEAEDuG,EAAanD,EAAaC,EAAQL,GAFjC,yDAAzC,6BAYhB,SAAS2D,EAAmBvK,GAExB,MAAwCmB,mBAAS,MAAjD,mBAEA,GAFA,UAEkCJ,qBAAWlB,IAA7C,mBAAO+G,EAAP,KAGA,GAHA,KAGwBzF,mBAAS,OAAjC,mBAAO6C,EAAP,KAAa8F,EAAb,KAEA,EAAgD3I,mBAAS,IAAzD,mBAAOkG,EAAP,KAAyBwC,EAAzB,KAEA,EAAyC1I,oBAAS,GAAlD,mBAAO+G,EAAP,KAAsB6B,EAAtB,KAEA,EAAsE5I,oBAAS,GAA/E,mBAAOoH,EAAP,KAAoCmB,EAApC,KAGA,EAAoDvI,mBAAS,IAA7D,mBAAOqH,EAAP,KAA2BiB,EAA3B,KAGA,EAAgCtI,mBAAS,MAAzC,mBAAO4F,EAAP,KAAiB4B,EAAjB,KACA,EAAsCxH,mBAAS,MAA/C,mBAAO6F,EAAP,KAAoByB,EAApB,KAEA,EAA4BtH,mBAAS,MAArC,mBAAO8F,EAAP,KAAeyB,EAAf,KAEA,OACI,sBAAK1F,GAAG,uBAAuBV,UAAU,qBAAzC,UAEI,oBAAIU,GAAG,mBAAP,sCACA,eAACX,EAAA,EAAD,WACI,cAACA,EAAA,EAAKE,OAAN,CAAaD,UAAU,qBAAvB,0BAECgG,EAAcC,EAA6BC,EAAoBxB,EAAayB,EAAgBxB,EAAQyB,EAAW3B,EAAU4B,GACzHa,EAAyBhB,EAAoBiB,EAAuBlB,EAA6BmB,EAAgC9C,GACjI0D,EAAmB/B,EAA6BvB,EAAaC,EAAQL,GACrEyD,EAAkB9B,EAA6BvB,EAAaC,EAAQL,GACpEgD,EAAgBrB,EAA6BxB,EAAUC,EAAaC,EAAQI,EAAkBwC,EAAqBC,EAASC,EAAiBnD,MASjJ3B,EAAYjB,GACZiE,EAAmBZ,EAAkBa,EAAenB,EAAUC,EAAaC,M,0DClbxF,SAASlH,GAAiBC,GACtB,OAAoB,OAAhBA,EAAMC,OACND,EAAMuB,gBAAgB,mBACf,GAEY,OAAnBvB,EAAMa,WACNb,EAAMuB,gBAAgB,sBACf,GAMf,SAASiJ,GAAiBxK,GAItB8B,QAAQC,IAAI/B,GAEZ,MAA0BmB,mBAAS,IAAnC,mBAAOf,EAAP,KAAcqK,EAAd,KAEA,EAAgCtJ,mBAAS,IAAzC,mBAAON,EAAP,KAAiBQ,EAAjB,KACA,EAA8CF,mBAAS,IAAvD,mBAAOuJ,EAAP,KAAwBC,EAAxB,KAEA,EAA0BxJ,mBAAS,IAAnC,mBAAOlB,EAAP,KAAcmB,EAAd,KACA,EAAwCD,mBAAS,IAAjD,mBAAOyJ,EAAP,KAAqBC,EAArB,KAEA,EAAkC1J,mBAAS,IAA3C,mBAAO2J,EAAP,KAAkBC,EAAlB,KACA,EAA8B5J,mBAAS,IAAvC,mBAAO6J,EAAP,KAAgBC,EAAhB,KAIA,EAA8B9J,oBAAS,GAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAAwCN,mBAAS,MAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KAEA,EAAwCJ,mBAAS,MAAjD,mBAAO+J,EAAP,KAAqBC,GAArB,KAEMlK,GAAUC,cAEZkK,GAAiBvK,IAAa6J,EAC9BW,GAAwBxK,EAASsE,OAAS,GAAKuF,EAAgBvF,OAAS,EAExEmG,GAAcrL,IAAU2K,EACxBW,GAAqBtL,EAAMkF,OAAS,GAAKyF,EAAazF,OAAS,EAE/DqG,IAAsB,EA4B1B,OA1BA1J,QAAQC,IAAIqJ,IACZtJ,QAAQC,IAAIsJ,IACZvJ,QAAQC,IAAIuJ,IACZxJ,QAAQC,IAAIwJ,IACZzJ,QAAQC,IAAI3B,EAAM+E,OAAS,GAC3BrD,QAAQC,IAAI+I,EAAU3F,OAAS,GAC/BrD,QAAQC,IAAIiJ,EAAQ7F,OAAS,GAC7BrD,QAAQC,IAAIuJ,IACZxJ,QAAQC,IAAIwJ,IACZzJ,QAAQC,IAAI3B,EAAM+E,OAAS,GAC3BrD,QAAQC,IAAI+I,EAAU3F,OAAS,GAC/BrD,QAAQC,IAAIiJ,EAAQ7F,OAAS,GAC7BrD,QAAQC,IAAImJ,GAGRE,IACAC,IACAC,IACAC,IACAnL,EAAM+E,OAAS,GACf2F,EAAU3F,OAAS,GACnB6F,EAAQ7F,OAAS,GACjB+F,IACAM,IAAsB,GAItB,eAACnJ,EAAA,EAAD,CAAMC,UAAU,wCAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,qBAAvB,SACI,0CAEJ,cAACD,EAAA,EAAKG,KAAN,UAII,eAACE,EAAA,EAAD,CAAMC,MAAO,CAAE,WAAc,MAAO,YAAe,OAAnD,UACI,eAAC8I,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,eAACjJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,QAApB,mBACA,eAACJ,EAAA,EAAKkJ,OAAN,CAAa5I,GAAG,QAAQ6I,aAAa,SAAS5I,SAAU,SAACC,GAAD,OAAWuH,EAASvH,EAAMC,OAAOC,QAAzF,UACI,wBAAQ0I,SAAS,OAAjB,oBACA,wBAAQ1I,MAAM,KAAd,gBACA,wBAAQA,MAAM,QAAd,kBACA,wBAAQA,MAAM,MAAd,iBACA,wBAAQA,MAAM,KAAd,gBACA,wBAAQA,MAAM,KAAd,gBACA,wBAAQA,MAAM,KAAd,wBAIZ,cAACsI,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,eAACjJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,OAApB,wBACA,cAACJ,EAAA,EAAKK,QAAN,CAAcC,GAAG,OAAO1C,KAAK,OAAO2C,SAAU,SAACC,GAAD,OAAW6H,EAAa7H,EAAMC,OAAOC,eAG3F,cAACsI,EAAA,EAAD,CAAKC,GAAI,EAAT,SACI,eAACjJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,UAApB,qBACA,cAACJ,EAAA,EAAKK,QAAN,CAAcC,GAAG,UAAU1C,KAAK,OAAO2C,SAAU,SAACC,GAAD,OAAW+H,EAAW/H,EAAMC,OAAOC,kBAKhG,eAACqI,EAAA,EAAD,WACI,cAACC,EAAA,EAAD,UACI,eAAChJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,QAApB,mBACA,cAACJ,EAAA,EAAKK,QAAN,CAAcC,GAAG,QAAQ1C,KAAK,OAAO2C,SAAU,SAACC,GAAD,OAAW9B,EAAS8B,EAAMC,OAAOC,eAIxF,eAACsI,EAAA,EAAD,WACI,eAAChJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,QAApB,2BACA,cAACJ,EAAA,EAAKK,QAAN,CAAcC,GAAG,eAAe1C,KAAK,OAAO2C,SAAU,SAACC,GAAD,OAAW2H,EAAgB3H,EAAMC,OAAOC,aAEjGmI,GACG,cAAC7I,EAAA,EAAKqJ,KAAN,CAAWpJ,MAAO,CAAE,UAAa,OAAjC,SAA2C2I,GAAc,eAAiB,uBAC1E,mCAGZ,eAACG,EAAA,EAAD,WACI,eAACC,EAAA,EAAD,WAEI,eAAChJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,WAApB,sBACA,cAACJ,EAAA,EAAKK,QAAN,CAAczC,KAAK,WAAW2C,SAAU,SAACC,GACrC7B,EAAY6B,EAAMC,OAAOC,aAKjC,cAAC,IAAD,CAAqBvC,SAAUA,OAEnC,cAAC6K,EAAA,EAAD,UACI,eAAChJ,EAAA,EAAKE,MAAN,CAAYN,UAAU,oBAAtB,UACI,cAACI,EAAA,EAAKG,MAAN,CAAYC,QAAQ,WAApB,8BACA,cAACJ,EAAA,EAAKK,QAAN,CAAczC,KAAK,WAAW2C,SAAU,SAACC,GACrCyH,EAAmBzH,EAAMC,OAAOC,UAEnCiI,GACG,cAAC3I,EAAA,EAAKqJ,KAAN,CAAWpJ,MAAO,CAAE,UAAa,OAAjC,SAA2CyI,GAAiB,kBAAoB,0BAChF,qCAMf9J,EAAe,mBAAGgB,UAAU,UAAb,SAAwBhB,IAAoB,KAC5D,qBAAKgB,UAAU,iBAAf,SAEI,cAAC,IAAD,CACI0J,QAAStH,2CACTzB,SAAQ,uCAAE,WAAOG,GAAP,SAAAQ,EAAA,sDACNuH,GAAgB/H,GADV,2CAAF,0DAMhB,qBAAKd,UAAU,mBAAf,SACKd,EAAU,eAAC6B,EAAA,EAAD,CAAQf,UAAU,gBAAgBgB,QAAQ,OAA1C,UACP,cAACC,EAAA,EAAD,CACIC,GAAG,OACHC,UAAU,SACVhB,KAAK,KACLiB,KAAK,SACL,cAAY,SANT,gBAQe,cAACL,EAAA,EAAD,CAAQyI,SAAUN,GAAqBlJ,UAAU,gBAAgBgB,QAAQ,OAAOK,QAAO,uCAAE,WAAOT,GAAP,eAAAU,EAAA,6DAC3GnC,GAAW,GADgG,SAG1EwK,GAAa,CAC1C/I,MAAOA,EACP9C,MAAOA,EACP0K,UAAWA,EACXE,QAASA,EACT/K,MAAOA,EACPY,SAAUA,EACVqK,aAAcA,EACd5J,aAAcA,EACdC,gBAAiBA,IAZsF,OAGrG2K,EAHqG,OAc3GzK,GAAW,IAEPyK,EAAmBnI,OAAS,KAAOmI,EAAmBnI,OAAS,MAC/D9C,GAAQmB,KAAK,YAIjBN,QAAQC,IAAI,sBACZD,QAAQC,IAAImK,GAtB+F,2CAAF,sDAAvF,wBA2B9B,sBAAKvJ,MAAO,CAAEwB,UAAW,SAAUC,MAAO,QAA1C,wCAEI,mBAAGC,KAAK,WAAR,wBAFJ,wB,SAaL4H,G,iFAAf,WAA4BjM,GAA5B,eAAA4D,EAAA,6DAEI5D,EAAMkD,MAAMoB,iBACZtE,EAAMuB,gBAAgB,MAKGxB,GAAiB,CACtCK,MAAOJ,EAAMI,MACb0K,UAAW9K,EAAM8K,UACjBE,QAAShL,EAAMgL,QACf/K,MAAOD,EAAMC,MACbY,SAAUb,EAAMa,SAChBS,aAActB,EAAMsB,aACpBC,gBAAiBvB,EAAMuB,gBACvB2J,aAAclL,EAAMkL,eAhB5B,kBAsB+B3G,IAAM,CACzBC,OAAQ,OACRC,IAAKC,8CACLV,KAAM,CAEF5D,MAAOJ,EAAMI,MACb0K,UAAW9K,EAAM8K,UACjBE,QAAShL,EAAMgL,QACf/K,MAAOD,EAAMC,MACbY,SAAUb,EAAMa,SAChBqK,aAAclL,EAAMkL,gBAhCpC,cAsBcvG,EAtBd,OAoCQ7C,QAAQC,IAAI4C,GApCpB,kBAqCgBA,GArChB,yCAwCQ7C,QAAQC,IAAR,MACA/B,EAAMuB,gBAAgB,KAAIoD,SAASX,MAzC3C,kBA0CgB,KAAIW,UA1CpB,2D,sBA+CA,SAASwH,GAAkBnM,GACvB,MAAwBmB,oBAAS,GAAjC,mBAAO0D,EAAP,KAAaC,EAAb,KAMA,OAJApD,qBAAU,WACNoD,GAAQ,KACT,IAGC,cAACC,EAAA,EAAD,CAAMC,GAAIH,EAAV,SAEI,qBAAKvC,UAAU,wBAAf,SACI,cAACkI,GAAD,Q,0CChSH4B,GAAgB,CACzB,CACItD,KAAM,iBACNuD,MAAO,gBACPC,KAAM,oFACNC,KAAMC,KACNC,KAAM/H,mDACNgI,UAAU,GAEd,CACI5D,KAAM,2BACNuD,MAAO,iBACPC,KAAM,0EACNC,KAAMI,KACNF,KAAM,YACNC,UAAU,GAcd,CACI5D,KAAM,iBACNuD,MAAO,aACPC,KAAM,uEACNC,KAAMK,KACNH,KAAM,kFACNC,UAAU,GAId,CACI5D,KAAM,OACNuD,MAAO,OACPC,KAAM,8EACNC,KAAMM,KACNJ,KAAM,8FACNC,UAAU,GAEd,CACI5D,KAAM,iBACNuD,MAAO,gBACPC,KAAM,wDACNC,KAAMO,KACNL,KAAM,kBACNC,UAAU,I,gBCxCHK,G,iFAAf,WAAuCnG,GAAvC,eAAAhD,EAAA,sEAG2BW,IAAM,CACzBC,OAAQ,MACRC,IAAKC,sCACLmC,QAAS,CACL,cAAiBD,KAP7B,cAGUjC,EAHV,OAUI7C,QAAQC,IAAI4C,EAASX,MAVzB,kBAYYW,EAASX,MAZrB,4C,sBAeA,SAASgJ,GAAWhN,GAChB,IAAMiN,EAAOjN,EAAMgE,KAAKuI,KAClBtL,EAAUC,cAIhB,OAA4B,IAAxBlB,EAAMgE,KAAK0I,SAEP,qBAAK/I,QAAS,WAAQ1C,EAAQmB,KAAKpC,EAAMgE,KAAKyI,OAA9C,SAEI,eAAEpK,EAAA,EAAF,CAAuCC,UAAU,gCAAjD,UACI,qBAAiDA,UAAU,+BAA3D,SACI,oBAA2CA,UAAU,qBAArD,SAA2EtC,EAAMgE,KAAK8E,MAA7E,eAAiB9I,EAAMgE,KAAK8E,OAD/B,oBAAsB9I,EAAMgE,KAAK8E,MAG3C,qBAA+CxG,UAAU,wBAAzD,SACI,cAAC2K,EAAD,CAAMxK,KAAM,IAAKyK,MAAM,WADjB,kBAAoBlN,EAAMgE,KAAK8E,QAJjC,QAAU9I,EAAMgE,KAAK8E,SAYjB,IAAxB9I,EAAMgE,KAAK0I,SAAyC,kBAArB1M,EAAMgE,KAAKqI,OAC1CvK,QAAQC,IAAI,cAEZD,QAAQC,IAAI/B,EAAM4G,WAEd,8BACI,uBAAMpC,OAAO,OAAO2I,OAAQnN,EAAMgE,KAAKyI,KAAMW,MAAM,SAAnD,UACI,uBAAO9M,KAAK,SAASwI,KAAK,QAAQ1F,MAAOpD,EAAM4G,YAC/C,uBAAOtG,KAAK,SAASwI,KAAK,eAAe1F,MAAM,0BAC/C,wBAAQ9C,KAAK,SAASqC,MAAO,CAAE0K,OAAQ,EAAGC,QAAS,EAAGC,OAAQ,EAAGC,gBAAiB,SAAlF,SAGI,eAAEnL,EAAA,EAAF,CAAuCC,UAAU,gCAAjD,UACI,qBAAiDA,UAAU,+BAA3D,SACI,oBAA2CA,UAAU,qBAArD,SAA2EtC,EAAMgE,KAAK8E,MAA7E,eAAiB9I,EAAMgE,KAAK8E,OAD/B,oBAAsB9I,EAAMgE,KAAK8E,MAG3C,qBAA+CxG,UAAU,wBAAzD,SACI,cAAC2K,EAAD,CAAMxK,KAAM,IAAKyK,MAAM,WADjB,kBAAoBlN,EAAMgE,KAAK8E,QAJjC,QAAU9I,EAAMgE,KAAK8E,eAiBzB,IAAxB9I,EAAMgE,KAAK0I,SAAyC,kBAArB1M,EAAMgE,KAAKqI,MAEtC,8BACI,mBAAG1J,MAAO,CAAE,eAAkB,QAAU0B,KAAMrE,EAAMgE,KAAKyI,KAAMtJ,OAAO,SAAtE,SACI,eAAEd,EAAA,EAAF,CAAOC,UAAU,gCAAjB,UACI,qBAAKA,UAAU,+BAAf,SACI,oBAAIA,UAAU,qBAAd,SAAoCtC,EAAMgE,KAAK8E,SAEnD,qBAAKxG,UAAU,wBAAf,SAEI,cAAC2K,EAAD,CAAMxK,KAAM,IAAKyK,MAAM,wBAV/C,EAqBJ,SAASO,GAAkBzN,GAEvB,IAAM0N,EAAiB,GAIvB,GAHA5L,QAAQC,IAAI/B,EAAMgE,KAAK,IACvBlC,QAAQC,IAAI/B,EAAM2N,UAEd3N,EAAM2N,SAAU,CAChB,IAA6B,IAAzB3N,EAAM2N,SAASC,MAAgB,CAC/B,IAAMC,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,kBAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,IAE3B,GAAI7N,EAAM2N,SAASI,cAAc5I,OAAS,EAAG,CACzC,IAAM0I,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,kBAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,IAG3B,GAAI7N,EAAM2N,SAASK,eAAe7I,OAAS,EAAInF,EAAM2N,SAASM,QAAQ9I,OAAS,EAAG,CAC9E,IAAM0I,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,mBAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,IAI3B,IAAqC,IAAjC7N,EAAM2N,SAASO,cAAwB,CACvC,IAAML,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,kBAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,IAI3B,GAAI7N,EAAM2N,SAASQ,WAAWhJ,OAAS,GACV,IAAzBnF,EAAM2N,SAASC,MAAgB,CAC/B,IAAMC,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,eAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,IAE3B,IAA6B,IAAzB7N,EAAM2N,SAASC,MAAgB,CAC/B,IAAMC,EAAY7N,EAAMgE,KAAKgF,QAAO,SAAA8E,GAAI,MAAmB,SAAfA,EAAKzB,SACjDqB,EAAetL,KAAf,MAAAsL,EAAc,aAASG,KAW/B,OANK7N,EAAM2N,UACPD,EAAetL,KAAKpC,EAAMgE,KAAK,IAM/B,mCACK0J,EAAenH,KAAI,SAAC6H,GACjB,OAAO,cAACpB,GAAD,CAAYhJ,KAAMoK,EAAYxH,UAAW5G,EAAM4G,iBAQvD,SAASyH,KAEpB,MAAgClN,mBAAS,MAAzC,mBAAOwM,EAAP,KAAiBW,EAAjB,KACA,EAAyCnN,oBAAS,GAAlD,mBAAqBoN,GAArB,WACA,EAAkCxN,qBAAWlB,GAA7C,mBAAO+G,EAAP,UASA,OAPAlF,oBAAS,sBAAC,4BAAAkC,EAAA,sEACoBmJ,GAAwBnG,GAD5C,OACA4H,EADA,OAGNF,EAAYE,GACZD,GAAiB,GAJX,2CAKP,IAGC,qBAAKjM,UAAU,qBAAf,SACI,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,qBAAvB,SACI,0CAEJ,cAACD,EAAA,EAAKG,KAAN,CAAWF,UAAU,iBAArB,SACI,cAACmL,GAAD,CAAmBzJ,KAAMoI,GAAeuB,SAAUA,EAAU/G,UAAWA,W,OCpL3F,IAEe6H,GAFK3O,0B,8DCdL4O,G,iFAAf,WAAoC1O,GAApC,qBAAA4D,EAAA,yDAGQ+K,GAAqB,EACrB3H,GAAc,GACe,IAA7BhH,EAAM2O,qBACNA,GAAqB,EACrB3H,EAAchH,EAAMgH,aAGxBlF,QAAQC,IAAI,yBACZD,QAAQC,IAAIiF,IAGRhH,EAAM4G,UAdd,0CAgB+BrC,IAAM,CACzBC,OAAQ,OACRC,IAAKC,2CACLV,KAAM,CACF2K,mBAAoBA,EACpB3H,YAAaA,GAGjBH,QAAS,CACL,cAAiB7G,EAAM4G,aAzBvC,OAgBcjC,EAhBd,OA4BQ7C,QAAQC,IAAI,aACZD,QAAQC,IAAI4C,EAASX,MACjB4K,EAASC,KAAKC,MAAMD,KAAKE,UAAUpK,EAASX,OAChDlC,QAAQC,IAAI6M,GACZ5O,EAAMgP,YAAYJ,GAhC1B,kDAkCQ9M,QAAQC,IAAR,MAlCR,2D,sBA6CA,SAASkN,GAAmBjP,GACxB,IAAM2B,EAAaC,aAAaC,QAAQ,aAExC,GADAC,QAAQC,IAAI,mBAAqBJ,IAC5BA,EAED,OADA3B,EAAMgB,aAAa,MACZ,KAGX,IAAMgB,EAAc,IAAIC,KAClBC,EAAyB,IAAID,KAAKL,aAAaC,QAAQ,cAE7DC,QAAQC,IAAI,cACZD,QAAQC,IAAIC,EAAYG,UAAYD,EAAuBC,WAE3D,IAAM+M,EAAiBlN,EAAYG,UAAYD,EAAuBC,UAItE,OAHI+M,EAAiB,MACjBlP,EAAMgB,aAAaW,GAEnBuN,EAAiB,MACjBlP,EAAMgB,aAAa,MACZ,MAGJW,E,SAIIwN,G,iFAAf,WAAkCnP,GAAlC,eAAA4D,EAAA,sEAEyBW,IAAM,CACvBC,OAAQ,OACRC,IAAKC,4CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3B5C,KAAM,CACFgD,YAAahH,EAAMgH,YACnBkD,SAAUlK,EAAMkK,YAV5B,OAe0B,OAbhB0E,EAFV,QAee7K,QAEP/D,EAAMoP,YAAYR,EAAO5K,MAEP,MAAlB4K,EAAO7K,QACPsL,MAAMT,EAAO5K,MApBrB,4C,+BAyBesL,G,iFAAf,WAA8CtP,GAA9C,eAAA4D,EAAA,6DAEI9B,QAAQC,IAAI,iBACZD,QAAQC,IAAI/B,GAHhB,SAI4BiP,GAAmB,CAAEjO,aAAchB,EAAMgB,eAJrE,cAIU4F,EAJV,gBAKU8H,GAAqB,CACvB9H,UAAWA,EACXoI,YAAahP,EAAMgP,cAP3B,uBAUUG,GAAmB,CACrBvI,UAAWA,EACXI,YAAahH,EAAMgH,YACnBkD,SAAUlK,EAAMkK,SAChBkF,YAAapP,EAAMoP,cAd3B,4C,sBCnFA,SAASG,KAEL,OACI,8BACI,eAACrJ,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAA7B,UACI,gCACI,+BAEI,6CAAQ,qBACR,4CAAQ,qBACR,2CAAQ,uBAJJ,gBADD,gBAUX,gCACI,6BACI,oBAAI1D,MAAO,CAAE,aAAc,UAAY6M,QAAS,EAAhD,wCAUxB,SAASC,GAAyBzP,GAE9B,IAAMiB,EAAUC,cAEhB,OADAY,QAAQC,IAAI/B,GACPA,EAAMgE,MAMNhE,EAAMgE,KAAK0L,SAKmB,IAA/B1P,EAAMgE,KAAK0L,SAASvK,OACZ,cAACoK,GAAD,SAIgBrK,IAAxBlF,EAAMgE,KAAK0L,SAEP,8BACI,eAACxJ,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAA7B,UACI,gCACI,+BACI,6CAAQ,qBACR,4CAAQ,qBACR,2CAAQ,qBACR,sBAAQ,uBAJJ,gBADD,gBAQX,gCACKrG,EAAMgE,KAAK0L,SAASnJ,KAAI,SAACsC,EAAS8G,GAC/B,IACIC,EADO,IAAI3N,KAAK4G,EAAQgH,WACNC,eACtB,OACI,+BAEI,oBAAInN,MAAO,CAAE,iBAAkB,UAA/B,SAAmFkG,EAAQC,MAA3C,aAAe6G,EAAQ,WACvE,oBAAIhN,MAAO,CAAE,iBAAkB,UAA/B,SAAmFkG,EAAQkH,aAA3C,aAAeJ,EAAQ,WACvE,oBAAIhN,MAAO,CAAE,iBAAkB,UAA/B,SAAmFiN,GAAnC,aAAeD,EAAQ,WACvE,oBAAIhN,MAAO,CAAE,iBAAkB,UAA/B,SACI,cAACU,EAAA,EAAD,CAAQf,UAAU,8BAA8BqB,QAAS,WACrD1C,EAAQmB,KAAK,aAAeyG,EAAQC,OADxC,qBAD4C,aAAe6G,EAAQ,aALlE,aAAeA,OALzB,wBAZ3B,EAfY,cAACJ,GAAD,IAiFD,SAASS,GAA2BhQ,GAE/C,IAAMiB,EAAUC,cAEhB,EAAkCH,qBAAWlB,GAA7C,mBAAO+G,EAAP,KAEA,GAFA,KAEkC7F,qBAAW0N,KAA7C,mBAAOwB,EAAP,KAAkBC,EAAlB,KAGA,EAA8B/O,mBAAS,IAAvC,mBAAOgP,EAAP,KAAgBC,EAAhB,KAEA,EAA0BjP,mBAAS,oBAAnC,mBAAOf,EAAP,KAAcqK,EAAd,KAIA,EAA8CtJ,oBAAS,GAAvD,mBAAwBkP,GAAxB,WACA,EAAwClP,oBAAS,GAAjD,mBAAqBmP,GAArB,WAWA,OATA5O,oBAAS,sBAAC,sBAAAkC,EAAA,6DACN9B,QAAQC,IAAI,kBADN,SAEA2M,GAAqB,CACvB9H,UAAWA,EACXoI,YAAakB,IAJX,2CAMP,IAIC,qBAAKlN,GAAG,+BAA+BV,UAAU,qBAAjD,SAEI,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SACI,sBAAKA,UAAU,6BAAf,UACI,6BAAKlC,IACL,sBAAKuC,MAAO,CAAE,QAAW,OAAQ,iBAAkB,MAAO,cAAe,QAAzE,UAEKwN,EAAUA,EAAQ5J,KAAI,SAACyC,GACpB,OAAO,qBAAK1G,UAAU,wBAAf,SAAwC0G,OAC9C,GAEJmH,EAAQhL,OAAS,EACd,cAAC9B,EAAA,EAAD,CAAQf,UAAU,mBAAmBqB,QAAS,YA3D9E,SAAoB3D,GAQhB,GAN6B,IAAzBA,EAAMmQ,QAAQhL,SACdnF,EAAMqQ,oBAAmB,GACzBrQ,EAAMoQ,WAAW,IACjBpQ,EAAMyK,SAAS,qBAGU,IAAzBzK,EAAMmQ,QAAQhL,OAAc,CAC5BnF,EAAMsQ,iBAAgB,GACtB,IAAMC,EAAavQ,EAAMmQ,QAAQ,GACjCnQ,EAAMoQ,WAAW,CAACG,IAClBvQ,EAAMyK,SAAS,kBAgDa+F,CAAW,CACPH,mBAAoBA,EACpBD,WAAYA,EACZD,QAASA,EACTG,gBAAiBA,EACjB7F,SAAUA,KANlB,SAUI,cAAC,KAAD,CAAoBhI,KAAM,OAE9B,cAACY,EAAA,EAAD,CAAQf,UAAU,mBAAmBqB,QAAS,WAC1C1C,EAAQmB,KAAK,MADjB,SAIE,cAAC,KAAD,CAAoBK,KAAM,eAO5C,cAACJ,EAAA,EAAKG,KAAN,CAAWF,UAAU,iBAArB,SACI,cAACmN,GAAD,CAA0BzL,KAAMiM,EAAWI,mBAAoBA,EAAoBF,QAASA,EAASC,WAAYA,EAAY3F,SAAUA,W,OC7G3J,SAASgG,KACP,OACE,eAACvK,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAA7B,UACE,gCACE,+BACE,2CACA,wCAEA,iDAGJ,gCACE,6BACE,oBAAImJ,QAAS,EAAb,oCAOV,SAASkB,GAAW1Q,GAClB,IAAMiB,EAAUC,cAEZyP,GAAkB,EACtB,IAAK3Q,EAAMgE,KACT,OAAO,cAACyM,GAAD,IAET,IAAKzQ,EAAMgE,KAAK4M,KACd,OAAO,cAACH,GAAD,IAET,IAAKzQ,EAAMgE,KAAK4M,KAAKC,MACnB,OAAO,cAACJ,GAAD,SAEoCvL,IAAzClF,EAAMgE,KAAK4M,KAAKC,MAAM7C,gBACpBhO,EAAMgE,KAAK4M,KAAKC,MAAM7C,eAAe8C,SAAS9Q,EAAM+Q,mBACtDJ,GAAkB,GAGtB,IAAIK,GAAa,OAEQ9L,IAArBlF,EAAMgE,KAAKiF,QACTjJ,EAAMgE,KAAKiF,MAAM9D,OAAS,IAI5B6L,EAHsBhR,EAAMgE,KAAKiF,MAAMD,QACrC,SAACiI,GAAD,OAAUA,EAAKpI,UAAY7I,EAAM+Q,mBAEN5L,OAAS,IAI1C,OACE,eAACe,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAA7B,UAEE,gCACE,+BACE,2CACA,wCAEA,4CACA,6CACA,4BAGJ,gCACG2K,EACChR,EAAMgE,KAAKiF,MAAM1C,KAAI,SAAC0K,GAEpB,IAAIrB,EA9EhB,SAAoBsB,GAClB,IAAIC,EAAI,IAAIlP,KAAKiP,GACfE,EAAQ,IAAMD,EAAEE,WAAa,GAC7BC,EAAM,GAAKH,EAAEI,UACbC,EAAOL,EAAEM,cAKX,OAHIL,EAAMjM,OAAS,IAAGiM,EAAQ,IAAMA,GAChCE,EAAInM,OAAS,IAAGmM,EAAM,IAAMA,GAEzB,CAACA,EAAKF,EAAOI,GAAMhK,KAAK,KAqEJkK,CAAWT,EAAKpB,WACjC,GAAIoB,EAAKpI,UAAY7I,EAAM+Q,gBAAiB,CAC1C,IAEIY,GAAa,EAcjB,OAZwB,IAApBhB,IACc,EAGdM,EAAKW,QACS,EAGdX,EAAKY,YAAc,IACrBF,GAAa,GAIb,+BACE,oBAAIhP,MAAO,CAAE,iBAAkB,UAA/B,SAA4CsO,EAAKnI,OACjD,oBAAInG,MAAO,CAAE,iBAAkB,UAA/B,SACGsO,EAAKW,MAAQ,QAAU,cAE1B,oBAAIjP,MAAO,CAAE,iBAAkB,UAA/B,SAA4CiN,IAC5C,oBAAIjN,MAAO,CAAE,iBAAkB,UAA/B,SACG3C,EAAM8R,mBACL,cAACvO,EAAA,EAAD,CACEC,GAAG,OACHC,UAAU,SACVhB,KAAK,KACLiB,KAAK,SACL,cAAY,SAGduN,EAAKY,cAIT,oBAAIlP,MAAO,CAAE,aAAc,UAA3B,SACE,eAACuG,EAAA,EAAD,CACE9I,MAAM,UACNkD,QAAQ,OACRyO,YAAY,gBACZC,KAAK,MAJP,UAME,cAAC3I,EAAA,EAASC,KAAV,CACEhH,UAAU,2BACVqB,QAAS,WACP1C,EAAQmB,KACN,aACEpC,EAAM+Q,gBACN,UACAE,EAAKnI,KACL,aARR,0BAiBCmI,EAAKW,MACN,uBACIpN,OAAO,OACP2I,OAAQ,kDACRC,MAAM,SAHV,UAKI,uBACE9M,KAAK,SACLwI,KAAK,QACL1F,MAAOpD,EAAM4G,YAEf,uBACEtG,KAAK,SACLwI,KAAK,eACL1F,MAAO,YAAY6N,EAAKnI,KAAK,UAEnC,wBACMxI,KAAK,SACL8C,MAAM,SACNd,UAAU,cAHhB,0BAQc,6BAKd,cAAC+G,EAAA,EAASC,KAAV,CACEhH,UAAU,2BACVqB,QAAS,WACP1C,EAAQmB,KACN,aACEpC,EAAM+Q,gBACN,UACAE,EAAKnI,KACL,WARR,0BAcC6I,EACC,cAACtI,EAAA,EAASC,KAAV,CACEhH,UAAU,2BACVqB,QAAS,WACP1C,EAAQmB,KACN,aACEpC,EAAM+Q,gBACN,UACAE,EAAKnI,KACL,UARR,yBAeA,yCASd,mCACE,6BACE,oBAAInG,MAAO,CAAE,aAAc,UAAY6M,QAAS,EAAhD,2CAYd,SAASyC,GAAmBjS,GAC1B,IAEA,EAA8BmB,mBAAS,IAAvC,6BAEA,OAAKnB,EAAMgE,MAGNhE,EAAMgE,KAAK4M,MAGX5Q,EAAMgE,KAAK4M,KAAKC,YAIwB3L,IAAzClF,EAAMgE,KAAK4M,KAAKC,MAAM7C,gBACpBhO,EAAMgE,KAAK4M,KAAKC,MAAM7C,eAAe8C,SAAS9Q,EAAM+Q,mBACrC,EAInB,mCACE,eAAC1O,EAAA,EAAD,CAAMC,UAAU,0BAAhB,UACE,cAACD,EAAA,EAAKE,OAAN,CAAaiB,GAAG,KAAhB,2BACA,cAACnB,EAAA,EAAKG,KAAN,UAEE,cAACkO,GAAD,CACEoB,mBAAoB9R,EAAM8R,mBAC1Bf,gBAAiB/Q,EAAM+Q,gBACvBnK,UAAW5G,EAAM4G,UACjBsJ,aAAclQ,EAAMkQ,aACpBlM,KAAMhE,EAAMgE,KACZmM,QAASnQ,EAAMmQ,QACfC,WAAYpQ,EAAMoQ,WAClBE,gBAAiBtQ,EAAMsQ,0BA5BxB,cAACG,GAAD,IAyHIyB,OArFf,WAGE,IAAMjR,EAAUC,cACV6P,EAAkBoB,cAAYnL,YACpC,EAAkCjG,qBAAWlB,GAA7C,mBAAO+G,EAAP,KACA,GADA,KACkC7F,qBAAW0N,KAA7C,mBAAOwB,EAAP,KAAkBC,EAAlB,KAEA,EAAmD/O,oBAAS,GAA5D,mBAAO2Q,EAAP,KAA2BM,EAA3B,KAEA,EAAgCjR,qBAAhC,6BAEAW,QAAQC,IAAI,cACZD,QAAQC,IAAIkO,GAEZ,MAAwC9O,mBAAS,MAAjD,mBAAOkR,EAAP,KAAqB/B,EAArB,KACA,EAA8BnP,mBAAS,MAAvC,mBAAOgP,EAAP,KAAgBC,EAAhB,KA0BA,OAvBA1O,qBAAU,WAAM,4CAGd,sBAAAkC,EAAA,sEACQ8K,GAAqB,CACzB9H,UAAWA,EACXoI,YAAakB,EACbvB,oBAAoB,EACpB3H,YAAa+J,IALjB,OAQEqB,GAAqB,GARvB,4CAHc,sBACdtQ,QAAQC,IAAI,qBAAuBgP,GADrB,mCAcduB,KACC,IASD,qBAAKtP,GAAG,+BAA+BV,UAAU,qBAAjD,SACE,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACE,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SACE,sBAAKA,UAAU,6BAAf,UACE,+CACA,sBACEK,MAAO,CACL4P,QAAS,OACT,iBAAkB,MAClB,cAAe,QAJnB,UAOE,qBAAKjQ,UAAU,wBAAf,SAAwCyO,IACxC,cAAC1N,EAAA,EAAD,CACEf,UAAU,mBACVqB,QAAS,WACP1C,EAAQmB,KAAK,cAHjB,SAME,cAAC,KAAD,CAAoBK,KAAM,eAKlC,cAACJ,EAAA,EAAKG,KAAN,CAAWF,UAAU,iBAArB,SACE,cAAC2P,GAAD,CACErL,UAAWA,EACXmK,gBAAiBA,EACjBsB,aAAcA,EACdnC,aAAcA,EACdlM,KAAMiM,EACNK,gBAAiBA,EACjBH,QAASA,EACTC,WAAYA,EACZ0B,mBAAoBA,Y,2DCjZjBU,G,iFAAf,WAA4BxS,GAA5B,eAAA4D,EAAA,sEAEyBW,IAAM,CACvBC,OAAQ,MACRC,IAAKC,0CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,aANnC,OAU0B,OARhBgI,EAFV,QAUe7K,SACH6K,EAAO5K,KAAK0L,SAASvK,OAAS,GAC9BnF,EAAMyS,0BAAyB,IAEU,IAAzC7D,EAAO5K,KAAK4M,KAAKC,MAAM3C,eACvBlO,EAAM0S,cAAa,GAEnB9D,EAAO5K,KAAK4M,KAAKC,MAAM9C,cAAc5I,OAAS,GAC9CnF,EAAM2S,oBAAmB,IAGX,MAAlB/D,EAAO7K,QACPsL,MAAMT,EAAO5K,MAtBrB,4C,sBA8Be,SAAS4O,GAAW5S,GAE/B,MAAkCe,qBAAWlB,GAA7C,mBAAO+G,EAAP,KAAkB5F,EAAlB,KACA,EAAwBG,oBAAS,GAAjC,mBAAO0R,EAAP,KAAaC,EAAb,KAEMC,EAAc,kBAAMD,GAAQ,IAC5BE,EAAU,uCAAG,sBAAApP,EAAA,+EAAYkP,GAAQ,IAApB,2CAAH,qDAChB,EAAkC3R,oBAAS,GAA3C,mBAAO8R,EAAP,KAAkBP,EAAlB,KACA,EAA8CvR,oBAAS,GAAvD,mBAAwBwR,GAAxB,WACA,EAA0DxR,oBAAS,GAAnE,mBAAO+R,EAAP,KAA8BT,EAA9B,KAeA,OAbA/Q,oBAAS,sBAAC,sBAAAkC,EAAA,sEACA4O,GAAa,CACf5L,UAAWA,EACX8L,aAAcA,EACdC,mBAAoBA,EACpBF,yBAA0BA,IALxB,2CAQP,IAMC,mCACI,eAACU,GAAA,EAAD,CAAQC,MAAM,MAAMC,GAAG,OAAO/P,QAAQ,OAAOgQ,OAAO,QAApD,UAGI,qBAAKhR,UAAU,cAAcqB,QAASqP,EAAtC,SAAkD,cAAC,KAAD,CAAe1Q,UAAU,mBAAmBG,KAAM,OACpG,oBAAIE,MAAO,CAAE,MAAS,SAAtB,oBACA,cAAC4Q,GAAA,EAAIC,KAAL,CAAUlR,UAAU,gBAAgBkB,GAAIgQ,KAAMC,GAAG,SAAS9P,QAAS,WAC/D3C,EAAa,MACbY,aAAa8R,SAFjB,oBAOA,eAACC,GAAA,EAAD,CACIC,SAAS,OACTjR,MAAO,CAAE,mBAAoB,UAAW,MAAS,OACjDK,GAAG,kBACH,kBAAgB,uBAChB6Q,UAAU,QACVhB,KAAMA,EACNiB,OAAQf,EAPZ,UAWI,cAACY,GAAA,EAAUpR,OAAX,CAAkBwR,aAAa,QAAQC,aAAW,EAACrR,MAAO,CAAE,MAAS,QAAS,mBAAoB,WAAlG,SACI,cAACgR,GAAA,EAAUM,MAAX,CAAiBjR,GAAG,uBAApB,SAA2C,oBAAIL,MAAO,CAAE,eAAgB,QAA7B,2BAE/C,sBAAKL,UAAU,qBAAf,UAEI,qBAAKA,UAAU,gBAAf,SACI,cAACiR,GAAA,EAAIC,KAAL,CAAUlR,UAAU,gBAAgBkB,GAAIgQ,KAAM7P,QAAS,WAAQoP,KAAiBU,GAAG,IAAnF,sBAEJ,qBAAKnR,UAAU,gBAAf,SACI,uBAAMK,MAAO,CAAE,MAAS,QAAU6B,OAAO,OAAO2I,OAAQzI,mDAA0C0I,MAAM,SAAxG,UACI,uBAAO9M,KAAK,SAASwI,KAAK,QAAQ1F,MAAOwD,IACzC,uBAAOtG,KAAK,SAASwI,KAAK,eAAe1F,MAAM,0BAC/C,uBAAOd,UAAU,YAAYhC,KAAK,SAAS8C,MAAM,wBAKxD8P,EAAwB,qBAAK5Q,UAAU,gBAAf,SACrB,cAACiR,GAAA,EAAIC,KAAL,CAAUlR,UAAU,gBAAgBkB,GAAIgQ,KAAM7P,QAAS,WAAQoP,KAAiBU,GAAG,YAAnF,+BACK,6BAMRR,EAAY,qBAAK3Q,UAAU,gBAAf,SACT,cAACiR,GAAA,EAAIC,KAAL,CAAUlR,UAAU,gBAAgBkB,GAAIgQ,KAAM7P,QAAS,WACnDoP,KAEDU,GAAG,kBAHN,8BAIK,6BACT,qBAAKnR,UAAU,gBAAf,SACI,cAACiR,GAAA,EAAIC,KAAL,CAAUlR,UAAU,gBAAgBkB,GAAIgQ,KAAMC,GAAG,SAAS9P,QAAS,WAC/D3C,EAAa,MACbY,aAAa8R,SAFjB,iC,8BCrGbQ,G,iFAAf,WAAqClU,GAArC,eAAA4D,EAAA,6DACI9B,QAAQC,IAAI,cAAe/B,EAAM4G,WADrC,SAEyBrC,IAAM,CACvBC,OAAQ,OACRC,IAAKC,0CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,aANnC,OAEUgI,EAFV,OAUI9M,QAAQC,IAAI,cACZD,QAAQC,IAAI6M,GACU,MAAlBA,EAAO7K,SACPjC,QAAQC,IAAI,+BACZD,QAAQC,IAAI6M,EAAO5K,MACnBhE,EAAMyJ,sBAAsBmF,EAAO5K,OAGjB,MAAlB4K,EAAO7K,QACPsL,MAAMT,EAAO5K,MAnBrB,4C,+BAuBemQ,G,qFAAf,WAA6BvN,EAAWI,EAAaoN,GAArD,eAAAxQ,EAAA,6DACI9B,QAAQC,IAAIiF,GACZlF,QAAQC,IAAI6E,GAFhB,SAK0CrC,IAAM,CACxCC,OAAQ,OACRC,IAAKC,gDACLV,KAAM,CACF8E,KAAM9B,EACN+I,YAAaqE,GAEjBvN,QAAS,CACL,cAAiBD,KAb7B,cAKUyN,EALV,yBAiBYA,GAjBZ,4C,+BAoBeC,G,mFAAf,WAA6B1N,EAAWI,GAAxC,eAAApD,EAAA,6DACI9B,QAAQC,IAAIiF,GACZlF,QAAQC,IAAI6E,GAFhB,SAK0CrC,IAAM,CACxCC,OAAQ,SACRC,IAAKC,gDACLV,KAAM,CACF8E,KAAM9B,GAEVH,QAAS,CACL,cAAiBD,KAZ7B,cAKUyN,EALV,yBAgBYA,GAhBZ,4C,+BAoBeE,G,yFAAf,WAA0B3N,EAAWI,EAAakD,EAAUsK,EAAaC,GAAzE,eAAA7Q,EAAA,6DACI9B,QAAQC,IAAIiF,GACZlF,QAAQC,IAAI2C,qDAAuEwF,EAAW,iBAAmBsK,EAAc,iBAAmBxN,EAAc,kBAFpK,SAMuCzC,IAAM,CACrCC,OAAQ,OACRC,IAAKC,qDAAuEwF,EAAW,iBAAmBsK,EAAc,iBAAmBxN,EAAc,iBACzJhD,KAAMyQ,EACN5N,QAAS,CACL,cAAiBD,EACjB,eAAgB,uEAZ5B,cAMU8N,EANV,yBAeYA,GAfZ,4C,+BAsBeC,G,yFAAf,WAA0B/N,EAAWI,EAAakD,EAAUsK,EAAaC,GAAzE,eAAA7Q,EAAA,sEAIuCW,IAAM,CACrCC,OAAQ,OACRC,IAAKC,2DAA6EwF,EAAW,iBAAmBsK,EAAc,iBAAmBxN,EAAc,iBAC/JhD,KAAMyQ,EACN5N,QAAS,CACL,cAAiBD,EACjB,eAAgB,uEAV5B,cAIU8N,EAJV,yBAaYA,GAbZ,4C,sBAkBA,SAASE,GAAkB5U,GACvB,OACI,qCACI,eAAC0C,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,2BACA,cAACH,EAAA,EAAKK,QAAN,CAAczC,KAAK,OAAO2C,SAAU,SAACC,GACjClD,EAAM6U,kBAAkB3R,EAAMC,OAAOC,aAG7C,eAACV,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,kCACA,cAACH,EAAA,EAAKK,QAAN,CAAcS,GAAG,WAAWsR,KAAM,EAAG7R,SAAU,SAACC,GAC5ClD,EAAM+U,yBAAyB7R,EAAMC,OAAOC,gBAKxD,cAACC,EAAA,EAAD,CAAQV,MAAO,CAAE,aAAc,SAAWgB,QAAO,sBAAE,sBAAAC,EAAA,sEACzCuQ,GAAcnU,EAAM4G,UAAW5G,EAAMgV,eAAgBhV,EAAMiV,uBADlB,uBAEzCjV,EAAMkU,sBAAsB,CAAEtN,UAAW5G,EAAM4G,UAAW6C,sBAAuBzJ,EAAMyJ,wBAF9C,2CAAnD,4BAUZ,SAASyL,GAAalV,GAElB8B,QAAQC,IAAI/B,EAAMgE,MAClB,IAAImR,EAAc,CAAC,eACfrJ,GAAW,EAkBf,YAhBmB5G,IAAflF,EAAMgE,KAAoC,OAAfhE,EAAMgE,YACLkB,IAAxBlF,EAAMgE,KAAK0L,WACXyF,EAAcnV,EAAMgE,KAAK0L,SAASnJ,KAAI,SAACsC,GACnC,OAAOA,EAAQC,QAEnBgD,GAAW,GAGoB,IAA/B9L,EAAMgE,KAAK0L,SAASvK,SACpBgQ,EAAc,CAAC,eACfrJ,GAAW,IAInBhK,QAAQC,IAAIoT,GAGR,mCACI,eAACzS,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,+BAGA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,mBAAmB5I,SAAU,SAACC,GAAYlD,EAAMoV,mBAAmBlS,EAAMC,OAAOC,QAAU0I,SAAUA,EAAU,aAAW,yBAAnJ,UACI,wBAAQA,UAAU,EAAlB,8BACCqJ,EAAY5O,KAAI,SAAC8O,GACd,OAAO,iCAASA,aAI5B,eAAC3S,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yCAGA,cAACH,EAAA,EAAKK,QAAN,CAAcE,SAAU,SAACC,GAAYlD,EAAMsV,eAAepS,EAAMC,OAAOC,UACvE,cAACV,EAAA,EAAKqJ,KAAN,mFAGJ,eAACrJ,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,qCAGA,cAACH,EAAA,EAAKK,QAAN,CAAcE,SAAU,SAACC,GAAYlD,EAAMuV,kBAAkBrS,EAAMC,OAAOC,UAG1E,cAACV,EAAA,EAAKqJ,KAAN,+EAGJ,eAACrJ,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,+BAGA,cAACH,EAAA,EAAKK,QAAN,CAAczC,KAAK,OAAOmC,KAAK,KAAKQ,SAAU,SAACmG,GAAD,OAAOpJ,EAAMwV,gBAAgBpM,EAAEjG,OAAOsS,MAAM,UAG9F,cAACpS,EAAA,EAAD,CAAQM,QAAO,sBAAE,sBAAAC,EAAA,sEACP2Q,GAAWvU,EAAM4G,UAAW5G,EAAM0V,gBAAiB1V,EAAM2V,YAAa3V,EAAM4V,eAAgB5V,EAAM6V,cAD3F,uBAEP7V,EAAMkU,sBAAsB,CAAEtN,UAAW5G,EAAM4G,UAAW6C,sBAAuBzJ,EAAMyJ,wBAFhF,2CAAjB,yBAWhB,SAASqM,GAAkB9V,GACvB8B,QAAQC,IAAI,mBAEZ,MAAgCZ,mBAAS,IAAzC,mBAAO4U,EAAP,KAAiBC,EAAjB,KAEAlU,QAAQC,IAAI/B,EAAMgE,MAClB,IAAImR,EAAc,CAAC,eACfc,GAAkB,EAqBtB,YAnBmB/Q,IAAflF,EAAMgE,KAAoC,OAAfhE,EAAMgE,YACLkB,IAAxBlF,EAAMgE,KAAK0L,WACXyF,EAAcnV,EAAMgE,KAAK0L,SAASnJ,KAAI,SAACsC,GACnC,OAAOA,EAAQC,QAEnBmN,GAAkB,GAGa,IAA/BjW,EAAMgE,KAAK0L,SAASvK,SACpBgQ,EAAc,CAAC,eACfc,GAAkB,IAI1BnU,QAAQC,IAAIoT,GAEZrT,QAAQC,IAAI/B,EAAMgE,MAId,mCACI,eAACtB,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,uDAGA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,mBAAmB5I,SAAU,SAACC,GAEpDlD,EAAMkW,wBAAwBhT,EAAMC,OAAOC,OAE3C,IAAM+S,EAAc,QACDjR,IAAflF,EAAMgE,KAAoC,OAAfhE,EAAMgE,YACRkB,IAArBlF,EAAMgE,KAAKiF,QACXjJ,EAAMgE,KAAKiF,MAAM1C,KAAI,SAAC0K,GACdA,EAAKpI,UAAY3F,EAAMC,OAAOC,OAC9B+S,EAAY/T,KAAK6O,EAAKnI,SAG9BkN,EAAYG,IAGmB,IAA/BnW,EAAMgE,KAAK0L,SAASvK,QACpB6Q,EAAY,MAItBlK,SAAUmK,EAAiB,aAAW,yBApBxC,UAqBI,wBAAQnK,UAAU,EAAlB,8BACCqJ,EAAY5O,KAAI,SAAC8O,GACd,OAAO,iCAASA,aAK5B,eAAC3S,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,uDAGA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,gBAAgB5I,SAAU,SAACC,GACjDlD,EAAMoW,oBAAoBlT,EAAMC,OAAOC,QAEzC,aAAW,yBAHb,UAII,wBAAQ0I,UAAU,EAAlB,2BACCiK,EAASxP,KAAI,SAAC8O,GACX,OAAO,iCAASA,aAM5B,eAAC3S,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yCAGA,cAACH,EAAA,EAAKK,QAAN,CAAcE,SAAU,SAACC,GAAYlD,EAAMqW,uBAAuBnT,EAAMC,OAAOC,UAG/E,cAACV,EAAA,EAAKqJ,KAAN,sIAGJ,eAACrJ,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,+BAGA,cAACH,EAAA,EAAKK,QAAN,CAAczC,KAAK,OAAOmC,KAAK,KAAKQ,SAAU,SAACmG,GAAD,OAAOpJ,EAAMsW,qBAAqBlN,EAAEjG,OAAOsS,MAAM,UAGnG,cAACpS,EAAA,EAAD,CAAQM,QAAO,sBAAE,sBAAAC,EAAA,sEACP+Q,GAAW3U,EAAM4G,UAAW5G,EAAMuW,qBAAsBvW,EAAMwW,iBAAkBxW,EAAMyW,oBAAqBzW,EAAM0W,mBAD1G,uBAEP1W,EAAMkU,sBAAsB,CAAEtN,UAAW5G,EAAM4G,UAAW6C,sBAAuBzJ,EAAMyJ,wBAFhF,2CAAjB,yBAUhB,SAASkN,GAAkB3W,GAGvB8B,QAAQC,IAAI,mBAEZ,MAAgCZ,mBAAS,IAAzC,mBAAO4U,EAAP,KAAiBC,EAAjB,KAGAlU,QAAQC,IAAI/B,EAAMgE,MAClB,IAAImR,EAAc,CAAC,eACfc,GAAkB,EAqBtB,YAnBmB/Q,IAAflF,EAAMgE,KAAoC,OAAfhE,EAAMgE,YACLkB,IAAxBlF,EAAMgE,KAAK0L,WACXyF,EAAcnV,EAAMgE,KAAK0L,SAASnJ,KAAI,SAACsC,GACnC,OAAOA,EAAQC,QAEnBmN,GAAkB,GAGa,IAA/BjW,EAAMgE,KAAK0L,SAASvK,SACpBgQ,EAAc,CAAC,eACfc,GAAkB,IAI1BnU,QAAQC,IAAIoT,GAEZrT,QAAQC,IAAI/B,EAAMgE,MAId,mCACI,eAACtB,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,+BAGA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,mBAAmB5I,SAAU,SAACC,GAEpDlD,EAAMkW,wBAAwBhT,EAAMC,OAAOC,OAE3C,IAAM+S,EAAc,QACDjR,IAAflF,EAAMgE,KAAoC,OAAfhE,EAAMgE,YACRkB,IAArBlF,EAAMgE,KAAKiF,QACXjJ,EAAMgE,KAAKiF,MAAM1C,KAAI,SAAC0K,GACdA,EAAKpI,UAAY3F,EAAMC,OAAOC,OAC9B+S,EAAY/T,KAAK6O,EAAKnI,SAG9BkN,EAAYG,IAGmB,IAA/BnW,EAAMgE,KAAK0L,SAASvK,QACpB6Q,EAAY,MAItBlK,SAAUmK,EAAiB,aAAW,yBApBxC,UAqBI,wBAAQnK,UAAU,EAAlB,8BACCqJ,EAAY5O,KAAI,SAAC8O,GACd,OAAO,iCAASA,aAK5B,eAAC3S,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yDAGA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,gBAAgB5I,SAAU,SAACC,GACjDpB,QAAQC,IAAI,uBACZD,QAAQC,IAAImB,EAAMC,OAAOC,OACzBpD,EAAMoW,oBAAoBlT,EAAMC,OAAOC,QAEzC,aAAW,yBALb,UAMI,wBAAQ0I,UAAU,EAAlB,2BACCiK,EAASxP,KAAI,SAAC8O,GACX,OAAO,iCAASA,aAM5B,cAAChS,EAAA,EAAD,CAAQM,QAAO,sBAAE,sBAAAC,EAAA,sEACPgT,GAAa,CACfhQ,UAAW5G,EAAM4G,UACjBiC,QAAS7I,EAAMuW,qBACftF,KAAMjR,EAAMwW,mBAJH,uBAMPxW,EAAMkU,sBAAsB,CAAEtN,UAAW5G,EAAM4G,UAAW6C,sBAAuBzJ,EAAMyJ,wBANhF,2CAAjB,2B,SAcDmN,G,iFAAf,WAA4B5W,GAA5B,SAAA4D,EAAA,6DAEI9B,QAAQC,IAAI,mBACZD,QAAQC,IAAI/B,GAHhB,SAIyBuE,IAAM,CACvBC,OAAQ,OACRC,IAAKC,8CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3BiQ,OAAQ,CACJC,UAAW9W,EAAMiR,KACjB8F,aAAc/W,EAAM6I,WAZhC,0D,sBAsBA,SAAS4G,GAAyBzP,GAG9B,OADA8B,QAAQC,IAAI/B,GACPA,EAAMgE,UAyBiBkB,IAAxBlF,EAAMgE,KAAK0L,SAEP,8BACI,eAACxJ,EAAA,EAAD,WACI,gCACI,+BACI,kCAAQ,qBAER,6CAAQ,qBACR,4CAAQ,uBAJJ,gBADD,gBAQX,gCACKlG,EAAMgE,KAAK0L,SAASnJ,KAAI,SAACsC,EAAS8G,GAC/B,OACI,+BACI,6BAA2C,cAACtM,EAAA,EAAD,CAAQC,QAAQ,SAASK,QAAO,sBAAE,sBAAAC,EAAA,sEACnE0Q,GAActU,EAAM4G,UAAWiC,EAAQC,MAD4B,2CAAlC,qBAAlC,aAAe6G,EAAQ,WAKhC,6BAA4C9G,EAAQC,MAA3C,aAAe6G,EAAQ,WAChC,6BAA4C9G,EAAQkH,aAA3C,aAAeJ,EAAQ,aAP3B,aAAeA,OAHzB,wBAZ3B,EAvBQ,8BACI,eAACzJ,EAAA,EAAD,WACI,gCACI,+BACI,kCAAQ,qBAER,6CAAQ,qBACR,4CAAQ,uBAJJ,gBADD,gBAQX,gCACI,6BACI,oBAAIsJ,QAAS,EAAb,wC,SAkDbwH,G,iFAAf,WAAgChX,GAAhC,eAAA4D,EAAA,+EAI6BW,IAAM,CACvBE,IAAKC,sCACLF,OAAQ,OACRqC,QAAS,CACLoQ,cAAejX,EAAM4G,WAEzB5C,KAAM,CACF/D,MAAOD,EAAMkX,YAX7B,cAIctI,EAJd,OAeQ9M,QAAQC,IAAI6M,GAfpB,kBAiBgBA,EAAO5K,MAjBvB,0F,sBAwBe,SAASmT,KAIpB,MAAkCpW,qBAAWlB,GAA7C,mBAAO+G,EAAP,KAEA,GAFA,KAEoDzF,mBAAS,OAA7D,mBAAOqH,EAAP,KAA2BiB,EAA3B,KAEA,EAA4CtI,mBAAS,MAArD,mBAAO6T,EAAP,KAAuBH,EAAvB,KACA,EAA0D1T,mBAAS,MAAnE,mBAAO8T,EAAP,KAA8BF,EAA9B,KAEA,EAA8C5T,mBAAS,MAAvD,mBAAOuU,EAAP,KAAwBN,EAAxB,KACA,EAAwCjU,mBAAS,MAAjD,mBAAO0U,EAAP,KAAqBL,EAArB,KACA,EAAsCrU,mBAAS,MAA/C,mBAAOwU,EAAP,KAAoBL,EAApB,KACA,EAA4CnU,mBAAS,MAArD,mBAAOyU,EAAP,KAAuBL,EAAvB,KAGA,EAAwDpU,mBAAS,MAAjE,mBAAOoV,EAAP,KAA6BL,EAA7B,KACA,EAAkD/U,mBAAS,MAA3D,mBAAOuV,EAAP,KAA0BJ,EAA1B,KACA,EAAgDnV,mBAAS,MAAzD,mBAAOqV,EAAP,KAAyBJ,EAAzB,KACA,GAAsDjV,mBAAS,MAA/D,qBAAOsV,GAAP,MAA4BJ,GAA5B,MAGA,GAAgClV,mBAAS,MAAzC,qBAAO+V,GAAP,MAAiBE,GAAjB,MAmBA,OAjBA1V,qBAAU,WAAM,4CAGZ,sBAAAkC,EAAA,sEACMsQ,GAAsB,CAAEtN,UAAWA,EAAW6C,sBAAuBA,IAD3E,4CAHY,uBAAC,WAAD,wBAahB6I,KACG,IAIC,qBAAKtP,GAAG,+BAA+BV,UAAU,qBAAjD,SAEI,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SAA6C,2DAC7C,cAACD,EAAA,EAAKG,KAAN,UACI,eAAC6U,GAAA,EAAD,CAAWC,iBAAiB,IAA5B,UACI,eAACD,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,uBACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAAC,GAAD,CACI0R,sBAAuBA,GACvBzK,sBAAuBA,EACvBzF,KAAMwE,EACN5B,UAAWA,SAEvB,eAACyQ,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,+BACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAACoS,GAAD,CAEIV,sBAAuBA,GACvBzK,sBAAuBA,EACvBuL,eAAgBA,EAChBH,kBAAmBA,EACnBI,sBAAuBA,EACvBF,yBAA0BA,EAC1BnO,UAAWA,SAEvB,eAACyQ,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,4BACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAAC0S,GAAD,CACIhB,sBAAuBA,GACvBzK,sBAAuBA,EACvB7C,UAAWA,EACX5C,KAAMwE,EACNqN,aAAcA,EACdL,gBAAiBA,EACjBF,eAAgBA,EAChBK,YAAaA,EACbJ,kBAAmBA,EACnBK,eAAgBA,EAChBR,mBAAoBA,EACpBM,gBAAiBA,SAG7B,eAAC2B,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,gCACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAACsT,GAAD,CACI5B,sBAAuBA,GACvBzK,sBAAuBA,EACvB7C,UAAWA,EACX5C,KAAMwE,EACNkO,kBAAmBA,EACnBJ,qBAAsBA,EACtBF,oBAAqBA,EACrBI,iBAAkBA,EAClBH,uBAAwBA,GACxBI,oBAAqBA,GACrBP,wBAAyBA,EACzBK,qBAAsBA,SAIlC,eAACc,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,8BACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAACmU,GAAD,CACIzC,sBAAuBA,GACvBzK,sBAAuBA,EACvB7C,UAAWA,EACX5C,KAAMwE,EACN0N,wBAAyBA,EACzBK,qBAAsBA,EACtBH,oBAAqBA,EACrBI,iBAAkBA,SAI9B,eAACa,GAAA,EAAU/N,KAAX,CAAgBC,SAAS,IAAzB,UACI,cAAC8N,GAAA,EAAU9U,OAAX,gCACA,cAAC8U,GAAA,EAAU7U,KAAX,UACI,cAACE,EAAA,EAAD,UACI,cAAC+I,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAK6L,GAAG,IAAR,SACI,eAAC7U,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yBACA,cAACH,EAAA,EAAKK,QAAN,CAAczC,KAAK,QAAQ2C,SAAU,SAACC,GAClCkU,GAAYlU,EAAMC,OAAOC,UAI7B,cAACC,EAAA,EAAD,CAAQf,UAAU,mBAAmBK,MAAO,CAAE,UAAa,QACvDgB,QAAO,sBAAE,sBAAAC,EAAA,sDACLoT,GAAiB,CACbpQ,UAAWA,EACXsQ,SAAUA,KAHT,2CADb,8C,SCzpBjCM,G,iFAAf,WAA2BxX,GAA3B,iBAAA4D,EAAA,6DACI9B,QAAQC,IAAI/B,GACNiR,EAAOjR,EAAMgE,KAAKiF,MAAMD,QAAO,SAAC8E,GAAD,OAAUA,EAAKhF,OAAS9I,EAAMqS,cAAgBvE,EAAKjF,UAAY7I,EAAM+Q,mBAAiB,GAF/H,SAGyBxM,IAAM,CACvBC,OAAQ,OACRC,IAAKC,4CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3B5C,KAAM,CACFyT,YAAazX,EAAMyX,YACnBzQ,YAAahH,EAAM+Q,gBACnB7G,SAAUlK,EAAMqS,aAChBmC,YAAavD,EAAKuD,YAClB5C,MAAO5R,EAAM4R,SAdzB,cAGUhD,EAHV,yBAiBYA,GAjBZ,4C,sBAsMA,SAAS8I,GAAS1X,GAGd,OAFA8B,QAAQC,IAAI/B,GAGR,qCACI,+BACI,6BAAI,mBAAGqE,KAAK,2CAA2ClB,OAAO,SAA1D,2BACJ,kDACA,sDAEJ,qBAAKb,UAAU,oBAAf,SAEKtC,EAAM2X,UAAUC,iBAAmB,cAAC,KAAD,CAAQxU,MAAOpD,EAAM2X,UAAUC,mBAAuB,cAACrU,EAAA,EAAD,CACtFC,GAAG,OACHC,UAAU,SACVhB,KAAK,QACLiB,KAAK,SACL,cAAY,WAOhB1D,EAAM2X,UAAU/F,MAAQ,qCAEpB,uBAGA,uBACA,cAACvO,EAAA,EAAD,CAAQf,UAAU,mBAAmBK,MAAO,CAAE,OAAU,QACpDgB,QAAO,sBAAE,sBAAAC,EAAA,sEACC4T,GAAY,CACdC,YAAa,WACb7F,MAAO5R,EAAM2X,UAAU/F,MACvBhL,UAAW5G,EAAM4G,UACjB5C,KAAMhE,EAAMgE,KACZqO,aAAcrS,EAAMqS,aACpBtB,gBAAiB/Q,EAAM+Q,kBAPtB,OASLjP,QAAQC,IAAI,4BATP,2CADb,uCAeA,uBACA,kRAIE,gCAYP,SAAS8V,KAEpB,IAAM9G,EAAkBoB,cAAYnL,YAC9BqL,EAAeF,cAAYjI,SAEjC,EAAkD/I,oBAAS,GAA3D,mBACA,GADA,UACkDA,oBAAS,IAA3D,mBAEA,GAFA,UAEkCJ,qBAAWlB,IAA7C,mBAAO+G,EAAP,KACA,GADA,KACkC7F,qBAAW0N,KAA7C,mBAAOwB,EAAP,KAAkBC,EAAlB,KAEMjP,EAAUC,cAEhB,EAAwCC,mBAAS,CAC7C2W,mBAAmB,EACnBC,sBAAsB,EACtBC,mBAAmB,EACnBC,SAAS,EACTL,kBAAkB,EAClBhG,OAAO,EACP5N,KAAK,CACDiF,MAAM,GACNiP,MAAM,GACNxI,SAAS,MAVjB,mBAAOyI,EAAP,KAAqBC,EAArB,KA6CA,OA7BA1W,qBAAU,WAAM,4CAEZ,sBAAAkC,EAAA,sEACU8K,GAAqB,CACvB9H,UAAWA,EACXoI,YAAakB,IAHrB,4CAFY,uBAAC,WAAD,wBASZmI,KAED,IAEH3W,qBAAU,WACN,IA3RqB1B,EA2RfsY,EAvHY,CAClBR,kBAlKJ,SAAuB9X,GACnB,QAAKA,EAAMgE,QAGNhE,EAAMgE,KAAKiF,OAII,IADTjJ,EAAMgE,KAAKiF,MAAMD,QAAO,SAAC8E,GAAD,OAAUA,EAAKhF,OAAS9I,EAAMqS,aAAevE,EAAKjF,UAAY7I,EAAM+Q,mBAC9F5L,OAyHaoT,CAAc,CACpCvU,MArIqBhE,EA2RsB,CACvCgE,KAAMiM,EACNoC,aAAcA,EACdtB,gBAAiBA,IAzJT/M,KACZqO,aAAcrS,EAAMqS,aACpBtB,gBAAiB/Q,EAAM+Q,kBA+BvBgH,qBApJJ,SAA6B/X,GAGzB,QAAKA,EAAMgE,QAGNhE,EAAMgE,KAAK4M,QAIX5Q,EAAMgE,KAAK4M,KAAKC,SAIhB7Q,EAAMgE,KAAK4M,KAAKC,MAAM7C,kBAIvBhO,EAAMgE,KAAK4M,KAAKC,MAAM7C,eAAe8C,SAAS9Q,EAAM+Q,iBAuG/ByH,CAAoB,CAC7CxU,KAAMhE,EAAMgE,KACZ+M,gBAAiB/Q,EAAM+Q,kBA0BvBkH,QAzHJ,SAAsBjY,GAElB,IAAKA,EAAMgE,KACP,OAAO,EAGX,IAAKhE,EAAMgE,KAAKiF,MACZ,OAAO,EAEX,IAAIgI,EAAOjR,EAAMgE,KAAKiF,MAAMD,QAAO,SAAC8E,GAAD,OAAUA,EAAKhF,OAAS9I,EAAMqS,cAAgBvE,EAAKjF,UAAY7I,EAAM+Q,mBACxG,OAAoB,IAAhBE,EAAK9L,UAIa,IAAlB8L,EAAK,GAAGW,MACDX,EAAK,GAAGwH,wBAGG,IAAlBxH,EAAK,GAAGW,OACDX,EAAK,GAAGyH,mBAgFPC,CAAa,CACzB3U,KAAMhE,EAAMgE,KACZ+M,gBAAiB/Q,EAAM+Q,gBACvBsB,aAAcrS,EAAMqS,eAoBpBuF,iBA/FJ,SAA8B5X,GAE1B,IAAKA,EAAMgE,KACP,OAAO,EAGX,IAAKhE,EAAMgE,KAAKiF,MACZ,OAAO,EAEX,IAAIgI,EAAOjR,EAAMgE,KAAKiF,MAAMD,QAAO,SAAC8E,GAAD,OAAUA,EAAKhF,OAAS9I,EAAMqS,cAAgBvE,EAAKjF,UAAY7I,EAAM+Q,mBAExG,GAAoB,IAAhBE,EAAK9L,OACL,OAAO,EAGX,IAAsB,IAAlB8L,EAAK,GAAGW,MAAgB,CACxB,IAAIqG,EAAUhH,EAAK,GAAGwH,uBACtB,OAAOG,uBAAY/J,KAAKE,UAAUkJ,IAAUY,SAAS,UAGzD,IAAsB,IAAlB5H,EAAK,GAAGW,MAAiB,CACzB,IAAIqG,EAAUhH,EAAK,GAAGyH,kBACtB,OAAOE,uBAAY/J,KAAKE,UAAUkJ,IAAUY,SAAS,UAIzD,OAAO,EAoDcC,CAAqB,CAC1C9U,KAAMhE,EAAMgE,KACZ+M,gBAAiB/Q,EAAM+Q,gBACvBsB,aAAcrS,EAAMqS,eAepBT,MAjEJ,SAAoB5R,GAEhB,IAAKA,EAAMgE,KACP,OAAO,EAGX,IAAKhE,EAAMgE,KAAKiF,MACZ,OAAO,EAEX,IAAIgI,EAAOjR,EAAMgE,KAAKiF,MAAMD,QAAO,SAAC8E,GAAD,OAAUA,EAAKhF,OAAS9I,EAAMqS,cAAgBvE,EAAKjF,UAAY7I,EAAM+Q,mBAExG,OAAoB,IAAhBE,EAAK9L,UAIa,IAAlB8L,EAAK,GAAGW,QAIRX,EAAK,GAAGW,OACD,IAiCDmH,CAAW,CACrB/U,KAAMhE,EAAMgE,KACZ+M,gBAAiB/Q,EAAM+Q,gBACvBsB,aAAcrS,EAAMqS,gBAiIpBvQ,QAAQC,IAAI,yBACZD,QAAQC,IAAIuW,GACZxW,QAAQC,IAAIkO,GAEZmI,EAAgBE,KAGjB,CAACrI,IAGA,qBAAKjN,GAAG,+BAA+BV,UAAU,qBAAjD,SAEI,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SACI,sBAAKA,UAAU,6BAAf,UACI,8CAEA,sBAAKK,MAAO,CAAE,QAAW,OAAQ,iBAAkB,MAAO,cAAe,QAAzE,UACI,qBAAKL,UAAU,wBAAf,SAAwCyO,IACxC,qBAAKzO,UAAU,wBAAf,SAAwC+P,IAExC,cAAChP,EAAA,EAAD,CAAQf,UAAU,mBAAmBqB,QAAS,WAC1C1C,EAAQmB,KAAK,aAAe2O,IADhC,SAII,cAAC,KAAD,CAAoBtO,KAAM,eAM1C,cAACJ,EAAA,EAAKG,KAAN,CAAWF,UAAU,iBAArB,SAII,cAACoV,GAAD,CAAUC,UAAWQ,EACrBnU,KAAMiM,EACNrJ,UAAWA,EACXyL,aAAcA,EACdtB,gBAAiBA,W,4BCjVtBiI,G,iFAAf,WAAyBhZ,GAAzB,iBAAA4D,EAAA,sEAIyBW,IAAM,CAC3BC,OAAQ,OACRC,IAAKC,oCACLV,KAAM,CACJ+C,SAAU/G,EAAM+G,SAChBG,UAAWlH,EAAMkH,UACjBD,OAAQjH,EAAMiH,OACdgS,KAAMjZ,EAAMiZ,KACZjV,KAAMhE,EAAMgE,MAEd6C,QAAS,CACPoQ,cAAejX,EAAM4G,aAf3B,UAIQjC,EAJR,OAsBe,QADTX,EAAOW,EAASX,MArBtB,yCAuBW,MAvBX,gCAyBWA,GAzBX,4C,sBA6BA,SAASkV,GAAsBlZ,GAG3B,OAFD8B,QAAQC,IAAI/B,GAGT,qBAAKsC,UAAU,YAAf,SACA,eAAC4D,EAAA,EAAD,CAAO5D,UAAU,cAAjB,UACE,gCACE,+BACE,8CACA,8CAFM,WAMV,gCAEKtC,EAAMmZ,UAAU5S,KAAI,SAAC0S,GAClB,OAAO,+BACH,oBAAItW,MAAO,CAAC,iBAAiB,UAA7B,SAAqHsW,EAAKG,cAA7E,YAAYH,EAAKG,aAAa,iBAAiBH,EAAKI,mBAEjG,qBAAI1W,MAAO,CAAC,iBAAiB,UAA7B,UAAiH,+BACrH,uBAAOyK,MAAM,eAAe9M,KAAK,OAAOuL,aAAcoN,EAAKK,WAC3DrW,SAAU,SAACC,IA4B3B,SAAyBlD,GACvB8B,QAAQC,IAAI/B,GAEZ,IAAIuZ,EAAiBvZ,EAAMmZ,UAEvBxJ,EAAQ4J,EAAeC,WAAU,SAACC,GACpC,GAAIA,EAAKC,YAAY1Z,EAAMiZ,KAAKS,WAC9BD,EAAKL,eAAepZ,EAAMiZ,KAAKG,cAC/BK,EAAKJ,oBAAoBrZ,EAAMiZ,KAAKI,kBAElC,OAAO,KAGbvX,QAAQC,IAAI4N,GAEZ4J,EAAe5J,GAAO2J,WAAatZ,EAAM2Z,OAEzC3Z,EAAM4Z,aAAaL,GA3CHM,CAAgB,6BACX7Z,GADU,IAEb2Z,OAAOzW,EAAMC,OAAOC,MACpB6V,KAAKA,UAPL,MAA4C,YAAYA,EAAKG,aAAa,eAAeH,EAAKI,qBAHlF,YAAYJ,EAAKG,aAAcH,EAAKI,6B,SAwDrDS,G,iFAAf,WAA+B9Z,GAA/B,eAAA4D,EAAA,6DACE9B,QAAQC,IAAI/B,EAAMmZ,WADpB,kBAIyB5U,IAAM,CACzBC,OAAQ,OACRC,IAAKC,2CACLmC,QAAS,CACPoQ,cAAejX,EAAM4G,WAEvB5C,KAAM,CACJ+M,gBAAgB/Q,EAAM+Q,gBACtBsB,aAAarS,EAAMqS,aACnB0H,SAAU/Z,EAAMga,YAChBb,UAAUnZ,EAAMmZ,aAdxB,cAkB0B,OAdhBvK,EAJV,QAkBe7K,QACT7D,QAAMC,gBAAgB,CACpBC,MAAO,UACPC,QAASL,EAAMia,cAAgB,aAC/B3Z,KAAM,UACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OA5BpB,kBAgCWgO,GAhCX,gCAkCI9M,QAAQC,IAAI,KAAI4C,UAChBzE,QAAMC,gBAAgB,CACpBC,MAAO,QACPC,QAAS,KAAIsE,SAASX,KACtB1D,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OA5ClB,0D,sBAmDA,SAASsZ,GAAcla,GACrB,MAAsCmB,mBAAS,MAA/C,mBAAO6Y,EAAP,KAAoBG,EAApB,KACA,EAAkDhZ,qBAAlD,mBAAOiZ,EAAP,KAA0BC,EAA1B,KACA,EAAkClZ,mBAAS,CAAC,CACxCiY,aAAc,GACdE,WAAY,MAFhB,mBAAOH,EAAP,KAAkBS,EAAlB,KAKA,EAA4CzY,oBAAS,GAArD,mBAAOmZ,EAAP,KAAuBC,EAAvB,KACAzY,QAAQC,IAAI/B,GAEZ,IAAMwa,EAAc,CAChB,6BACA,kCACA,yBACA,4BACA,yBACA,+BACA,gBACA,gBACA,gBACA,iBACA,gBACA,eAQJ,OANA9Y,qBAAU,WACNI,QAAQC,IAAI,SACZD,QAAQC,IAAIoX,KAEd,CAACA,IAGD,qCACE,eAACzW,EAAA,EAAD,WACE,cAACA,EAAA,EAAKG,MAAN,UAAa7C,EAAMya,YAEnB,eAAC/X,EAAA,EAAKkJ,OAAN,CACEC,aAAa,SACb5I,SAAQ,uCAAE,WAAOC,GAAP,iBAAAU,EAAA,6DACRuW,EAAejX,EAAMC,OAAOC,OADpB,SAEmB4V,GAAU,CACnCpS,UAAW5G,EAAM4G,UACjBG,SAAU7D,EAAMC,OAAOC,MACvB8D,UAAWlH,EAAM+Q,gBACjB9J,OAAQjH,EAAMqS,aACd4G,MAAM,EACNjV,MAAM,IARA,OAEF0W,EAFE,OAUFC,EAAsBxT,GAC1BuT,EACAN,GAEFC,EAAqBM,GAErBf,EAAac,GAhBL,2CAAF,sDAFV,UAqBE,wBAA6B5O,UAAU,EAAvC,mBAAY,kBAGX9L,EAAM4a,SAASC,MAAMtU,KAAI,SAACwT,GACzB,MAAoB,UAAjB/Z,EAAM8a,WACoD,IAArDN,EAAY3U,MAAK,SAACkV,GAAD,OAAaA,GAAWhB,MAK7B,WAAjB/Z,EAAM8a,WACkD,IAArDN,EAAY3U,MAAK,SAACkV,GAAD,OAAaA,GAAWhB,KALlC,iCAAyCA,GAA5B,eAAiBA,QAI3C,WAUN,uBACCC,EAAY,cAACd,GAAD,CAAuBC,UAAWA,EAAWS,aAAcA,IAEjE,6BAEP,uBACA,cAAClX,EAAA,EAAD,UACI,cAACA,EAAA,EAAKE,MAAN,CAAYN,UAAU,OAAO0Y,UAAU,oBAAvC,SACE,cAACtY,EAAA,EAAKuY,MAAN,CAAY3a,KAAK,WAAW+L,MAAOrM,EAAMkb,cACzCjY,SAAU,WAGRsX,GAFmBD,UAQ3B,qBAAK3X,MAAO,CAAE,QAAU,cAAc,MAAQ,QAA9C,SAEE,qBAAKA,MAAO,CAAC,WAAc,OAAQ,YAAe,GAAlD,SACE2X,EAuBJ,mCACA,cAACjX,EAAA,EAAD,CAAQf,UAAU,mBAAmBqB,QAAO,sBAAE,sBAAAC,EAAA,sEACtC4T,GAAY,CAChBC,YAAazX,EAAMyX,YACnBpF,aAAcrS,EAAMqS,aACpBtB,gBAAiB/Q,EAAM+Q,gBACvBkJ,cAAeja,EAAMmb,aACrBnX,KAAMhE,EAAMob,SACZxU,UAAW5G,EAAM4G,YAPyB,OAU5C0I,GAA+B,CAC7BtO,aAAchB,EAAMgB,aACpB4F,UAAW5G,EAAM4G,UACjBoI,YAAahP,EAAMgP,YACnBhI,YAAahH,EAAM+Q,gBACnB7G,SAAUlK,EAAMqS,aAChBjD,YAAapP,EAAMoP,cAhBuB,2CAA9C,SAmBIpP,EAAMqb,oBA1CR,qCACA,mBAEoBlT,SAAUnI,EAAM+Q,gBAAkB,IAAM/Q,EAAMqS,aAAe,IAAM2H,EAAc,OAEjF3V,KAAM+V,EAJ1B,SAOR,cAAC/W,EAAA,EAAD,CAAQV,MAAO,CAAC,OAAS,OAAQL,UAAU,mBAA3C,wBAGM,cAACe,EAAA,EAAD,CAAQf,UAAU,mBAClBqB,QAAO,sBAAE,sBAAAC,EAAA,sEACDkW,GAAgB,6BACjB9Z,GADgB,IAEnBmZ,UAAUA,EACVa,YAAYA,EACZC,cAAe,2BALV,2CADT,8B,SAwCSzC,G,iFAAf,WAA2BxX,GAA3B,eAAA4D,EAAA,6DACQqN,EAAOjR,EAAMgE,KAAKiF,MAAMD,QAC5B,SAAC8E,GAAD,OACEA,EAAKhF,OAAS9I,EAAMqS,cAAgBvE,EAAKjF,UAAY7I,EAAM+Q,mBAC7D,GAEF7Q,QAAMC,gBAAgB,CACpBC,MAAO,kBACPE,KAAM,UACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OAdhB,kBAkByB2D,IAAM,CACzBC,OAAQ,OACRC,IAAKC,4CACLmC,QAAS,CACPoQ,cAAejX,EAAM4G,WAEvB5C,KAAM,CACJyT,YAAazX,EAAMyX,YACnBzQ,YAAahH,EAAM+Q,gBACnB7G,SAAUlK,EAAMqS,aAChBmC,YAAavD,EAAKuD,YAClB5C,MAAOX,EAAKW,SA7BpB,cAiC0B,MAjC1B,OAiCe7N,QACT7D,QAAMC,gBAAgB,CACpBC,MAAO,UACPC,QAASL,EAAMia,cAAgB,aAC/B3Z,KAAM,UACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OA3CpB,mBA+CW,GA/CX,yCAiDIkB,QAAQC,IAAI,KAAI4C,UAChBzE,QAAMC,gBAAgB,CACpBC,MAAO,QACPC,QAAS,KAAIsE,SAASX,KACtB1D,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OA3DlB,mBA8DW,GA9DX,2D,sBAmEA,SAAS0a,GAAgBtb,GACvB,OACE,eAACqC,EAAA,EAAD,CAAMM,MAAO,CAAE,UAAa,QAA5B,UACE,cAACN,EAAA,EAAKE,OAAN,oBACA,cAACF,EAAA,EAAKG,KAAN,UACE,cAAC0X,GAAD,6BAAmBla,GAAnB,IACA8a,SAAS,QACTL,UAAU,0BACVS,cAAc,kGACdG,gBAAgB,mBAChB5D,YAAY,SACZ0D,aAAc,6BAOtB,SAASI,GAAiCvb,GACxC,OACE,eAACqC,EAAA,EAAD,CAAMM,MAAO,CAAE,UAAa,QAA5B,UACE,cAACN,EAAA,EAAKE,OAAN,kCACA,cAACF,EAAA,EAAKG,KAAN,UACA,cAAC0X,GAAD,6BAAmBla,GAAnB,IACE8a,SAAS,SACTL,UAAU,sCACVS,cAAc,6HACdG,gBAAgB,uBAChB5D,YAAY,aACZ0D,aAAc,iCAOtB,SAASK,GAAmBxb,GAC1B,MAA4CmB,mBAAS,MAArD,mBAAOsa,EAAP,KAAyBC,EAAzB,KACA,EAAoCva,mBAAS,MAA7C,mBAAOwa,EAAP,KAAmBC,EAAnB,KACA,EAAgDza,mBAAS,IAAzD,mBAAOkG,EAAP,KAAyBwC,EAAzB,KACA,OACE,eAACxH,EAAA,EAAD,CAAMM,MAAO,CAAE,aAAc,QAA7B,UACE,cAACN,EAAA,EAAKE,OAAN,4BAEA,eAACF,EAAA,EAAKG,KAAN,WACkB,cAACE,EAAA,EAAD,UACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,sCACA,eAACH,EAAA,EAAKkJ,OAAN,CAAaC,aAAa,SACtB5I,SAAQ,uCAAE,WAAOC,GAAP,iBAAAU,EAAA,6DACN8X,EAAgBxY,EAAMC,OAAOC,OADvB,SAEsB4V,GAAU,CAClCpS,UAAW5G,EAAM4G,UACjBG,SAAU7D,EAAMC,OAAOC,MACvB8D,UAAWlH,EAAM+Q,gBACjB9J,OAAQjH,EAAMqS,aACd4G,MAAM,EACNjV,MAAM,IARJ,OAEA6X,EAFA,OAUAC,EAAuB3U,GAAyB0U,EAAexU,GACrEwC,EAAoBiS,GACpBF,EAAcC,GAZR,2CAAF,sDADZ,UAgBI,wBAA6B/P,UAAU,EAAvC,mBAAY,kBACX9L,EAAM4a,SAASmB,SAASxV,KAAI,SAACyV,GAC1B,OAAO,iCAAwCA,GAA3B,eAAiBA,cAOpDL,EAAa,qCACV,uBACC1W,GAAY0W,GACb,qBAAKhZ,MAAO,CAAE,QAAU,cAAc,MAAQ,QAA9C,SAEpB,qBAAKA,MAAO,CAAC,WAAc,OAAQ,YAAe,EAAG,UAAY,OAAjE,SAAyE,mBAEjDwF,SAAUnI,EAAM+Q,gBAAkB,IAAM/Q,EAAMqS,aAAe,IAAMoJ,EAAmB,OAEtFpX,KAAMgD,EAJ2C,SAMjD,cAAChE,EAAA,EAAD,CAAQf,UAAU,mBAAlB,oCAEF,mCAM9B,SAAS2Z,GAAejc,GACtB,OACE,qCACGA,EAAMkc,UAAY,cAACZ,GAAD,gBAAqBtb,IAAY,6BACnDA,EAAMmc,WAAa,cAACZ,GAAD,gBAAsCvb,IAAY,6BACrEA,EAAMoc,YAAc,cAACZ,GAAD,gBAAwBxb,IAAY,gCAO/D,SAASiF,GAAYjB,GAInB,GAAa,OAATA,EAAe,CAKf,IAJA,IAAIoB,EAAgBpB,EAChBsB,EAAe,GAGVC,EAAkB,EAAGA,EAAkBH,EAAcD,OAAQI,IAIlE,IAFA,IAAIC,EAAyBC,OAAOC,KAAKN,EAAcG,IAE9CI,EAAe,EAAGA,EAAeH,EAAuBL,OAAQQ,IAAgB,CAErF,IAAIC,EAAaJ,EAAuBG,GAExC,IAAKL,EAAaO,MAAK,SAAAC,GAAM,OAAIA,IAAWF,OAEhB,IAApBL,GACAD,EAAaS,OAAOJ,EAAc,EAAGC,GAGrCL,EAAkB,GAGlB,QAAkDL,KAA7CM,EAAuBG,EAAe,GAAkB,CACzD,IAAIK,EAAgCV,EAAaW,QAAQT,EAAuBG,EAAe,IAC/FL,EAAaS,OAAOC,EAAgC,EAAG,EAAGJ,QAG1DN,EAAaS,OAAOJ,EAAe,EAAG,EAAGC,GAO7D,OACI,qBAAKtD,UAAU,YAAf,SAEI,eAAC4D,EAAA,EAAD,CAAOC,SAAO,EAACE,OAAK,EAAC5D,KAAK,KAAK6D,YAAU,EAAzC,UAEI,gCACI,6BACKhB,EAAaiB,KAAI,SAACT,EAAQU,GACvB,OAAQ,oBAAIlE,UAAU,WAAd,SAA6DwD,GAA/B,gBAAkBU,OAFxD,WAOZ,gCACKpB,EAAcmB,KAAI,SAACE,EAAWC,GAC3B,OAAQ,6BACHpB,EAAaiB,KAAI,SAACT,EAAQU,GACvB,OAAQ,oBAAI6V,OAAO,OAAX,SAA8G5V,EAAUX,GAAUW,EAAUX,GAAU,MAA/H,OAASY,EAAgB,UAAYF,EAArC,cAAuEE,OAF7F,OAASA,cAwGpD,SAASS,GAAyBC,EAAgBC,GAGhD,IAAMC,EA9FR,SAAqBtD,GAEnB,GAAa,OAATA,QAIgBkB,IAAhBlB,EAAKmB,OAAT,CAgBA,IAXA,IAAIoC,EAAY,GAGZnC,EAAgBpB,EAKhBsB,EAAe,GAIbC,EAAkB,EACtBA,EAAkBH,EAAcD,OAChCI,IAKA,IAFA,IAAIC,EAAyBC,OAAOC,KAAKN,EAAcG,IAGjDI,EAAe,EACnBA,EAAeH,EAAuBL,OACtCQ,IACA,CAEA,IAAIC,EAAaJ,EAAuBG,GAExC,IAAKL,EAAaO,MAAK,SAACC,GAAD,OAAYA,IAAWF,OAGpB,IAApBL,GACFD,EAAaS,OAAOJ,EAAc,EAAGC,GAGnCL,EAAkB,GAEpB,QAAkDL,KAA7CM,EAAuBG,EAAe,GAAkB,CAG3D,IAAIK,EAAgCV,EAAaW,QAC/CT,EAAuBG,EAAe,IAGxCL,EAAaS,OACXC,EAAgC,EAChC,EACAJ,QAKFN,EAAaS,OAAOJ,EAAe,EAAG,EAAGC,GAOnD2B,EAAUnF,KAAKkD,EAAakC,KAAK,OAGjC,IAAIC,EAAiBrC,EAAcmB,KAAI,SAACE,GAUtC,OATsBnB,EAAaiB,KAAI,SAACT,GACtC,OAA0B,OAAtBW,EAAUX,GACLW,EAAUX,GAEV,MAIyB0B,KAAK,SAO3C,OAJAD,EAAYA,EAAUG,OAAOD,IAGFD,KAAK,OAOhBG,CAAYP,GAEtBpD,EAAO,IAAI4D,KAAK,CAACN,GAAU,CAAEhH,KAAM,eAOzC,MAJyB,KAArB+G,GACFQ,OAAOC,IAAIC,gBAAgBV,GAGtBQ,OAAOC,IAAIE,gBAAgBhE,G,SAGrBsY,G,iFAAf,WAA6Btc,GAA7B,SAAA4D,EAAA,yDACuC,GAAjC5D,EAAM4a,SAAS2B,gBAEjBvc,EAAMwc,cAAa,GAEgB,GAAjCxc,EAAM4a,SAAS2B,eALrB,uBAMIrc,QAAMC,gBAAgB,CACpBC,MAAO,mBACPC,QAAS,sDACTC,KAAM,UACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACPC,SAAU,OAflB,SAmBoC4W,GAAY,CAC1CC,YAAa,QACbpF,aAAcrS,EAAMqS,aACpBtB,gBAAiB/Q,EAAM+Q,gBACvBkJ,cAAe,kBACfjW,KAAMhE,EAAMgE,KACZ4C,UAAW5G,EAAM4G,YAzBvB,WA4B4B,IA5B5B,uCA6BY0I,GAA+B,CACnCtO,aAAchB,EAAMgB,aACpB4F,UAAW5G,EAAM4G,UACjBoI,YAAahP,EAAMgP,YACnBhI,YAAahH,EAAM+Q,gBACnB7G,SAAUlK,EAAMqS,aAChBjD,YAAapP,EAAMoP,cAnC3B,OAwCyC,GAAnCpP,EAAM4a,SAAS6B,kBACjBzc,EAAM0c,eAAc,GAElB1c,EAAM4a,SAAS6B,iBAGmB,GAAlCzc,EAAM4a,SAAS+B,iBACjB3c,EAAM4c,gBAAe,GAEnB5c,EAAM4a,SAAS+B,gBAjDrB,6C,sBAsDe,SAASE,KACtB,IAAM9L,EAAkBoB,cAAYnL,YAC9BqL,EAAeF,cAAYjI,SAEjC,EAAkCnJ,qBAAWlB,GAA7C,mBAAO+G,EAAP,KAAkB5F,EAAlB,KACA,EAAkCD,qBAAW0N,IAA7C,mBAAOwB,EAAP,KAAkBC,EAAlB,KAEMjP,EAAUC,cAEhB,EAAgCC,mBAAS,IAAzC,mBAAOyZ,EAAP,KAAiBxL,EAAjB,KAEA,EAA8BjO,oBAAS,GAAvC,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAAkCN,oBAAS,GAA3C,mBAAO+a,EAAP,KAAkBM,EAAlB,KACA,EAAoCrb,oBAAS,GAA7C,mBAAOgb,EAAP,KAAmBO,EAAnB,KACA,EAAsCvb,oBAAS,GAA/C,mBAAOib,EAAP,KAAoBQ,EAApB,KAiDA,OA7CAlb,qBAAU,WAAM,4CACd,sBAAAkC,EAAA,sEACQ0L,GAA+B,CACnCtO,aAAcA,EACd4F,UAAWA,EACXoI,YAAakB,EACblJ,YAAa+J,EACb7G,SAAUmI,EACVjD,YAAaA,IAPjB,OASE3N,GAAW,GATb,4CADc,uBAAC,WAAD,wBAgBd6Q,KACC,IAEH5Q,qBAAU,WAAM,4CAGd,sBAAAkC,EAAA,sEACQ0Y,GAAc,CAClBtb,aAAcA,EACd4F,UAAWA,EAEXoI,YAAakB,EACbd,YAAaA,EAEbwL,SAAUA,EAEV5W,KAAMiM,EACNc,gBAAiBA,EACjBsB,aAAcA,EAEdmK,aAAcA,EACdE,cAAeA,EACfE,eAAgBA,IAhBpB,4CAHc,sBACd9a,QAAQC,IAAI,aACZD,QAAQC,IAAI6Y,GAFE,mCAuBdkC,KACC,CAAClC,IAGF,qBAAK5X,GAAG,+BAA+BV,UAAU,qBAAjD,SACE,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACE,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SACE,sBAAKA,UAAU,6BAAf,UACE,sCAEA,sBACEK,MAAO,CACL4P,QAAS,OACT,iBAAkB,MAClB,cAAe,QAJnB,UAOE,qBAAKjQ,UAAU,wBAAf,SAAwCyO,IACxC,qBAAKzO,UAAU,wBAAf,SAAwC+P,IAExC,cAAChP,EAAA,EAAD,CACEf,UAAU,mBACVqB,QAAS,WACP1C,EAAQmB,KAAK,aAAe2O,IAHhC,SAME,cAAC,KAAD,CAAoBtO,KAAM,eAKlC,cAACJ,EAAA,EAAKG,KAAN,UACGhB,EACC,cAAC+B,EAAA,EAAD,CACEC,GAAG,OACHC,UAAU,SACVhB,KAAK,KACLiB,KAAK,SACL,cAAY,SAGd,cAACuY,GAAD,CACErV,UAAWA,EACXgU,SAAUA,EACV7J,gBAAiBA,EACjBsB,aAAcA,EACd6J,UAAWA,EACXd,SAAUnL,EACVkM,WAAYA,EACZC,YAAaA,EACbpb,aAAcA,EACdoO,YAAaA,WC1zB3B,SAASoJ,GAAoBxY,GAGzB,QAAKA,EAAMgE,SAGNhE,EAAMgE,KAAK4M,SAIX5Q,EAAMgE,KAAK4M,KAAKC,UAIhB7Q,EAAMgE,KAAK4M,KAAKC,MAAM7C,kBAIvBhO,EAAMgE,KAAK4M,KAAKC,MAAM7C,eAAe8C,SAAS9Q,EAAM+Q,oBAY5D,SAASgM,GAAa/c,GAElB,OADA8B,QAAQC,IAAI/B,GACW,mBAAnBA,EAAMgd,SACC,CACHxY,OAAQ,OACRC,IAAKC,qDACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3B5C,KAAM,CACFgD,YAAahH,EAAMgH,YACnB/G,MAAOD,EAAMC,QAIF,kBAAnBD,EAAMgd,SACC,CACHxY,OAAQ,OACRC,IAAKC,oDACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3B5C,KAAM,CACFkG,SAAUlK,EAAMkK,SAChBjK,MAAOD,EAAMC,QAMF,YAAnBD,EAAMgd,SACC,CACHxY,OAAQ,OACRC,IAAKC,6CACLmC,QAAS,CACL,cAAiB7G,EAAM4G,WAE3B5C,KAAM,CACFkG,SAAUlK,EAAMkK,SAChBjK,MAAOD,EAAMC,aATzB,E,SAgBWgd,G,iFAAf,WAA2Bjd,GAA3B,iBAAA4D,EAAA,6DACQsZ,EAAUH,GAAa/c,GAD/B,kBAK6BuE,IAAM2Y,GALnC,cAS8B,OAJhBtO,EALd,QASmB7K,QACP7D,QAAMC,gBAAgB,CAClBC,MAAO,UACPC,QAAS,aACTC,KAAM,UACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACLC,SAAU,OAnB9B,kBAwBgBgO,GAxBhB,uCA2BQ9M,QAAQC,IAAR,MACA7B,QAAMC,gBAAgB,CAClBC,MAAO,QACPC,QAAS,KAAIsE,SAASX,KACtB1D,KAAM,SACNC,OAAQ,MACRC,UAAW,YACXC,YAAa,CAAC,oBAAqB,mBACnCC,aAAc,CAAC,oBAAqB,oBACpCC,QAAS,CACLC,SAAU,OArC1B,kF,sBA+CA,SAASuc,GAASnd,GACd,MAA8BmB,qBAA9B,mBAEA,GAFA,UAEsDA,sBAAtD,mBAAOic,EAAP,KAA4BC,EAA5B,KAEA,EAAgClc,mBAAS,IAAzC,mBAAO6b,EAAP,KAAiBM,EAAjB,KACA,EAA0Bnc,mBAAS,IAAnC,mBAAOlB,EAAP,KAAcmB,EAAd,KAGA,OAFAU,QAAQC,IAAI,mBACZD,QAAQC,IAAI/B,GAER,mCAEQA,EAAM+X,qBACF,mCACI,eAAC1V,EAAA,EAAKG,KAAN,WAEI,eAACH,EAAA,EAAD,WACI,cAACA,EAAA,EAAKE,OAAN,CAAaiB,GAAG,KAAhB,iCACA,cAACnB,EAAA,EAAKG,KAAN,UACI,eAACE,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yBACA,cAACH,EAAA,EAAKK,QAAN,CAAcE,SAAU,SAACC,GACrBma,EAAuBna,EAAMC,OAAOC,aAG5C,cAACC,EAAA,EAAD,CAAQf,UAAU,0CAA0CK,MAAO,CAAE,UAAa,QAC9EgB,QAAO,sBAAE,4BAAAC,EAAA,6DACL9B,QAAQC,IAAI/B,EAAM+Q,iBADb,SAEgBkM,GAAY,CAC7BrW,UAAW5G,EAAM4G,UACjB3G,MAAOmd,EACPpW,YAAahH,EAAM+Q,gBACnB7G,SAAU,KACV8S,SAAU,mBAPT,OAECpO,EAFD,OASL9M,QAAQC,IAAI6M,GATP,2CADb,yCAeZ,uBACA,eAACvM,EAAA,EAAD,WACI,cAACA,EAAA,EAAKE,OAAN,CAAaiB,GAAG,KAAhB,iCAEA,cAACnB,EAAA,EAAKG,KAAN,UACI,eAACE,EAAA,EAAD,WACI,eAACA,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,yBACA,cAACH,EAAA,EAAKK,QAAN,CAAcE,SAAU,SAACC,GACrB9B,EAAS8B,EAAMC,OAAOC,aAI9B,eAACV,EAAA,EAAKE,MAAN,WACI,cAACF,EAAA,EAAKG,MAAN,wBACA,eAACH,EAAA,EAAKkJ,OAAN,CAAa,aAAW,yBAAyBC,aAAa,wBAC1D5I,SAAU,SAACC,GACPoa,EAAYpa,EAAMC,OAAOC,QAFjC,UAKI,wBAAQ0I,UAAU,EAAlB,mCACA,wBAAQ1I,MAAM,gBAAd,4FACA,wBAAQA,MAAM,UAAd,6DAIR,cAACC,EAAA,EAAD,CAAQf,UAAU,0CAA0CK,MAAO,CAAE,UAAa,QAC9EgB,QAAO,sBAAE,sBAAAC,EAAA,sEACgBqZ,GAAY,CAC7BrW,UAAW5G,EAAM4G,UACjB3G,MAAOA,EACPiK,SAAUlK,EAAMqS,aAChB2K,SAAUA,IALT,yDADb,mCAepB,+BAML,SAASO,KACpB,MAAwDpc,oBAAS,GAAjE,mBAAO4W,EAAP,KAA6ByF,EAA7B,KAEMzM,EAAkBoB,cAAYnL,YAC9BqL,EAAeF,cAAYjI,SAEjC,EAAkCnJ,qBAAW0N,IAA7C,mBAAOwB,EAAP,KACA,GADA,KACkClP,qBAAWlB,IAA7C,mBAAO+G,EAAP,KAEM3F,GAFN,KAEgBC,eA8BhB,OA5BAY,QAAQC,IAAI,cACZD,QAAQC,IAAIkO,GAEZvO,qBAAU,WAEN,IAAMsM,EAAiBwK,GAAoB,CACvCxU,KAAMiM,EACNc,gBAAiBA,IAErBjP,QAAQC,IAAI,mBACZD,QAAQC,IAAIiM,GACZwP,EAAwBxP,KAEzB,CAACiC,IAEJvO,qBAAU,WAEN,IAAMsM,EAAiBwK,GAAoB,CACvCxU,KAAMiM,EACNc,gBAAiBA,IAErBjP,QAAQC,IAAI,mBACZD,QAAQC,IAAIiM,GACZwP,EAAwBxP,KAEzB,IAIC,qBAAKhL,GAAG,+BAA+BV,UAAU,qBAAjD,SAEI,eAACD,EAAA,EAAD,CAAMC,UAAU,qBAAhB,UACI,cAACD,EAAA,EAAKE,OAAN,CAAaD,UAAU,sBAAvB,SACI,sBAAKA,UAAU,6BAAf,UACI,iDAEA,sBAAKK,MAAO,CAAE,QAAW,OAAQ,iBAAkB,MAAO,cAAe,QAAzE,UACI,qBAAKL,UAAU,wBAAf,SAAwCyO,IACxC,qBAAKzO,UAAU,wBAAf,SAAwC+P,IAExC,cAAChP,EAAA,EAAD,CAAQf,UAAU,mBAAmBqB,QAAS,WAC1C1C,EAAQmB,KAAK,aAAe2O,IADhC,SAII,cAAC,KAAD,CAAoBtO,KAAM,eAK1C,cAACJ,EAAA,EAAKG,KAAN,CAAWF,UAAU,iBAArB,SACI,cAAC,GAAD,CACIyO,gBAAiBA,EACjBsB,aAAcA,EACd0F,qBAAsBA,EACtBnR,UAAWA,WC9OpB,SAAS6W,KAEpB,MAAkC1c,qBAAWlB,GAA7C,mBAAO+G,EAAP,KAAkB5F,EAAlB,KACA,EAAgCD,qBAAW0N,IAA3C,mBAAiBO,GAAjB,WACgB9N,cAmBhB,OAhBAQ,qBAAU,WACNuN,GAAmB,CACfjO,aAAcA,MAEnB,IAEHU,qBAAU,WACNgN,GAAqB,CACjB9H,UAAWA,EACXoI,YAAaA,MAElB,CAACpI,IAEJ9E,QAAQC,IAAI,sBACZD,QAAQC,IAAI6E,GAEJ,cAAC8W,GAAD,CAAoB9W,UAAWA,IAK3C,SAAS8W,GAAmB1d,GAGxB,OADA8B,QAAQC,IAAI/B,EAAM4G,WACd5G,EAAM4G,UAEF,eAAE,KAAF,WACI,cAACgM,GAAD,IAEA,eAAC,IAAD,WACI,cAAC,IAAD,CAAO+K,OAAK,EAACC,KAAK,IAAlB,SACI,cAAC,IAAD,CAAUC,KAAK,IAAIpK,GAAG,YAE1B,cAAC,IAAD,CAAOmK,KAAK,QAAQE,UAAWzP,KAC/B,cAAC,IAAD,CAAOuP,KAAK,YAAZ,SAAwB,cAACzR,GAAD,MAGxB,cAAC,IAAD,CAAOyR,KAAK,iDAAiDE,UAAWjG,KACxE,cAAC,IAAD,CAAO+F,KAAK,+CAA+CE,UAAWP,KACtE,cAAC,IAAD,CAAOK,KAAK,8CAA8CE,UAAWjB,KAErE,cAAC,IAAD,CAAOe,KAAK,yBAAyBE,UAAW5L,KAEhD,cAAC,IAAD,CAAO0L,KAAK,YAAZ,SAAyB,cAAC5N,GAAD,MAKzB,cAAC,IAAD,CAAO4N,KAAK,iBAAiBE,UAAWvT,IACxC,cAAC,IAAD,CAAOqT,KAAK,kBAAkBE,UAAW3G,KAGzC,cAAC,IAAD,CAAU0G,KAAK,IAAIpK,GAAG,gBASjCzT,EAAM4G,eAAX,EAEQ,cAAE,KAAF,UAEI,eAAC,IAAD,WACI,cAAC,IAAD,CAAO+W,OAAK,EAACC,KAAK,IAAlB,SACI,cAAC,IAAD,CAAUC,KAAK,IAAIpK,GAAG,aAE1B,cAAC,IAAD,CAAOmK,KAAK,YAAZ,SAAwB,cAACzR,GAAD,MACxB,cAAC,IAAD,CAAOyR,KAAK,SAAZ,SAAqB,cAAChZ,EAAD,W,OClE1BmZ,OArBf,WACE,MAAkC5c,mBAAS,MAA3C,mBAAOyF,EAAP,KAAkB5F,EAAlB,KACA,EAAgCG,mBAAS,MAAzC,mBAAOia,EAAP,KAAiBpM,EAAjB,KAEA,OACE,qCACE,cAAC,qBAAD,IAEA,cAAC,EAAYgP,SAAb,CAAsB5a,MAAO,CAACwD,EAAW5F,GAAzC,SACE,cAAC,GAAYgd,SAAb,CAAsB5a,MAAO,CAACgY,EAAUpM,GAAxC,SACE,qBAAK1M,UAAU,sBAAf,SACE,qBAAKA,UAAU,YAAf,SACE,cAACmb,GAAD,gBCzCCQ,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.7c288809.chunk.js","sourcesContent":["// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\n\n\n// A component for creating the authentiction\n// context used throughout the application.\n\n// Context provider created in the main App.js\n// file in the src directory.\n\nimport React, { createContext } from 'react';\n\nconst AuthContext = createContext()\n\nexport default AuthContext;\n\n","/**/\n\nimport React, { useState, useContext, useEffect } from 'react'\nimport { Button, Card, Form, Spinner } from 'react-bootstrap'\nimport Fade from 'react-bootstrap/Fade'\nimport { FaUserCircle } from 'react-icons/fa'\nimport axios from 'axios'\nimport { useHistory } from 'react-router'\nimport \"./login-component.css\"\n\nimport AuthContext from '../authentication-component/AuthContext';\n\nimport { Store } from 'react-notifications-component';\n\n\n\nfunction CheckCredentials(props) {\n    if (props.email === null |\n        props.email === \"\") {\n        Store.addNotification({\n            title: \"User Error\",\n            message: \"Must include email\",\n            type: \"danger\",\n            insert: \"top\",\n            container: \"top-right\",\n            animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n            animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n            dismiss: {\n                duration: 2000\n            }\n        });\n        return false\n    }\n    if (props.password === null |\n        props.password === \"\") {\n        Store.addNotification({\n            title: \"User Error\",\n            message: \"Must password\",\n            type: \"danger\",\n            insert: \"top\",\n            container: \"top-right\",\n            animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n            animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n            dismiss: {\n                duration: 2000\n            }\n        });\n        return false\n    }\n\n    return true\n}\n\nfunction LoginCard(props) {\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    const history = useHistory()\n\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n    const [requestError, setRequestError] = useState(\"\")\n    const [loading, setLoading] = useState(\"\")\n\n\n    useEffect(() => {\n        const localToken = localStorage.getItem(\"userToken\")\n        console.log(\"Local Token\")\n        console.log(localToken)\n\n        const currentDate = new Date()\n        const localTokenCreationTime = new Date(localStorage.getItem(\"createdAt\"))\n        console.log(\"Current date\")\n        console.log(currentDate)\n        console.log(\"Token time\")\n        console.log(localTokenCreationTime)\n\n        console.log(\"Difference\")\n        console.log(currentDate.getTime() - localTokenCreationTime.getTime())\n\n        const timeDifference = currentDate.getTime() - localTokenCreationTime.getTime()\n        if (timeDifference < 60 * 60 * 1000) {\n            setAuthToken(localToken)\n            history.push(\"/\")\n            return\n        }\n    }, [])\n\n\n\n    return (\n        <Card className=\"card-style border-0 login-card\">\n            <Card.Header className=\"bg-dark text-white\">\n                <h2>Login</h2>\n            </Card.Header>\n\n            <Card.Body>\n                <div className=\"icon-container\">\n                    <FaUserCircle size={60} />\n                </div>\n                <Form style={{ \"marginLeft\": \"2em\", \"marginRight\": \"2em\" }}>\n                    <Form.Group className=\"form-group-spaced\">\n                        <Form.Label htmlFor=\"email\">Email</Form.Label>\n                        <Form.Control id=\"email\" type=\"text\" onChange={(event) => setEmail(event.target.value)} />\n                    </Form.Group>\n                    <Form.Group className=\"form-group-spaced\">\n                        <Form.Label htmlFor=\"password\">Password</Form.Label>\n                        <Form.Control type=\"password\" onChange={(event) => setPassword(event.target.value)} />\n                    </Form.Group>\n                    {requestError ? <p className=\"warning\">{requestError}</p> : null}\n                    <div className=\"button-container\">\n                        {loading ? <Button className=\"login-buttons\" variant=\"dark\">\n                            <Spinner\n                                as=\"span\"\n                                animation=\"border\"\n                                size=\"sm\"\n                                role=\"status\"\n                                aria-hidden=\"true\"\n                            />\n                            Loading</Button> :\n                            <Button className=\"login-buttons\"\n                                type=\"submit\"\n                                variant=\"dark\"\n                                onClick={async (event) => {\n                                    setLoading(true)\n\n                                    const tokenResponse = await Login({\n                                        event: event,\n                                        email: email,\n                                        password: password,\n                                        requestError: requestError,\n                                        setRequestError: setRequestError,\n\n\n                                        // setAuthToken: props.setAuthToken\n                                    })\n                                    setLoading(false)\n\n                                    if (tokenResponse.status === 400) {\n                                        history.push(\"/login\")\n                                        return\n                                    }\n\n                                    if (tokenResponse.status === 200) {\n\n                                        setAuthToken(tokenResponse.data)\n                                        localStorage.setItem('userToken', tokenResponse.data)\n                                        const tokenDate = new Date()\n                                        localStorage.setItem('createdAt', tokenDate)\n                                        history.push(\"/\")\n\n                                    }\n\n\n\n                                }}>Login</Button>}\n                    </div>\n                    <div style={{ textAlign: \"center\", width: \"100%\" }}>\n                        Don't have an account?&nbsp;\n                        <a href=\"/#/register\">Click here</a> for registration\n                    </div>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n\n}\n\n\n\n\n\n\nasync function Login(props) {\n    props.event.preventDefault()\n    props.setRequestError(null)\n\n\n    const credentialsGiven = CheckCredentials({ email: props.email, password: props.password })\n\n    if (credentialsGiven == false) {\n        return ({\n            status: 400,\n            message: \"Missing Credentials\"\n        })\n\n    }\n\n\n    try {\n        // await timeout(2000)\n\n        const response = await axios({\n            method: \"post\",\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/login\",\n            data: {\n                email: props.email,\n                password: props.password\n            }\n        })\n        console.log(response)\n        return (response)\n    } catch (err) {\n        Store.addNotification({\n            title: \"Error\",\n            message: err.response.data,\n            type: \"danger\",\n            insert: \"top\",\n            container: \"top-right\",\n            animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n            animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n            dismiss: {\n                duration: 2000\n\n            }\n        });\n        return (err.response)\n\n    }\n}\n\n\n\nfunction LoginComponent(props) {\n    const [open, setOpen] = useState(false)\n\n    useEffect(() => {\n        setOpen(true)\n    }, [])\n\n    return (\n        <Fade in={open}>\n\n            <div className=\"child-login-container\">\n                <LoginCard />\n            </div >\n        </Fade>\n    )\n}\n\nexport {\n    LoginComponent,\n    CheckCredentials,\n    LoginCard,\n    Login\n}","import React, { useState, useEffect, useContext } from 'react'\nimport axios from 'axios'\nimport { Table, Button, Dropdown, DropdownButton, Card } from 'react-bootstrap'\nimport \"./data-query-component.css\"\nimport { Route, Redirect } from 'react-router-dom'\n\nimport AuthContext from '../authentication-component/AuthContext';\n\n// Function to render a table coming in from mongoDB\nfunction renderTable(data) {\n    // console.log(data)\n    if (data === null) {\n        return (<h1>No Data found</h1>)\n    }\n\n    if (data.length === undefined) {\n        return (<h1>No Data found</h1>)\n    }\n\n\n\n    if (data !== null) {\n        var full_data_set = data.slice(0, 9)\n        var column_names = []\n\n        // Looping through households\n        for (let household_index = 0; household_index < full_data_set.length; household_index++) {\n            // All of the column names for this individual household\n            var household_column_names = Object.keys(full_data_set[household_index])\n            //Looping through individual column names for the individual household\n            for (let column_index = 0; column_index < household_column_names.length; column_index++) {\n                // The new column name for that household\n                var new_column = household_column_names[column_index]\n\n                if (!column_names.some(column => column === new_column)) {\n\n                    if (household_index === 0) {\n                        column_names.splice(column_index, 0, new_column)\n                    }\n\n                    if (household_index > 0) {\n\n                        // Check if the previous column was in the column index\n                        if (!household_column_names[column_index - 1] !== undefined) {\n                            var index_of_previous_column_name = column_names.indexOf(household_column_names[column_index - 1])\n                            column_names.splice(index_of_previous_column_name + 1, 0, new_column)\n\n                        } else {\n                            column_names.splice(column_index + 1, 0, new_column)\n                        }\n                    }\n                }\n\n            }\n        }\n        return (\n            <>\n                <Table striped bordered hover size=\"sm\" variant=\"dark\" responsive>\n                    {/* Table header */}\n                    <thead>\n                        <tr key=\"row_1\">\n                            {column_names.map((column, column_key) => {\n                                return (<th key={\"row_1_column_\" + column_key}>{column}</th>)\n                            })}\n                        </tr>\n                    </thead>\n                    {/* Table Body */}\n                    <tbody>\n                        {full_data_set.map((household, household_key) => {\n                            return (<tr key={\"row_\" + household_key}>\n                                {column_names.map((column, column_key) => {\n                                    return (<td key={\"row_\" + household_key + \"column_\" + column_key + \"_\" + \"household_\" + household_key}>{household[column]}</td>)\n                                })}\n                            </tr>)\n                        })}\n\n                    </tbody>\n                </Table>\n            </ >)\n    }\n}\n\n// Function for converting simple json layout into CSV format\nfunction generateCSV(data) {\n    //Return nothing if the data is null\n    if (data === null) {\n        return;\n    }\n\n    // console.log(\"length \" + data.length)\n    if (data.length === undefined) {\n        return;\n    }\n\n    // Creating an empty list to include all of the lines of the csv\n    var csv_lines = []\n\n    // This is the full RHoMIS Data set\n    var full_data_set = data\n\n    // Identifying the column headers\n    // Some households have more columns than other. This merges column\n    // names in order based on the rows of each household\n    var column_names = []\n\n    // Looping through households\n    for (let household_index = 0; household_index < full_data_set.length; household_index++) {\n        // All of the column names for this individual household\n        var household_column_names = Object.keys(full_data_set[household_index])\n        //Looping through individual column names for the individual household\n        for (let column_index = 0; column_index < household_column_names.length; column_index++) {\n            // The new column name for that household\n            var new_column = household_column_names[column_index]\n            // Checking whether the new column has previously been encountered \n            if (!column_names.some(column => column === new_column)) {\n                // If this is the first househould, adds the new element at the column index\n                // not deleting any items\n                if (household_index === 0) {\n                    column_names.splice(column_index, 0, new_column)\n                }\n                // Checks if this is a household after the first household\n                if (household_index > 0) {\n                    // Check if the previous column was in the column index\n                    if (!household_column_names[column_index - 1] !== undefined) {\n                        // Looks at the column before, if it was encountered previously\n                        // we make sure this new column is added in the correct place\n                        var index_of_previous_column_name = column_names.indexOf(household_column_names[column_index - 1])\n\n                        column_names.splice(index_of_previous_column_name + 1, 0, new_column)\n\n                    } else {\n                        // If the previous column did not exist previously, we make sure to add the new column\n                        // at the end.\n                        column_names.splice(column_index + 1, 0, new_column)\n                    }\n                }\n            }\n\n\n        }\n    }\n\n    // add all of the column names, seperated by a column and a space\n    csv_lines.push(column_names.join(\", \"))\n\n    // Now push each individual household to the csv\n    var household_data = full_data_set.map((household) => {\n        var household_array = column_names.map((column) => {\n            if (household[column] !== null) {\n                return household[column]\n            } else {\n                return ''\n            }\n\n        })\n        // Join the column values by comma\n        var household_row = household_array.join(\", \")\n        return (household_row)\n\n    })\n    csv_lines = csv_lines.concat(household_data)\n\n    // Join each line and seperate by \\n\n    var csv_string = csv_lines.join('\\n')\n    return (csv_string)\n}\n\n// Getting project meta-data\nasync function fetchProjectInformation(authToken) {\n    // console.log(\"Auth Token: \" + authToken)\n    // Basic get request for metadata\n    const response = await axios({\n        method: \"get\",\n        url: process.env.REACT_APP_API_URL + \"api/meta-data/form-data\",\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    return (response.data)\n}\n\n// Getting all data as normal\nasync function fetchData(dataType, projectName, formID, authToken) {\n    // Basic post request, fetching information by: \n    //dataType: type of data we are looking for (e.g. indicator data),\n\n    const response = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_API_URL + \"api/data\",\n        data: {\n            dataType: dataType,\n            projectID: projectName,\n            formID: formID\n        },\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    // If the response is null return null\n    // Otherwise return the dataset.\n    var data = response.data\n    if (data === null) {\n        return null\n    } else {\n        return (data)\n    }\n}\n\n// Generating a link to download the csv data\nfunction generateDataDownloadLink(dataToDownload, dataDownloadLink) {\n    // Generating the csv string from the data we\n    // hope to download (comes in JSON format)\n    const dataCSV = generateCSV(dataToDownload)\n    // Creat e a file-like immutable objesct\n    const data = new Blob([dataCSV], { type: 'text/plain' })\n\n    // Clears the previous URL used to download the data\n    if (dataDownloadLink !== '') {\n        window.URL.revokeObjectURL(dataDownloadLink)\n    }\n    // update the download link state\n    return (window.URL.createObjectURL(data))\n}\n\n// A simple button to download the data\nfunction dataDownloadButton(dataDownloadLink, csvsAvailable, dataType, projectName, formID) {\n    if (csvsAvailable) {\n        return (<div className=\"end-button-container\">\n            <a\n                // Name of the file to download\n                download={projectName + '_' + formID + '_' + dataType + '_' + '.csv'}\n                // link to the download URL\n                href={dataDownloadLink}\n            >\n                <Button className=\"end-button\">Download Data as CSV</ Button></a>\n        </div>\n\n        )\n    }\n}\n\n// Function for ensuring the title of the drop-down updates\n// properly when a new value is selected\nfunction dropDownTitle(titleType, value) {\n    if (value === null) {\n        return (titleType)\n    }\n    return (value)\n\n}\n\n// Buttons to filter projects based on meta-data \nfunction filterButtons(projectInformationAvailable, projectInformation, projectName, setProjectName, formID, setFormID, dataType, setDataType) {\n    if (projectInformationAvailable) {\n\n        // console.log(projectInformation)\n        const projectNames = projectInformation.map(project => project.name)\n\n        // Making sure only the forms belonging to this project are shown.\n        const formIDs = []\n\n        if (projectName !== null) {\n            const project = projectInformation.filter(project => project.name === projectName)\n\n            if (project !== null) {\n                formIDs.push(project[0].forms)\n            }\n        }\n\n\n        return (\n            <>\n                <Card.Body>\n                    <p>Please use the filters below to select the data you would like to access. If the data has not been processed, or you are unsure whether it has been processed, click the \"Process Data\" button. Then click \"fetch\" data to access a preview of the dataset and make it available for download</p>\n                    <div>\n                        <div className=\"button-row\">\n\n                            <DropdownButton className=\"filter-button\" onSelect={(e) => setProjectName(e)} title={dropDownTitle(\"Project Name\", projectName)}>\n                                {projectNames.map((projectName) => {\n                                    return (<Dropdown.Item key={projectName} eventKey={projectName}>{projectName}</Dropdown.Item>)\n                                })}\n\n                            </DropdownButton>\n\n                            <DropdownButton className=\"filter-button\" onSelect={(e) => setFormID(e)} title={dropDownTitle(\"Form ID\", formID)}>\n\n\n                                {\n                                    formIDs.map((formID) => {\n\n                                        return (<Dropdown.Item key={formID} eventKey={formID}>{formID}</Dropdown.Item>)\n\n                                    })}\n                            </DropdownButton>\n\n                            <DropdownButton className=\"filter-button\" onSelect={(e) => setDataType(e)} title={dropDownTitle(\"Select Data to View\", dataType)}>\n                                <Dropdown.Item eventKey=\"processedData\">Whole Survey</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"indicatorData\">Indicator Data</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"metaData\">Meta Data</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"cropData\">Crop Data</Dropdown.Item>\n                                <Dropdown.Item eventKey=\"livestockData\">Livestock Data</Dropdown.Item>\n                            </DropdownButton>\n                        </div>\n                    </div>\n                </Card.Body>\n\n            </>\n        )\n    }\n\n}\n\nfunction projectInformationButton(projectInformation, setProjectInformation, projectInformationAvailable, setProjectInformationAvailable, authToken) {\n\n    if (!projectInformationAvailable) {\n        return (\n            <div >\n                <Card.Body>\n\n                    <p>Click the button below to begin querying the data. This will load information on the projects and forms used for various RHoMIS projects.</p>\n                </Card.Body>\n\n                <div className=\"end-button-container\">\n\n                    <Button data-testid=\"fetchProjectButton\" className=\"end-button\" onClick={async () => {\n                        const newProjectInfo = await fetchProjectInformation(authToken)\n\n                        if (newProjectInfo !== undefined) {\n                            setProjectInformation(newProjectInfo)\n                            setProjectInformationAvailable(true)\n                        }\n                    }}>Get Project Information</Button>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nfunction fetchDataButton(projectInformationAvailable, dataType, projectName, formID, dataDownloadLink, setDataDownloadLink, setData, setcsvAvailable, authToken) {\n    if (projectInformationAvailable) {\n        return (\n            <div className=\"end-button-container\">\n                < Button className=\"end-button\" onClick={async () => {\n                    const newData = await fetchData(dataType, projectName, formID, authToken)\n                    setDataDownloadLink(generateDataDownloadLink(newData, dataDownloadLink))\n                    setData(newData)\n                    setcsvAvailable(true)\n                }\n                }>Fetch Data</Button >\n            </div>\n        )\n    }\n}\n\nasync function processData(projectName, formID, authToken) {\n    const response = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_API_URL + \"api/process-data\",\n        data: {\n            projectName: projectName,\n            formName: formID\n        },\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    return (response)\n\n}\n\nasync function generateData(projectName, formID, authToken) {\n    const response = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_API_URL + \"api/generate-data\",\n        data: {\n            projectName: projectName,\n            formName: formID,\n            numberOfResponses: 10\n\n        },\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    return (response)\n\n}\n\nfunction processDataButton(projectInformationAvailable, projectName, formID, authToken) {\n    if (projectInformationAvailable) {\n        return (\n            <div className=\"end-button-container\">\n                < Button className=\"end-button\" onClick={async () => {\n\n                    const dataProcessedResponse = await processData(projectName, formID, authToken)\n                    // console.log(dataProcessedResponse)\n                }\n                }>Process Data</Button >\n            </div>\n        )\n    }\n}\n\nfunction generateDataButton(projectInformationAvailable, projectName, formID, authToken) {\n    if (projectInformationAvailable) {\n        return (\n            <div className=\"end-button-container\">\n                < Button className=\"end-button\" onClick={async () => {\n\n                    const dataGeneratedResponse = await generateData(projectName, formID, authToken)\n                    // console.log(dataGeneratedResponse)\n                }\n                }>Generate Data</Button >\n            </div>\n        )\n    }\n}\n\n// Full data viewer component\nfunction DataQueryComponent(props) {\n\n    const [requestError, setRequestError] = useState(null)\n\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    // The data we are hoping to view and download\n    const [data, setData] = useState(null)\n    // The link generated to download the data\n    const [dataDownloadLink, setDataDownloadLink] = useState('')\n    // A boolean indicating whether or not the csv is ready to download\n    const [csvsAvailable, setcsvAvailable] = useState(false)\n    // Boolean indicating whether or not project information has been downloaded yet\n    const [projectInformationAvailable, setProjectInformationAvailable] = useState(false)\n\n    // Information on what projects exist and what forms exist\n    const [projectInformation, setProjectInformation] = useState([])\n\n    // Data type we are looking for\n    const [dataType, setDataType] = useState(null)\n    const [projectName, setProjectName] = useState(null)\n\n    const [formID, setFormID] = useState(null)\n\n    return (\n        <div id=\"data-query-container\" className=\"sub-page-container\">\n\n            <h1 id=\"data-query-title\">RHoMIS 2.0 Data Querying</h1>\n            <Card >\n                <Card.Header className=\"bg-dark text-white\">Data Filters</Card.Header>\n\n                {filterButtons(projectInformationAvailable, projectInformation, projectName, setProjectName, formID, setFormID, dataType, setDataType)}\n                {projectInformationButton(projectInformation, setProjectInformation, projectInformationAvailable, setProjectInformationAvailable, authToken)}\n                {generateDataButton(projectInformationAvailable, projectName, formID, authToken)}\n                {processDataButton(projectInformationAvailable, projectName, formID, authToken)}\n                {fetchDataButton(projectInformationAvailable, dataType, projectName, formID, dataDownloadLink, setDataDownloadLink, setData, setcsvAvailable, authToken)}\n\n                {/* {filterButtons(projectInformationAvailable, projectInformation, projectName, setProjectName, formID, setFormID, dataType, setDataType)}\n                {projectInformationButton(projectInformation, setProjectInformation, projectInformationAvailable, setProjectInformationAvailable, props.authToken)}\n                {generateDataButton(projectInformationAvailable, projectName, formID, props.authToken)}\n                {processDataButton(projectInformationAvailable, projectName, formID, props.authToken)}\n                {fetchDataButton(projectInformationAvailable, dataType, projectName, formID, dataDownloadLink, setDataDownloadLink, setData, setcsvAvailable, props.authToken)} */}\n            </Card>\n\n            {renderTable(data)}\n            {dataDownloadButton(dataDownloadLink, csvsAvailable, dataType, projectName, formID)}\n        </div >\n    )\n}\n\n\n// Export all of the functions as want to ensure\n// that they work for testing purposes\nexport {\n    DataQueryComponent,\n    renderTable,\n    generateCSV,\n    fetchProjectInformation,\n    fetchData,\n    generateDataDownloadLink,\n    dataDownloadButton,\n    dropDownTitle,\n    filterButtons,\n    projectInformationButton,\n    fetchDataButton\n}\n\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\n/**/\n\nimport React, { useState, useContext, useEffect } from 'react'\nimport { Button, Card, Form, Spinner, Row, Col } from 'react-bootstrap'\nimport Fade from 'react-bootstrap/Fade'\nimport { FaUserCircle } from 'react-icons/fa'\nimport axios from 'axios'\nimport { useHistory } from 'react-router'\nimport \"./register-component.css\"\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport PasswordStrengthBar from 'react-password-strength-bar';\n\n\nfunction timeout(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nfunction CheckCredentials(props) {\n    if (props.email === null) {\n        props.setRequestError(\"No email given\")\n        return false\n    }\n    if (props.password === null) {\n        props.setRequestError(\"No password given\")\n        return false\n    }\n\n    return true\n}\n\nfunction RegistrationCard(props) {\n    // console.log(\"site key\")\n    // console.log(process.env)\n\n    console.log(props)\n\n    const [title, setTitle] = useState(\"\")\n\n    const [password, setPassword] = useState(\"\")\n    const [confirmPassword, setConfirmPassword] = useState(\"\")\n\n    const [email, setEmail] = useState(\"\")\n    const [confirmEmail, setConfirmEmail] = useState(\"\")\n\n    const [firstName, setfirstName] = useState(\"\")\n    const [surname, setSurname] = useState(\"\")\n    // const [institution, setInstitution] = useState(\"\")\n    // const [description, setDescription] = useState(\"\")\n\n    const [loading, setLoading] = useState(false)\n    const [requestError, setRequestError] = useState(null)\n\n    const [captchaToken, setCaptchaToken] = useState(null)\n\n    const history = useHistory()\n\n    let passwordsMatch = password === confirmPassword\n    let bothPasswordsEntered = (password.length > 0 && confirmPassword.length > 0)\n\n    let emailsMatch = email === confirmEmail\n    let bothEmailsEntered = (email.length > 0 && confirmEmail.length > 0)\n\n    let registrationEnabled = true\n\n    console.log(passwordsMatch)\n    console.log(bothPasswordsEntered)\n    console.log(emailsMatch)\n    console.log(bothEmailsEntered)\n    console.log(title.length > 0)\n    console.log(firstName.length > 0)\n    console.log(surname.length > 0)\n    console.log(emailsMatch)\n    console.log(bothEmailsEntered)\n    console.log(title.length > 0)\n    console.log(firstName.length > 0)\n    console.log(surname.length > 0)\n    console.log(captchaToken)\n\n\n    if (passwordsMatch &&\n        bothPasswordsEntered &&\n        emailsMatch &&\n        bothEmailsEntered &&\n        title.length > 0 &&\n        firstName.length > 0 &&\n        surname.length > 0 &&\n        captchaToken) {\n        registrationEnabled = false\n    }\n\n    return (\n        <Card className=\"card-style border-0 registration-card\">\n            <Card.Header className=\"bg-dark text-white\">\n                <h2>Signup</h2>\n            </Card.Header>\n            <Card.Body>\n                {/* <div className=\"icon-container\">\n                    <FaUserCircle size={60} />\n                </div> */}\n                <Form style={{ \"marginLeft\": \"3em\", \"marginRight\": \"3em\" }}>\n                    <Row>\n                        <Col xs={3}>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"email\">Title</Form.Label>\n                                <Form.Select id=\"title\" defaultValue=\"Select\" onChange={(event) => setTitle(event.target.value)} >\n                                    <option disabled=\"true\">Select</option>\n                                    <option value=\"ms\">Ms</option>\n                                    <option value=\"misss\">Miss</option>\n                                    <option value=\"mrs\">Mrs</option>\n                                    <option value=\"dr\">Dr</option>\n                                    <option value=\"mr\">Mr</option>\n                                    <option value=\"mx\">Mx</option>\n                                </Form.Select>\n                            </Form.Group>\n                        </Col>\n                        <Col xs={4}>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"name\">First Name</Form.Label>\n                                <Form.Control id=\"name\" type=\"text\" onChange={(event) => setfirstName(event.target.value)} />\n                            </Form.Group>\n                        </Col>\n                        <Col xs={5}>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"surname\">Surname</Form.Label>\n                                <Form.Control id=\"surname\" type=\"text\" onChange={(event) => setSurname(event.target.value)} />\n                            </Form.Group>\n                        </Col>\n\n                    </Row>\n                    <Row>\n                        <Col>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"email\">Email</Form.Label>\n                                <Form.Control id=\"email\" type=\"text\" onChange={(event) => setEmail(event.target.value)} />\n                            </Form.Group>\n                        </Col>\n\n                        <Col>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"email\">Confirm Email</Form.Label>\n                                <Form.Control id=\"confirmemail\" type=\"text\" onChange={(event) => setConfirmEmail(event.target.value)} />\n                            </Form.Group>\n                            {bothEmailsEntered ?\n                                <Form.Text style={{ \"textAlign\": \"end\" }}>{emailsMatch ? \"Emails match\" : \"Emails don't match\"}</Form.Text> :\n                                <></>}\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col>\n\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"password\">Password</Form.Label>\n                                <Form.Control type=\"password\" onChange={(event) => {\n                                    setPassword(event.target.value)\n                                }} />\n\n                            </Form.Group>\n\n                            <PasswordStrengthBar password={password} />\n                        </Col>\n                        <Col>\n                            <Form.Group className=\"form-group-spaced\">\n                                <Form.Label htmlFor=\"password\">Confirm Password</Form.Label>\n                                <Form.Control type=\"password\" onChange={(event) => {\n                                    setConfirmPassword(event.target.value)\n                                }} />\n                                {bothPasswordsEntered ?\n                                    <Form.Text style={{ \"textAlign\": \"end\" }}>{passwordsMatch ? \"Passwords match\" : \"Passwords don't match\"}</Form.Text> :\n                                    <></>}\n\n                            </Form.Group>\n                        </Col>\n\n                    </Row>\n                    {requestError ? <p className=\"warning\">{requestError}</p> : null}\n                    <div className=\"icon-container\">\n\n                        <ReCAPTCHA\n                            sitekey={process.env.REACT_APP_RECAPTCHA_SITE_KEY}\n                            onChange={async (value) => {\n                                setCaptchaToken(value)\n                            }}\n                        />\n                    </div>\n\n                    <div className=\"button-container\">\n                        {loading ? <Button className=\"login-buttons\" variant=\"dark\">\n                            <Spinner\n                                as=\"span\"\n                                animation=\"border\"\n                                size=\"sm\"\n                                role=\"status\"\n                                aria-hidden=\"true\"\n                            />\n                            Loading...</Button> : <Button disabled={registrationEnabled} className=\"login-buttons\" variant=\"dark\" onClick={async (event) => {\n                                setLoading(true)\n\n                                const registrationResult = await RegisterUser({\n                                    event: event,\n                                    title: title,\n                                    firstName: firstName,\n                                    surname: surname,\n                                    email: email,\n                                    password: password,\n                                    captchaToken: captchaToken,\n                                    requestError: requestError,\n                                    setRequestError: setRequestError,\n                                })\n                                setLoading(false)\n\n                                if (registrationResult.status > 199 || registrationResult.status < 300) {\n                                    history.push(\"/#/login\")\n                                    // props.setCardType(!props.cardType)\n\n                                }\n                                console.log(\"registrationResult\")\n                                console.log(registrationResult)\n\n                            }}>Register</Button>\n                        }\n                    </div>\n                    <div style={{ textAlign: \"center\", width: \"100%\" }}>\n                        Already got an account?&nbsp;\n                        <a href=\"/#/login\" >Click here</a> for login\n                    </div>\n                </Form>\n            </Card.Body>\n        </Card >\n    )\n}\n\n\n\n\nasync function RegisterUser(props) {\n    // Stop the page from refreshing\n    props.event.preventDefault()\n    props.setRequestError(null)\n\n\n\n    // check all of the details given\n    const credentialsGiven = CheckCredentials({\n        title: props.title,\n        firstName: props.firstName,\n        surname: props.surname,\n        email: props.email,\n        password: props.password,\n        requestError: props.requestError,\n        setRequestError: props.setRequestError,\n        captchaToken: props.captchaToken\n\n    })\n    try {\n        // await timeout(2000)\n\n        const response = await axios({\n            method: \"post\",\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/register\",\n            data: {\n                // username: username,\n                title: props.title,\n                firstName: props.firstName,\n                surname: props.surname,\n                email: props.email,\n                password: props.password,\n                captchaToken: props.captchaToken\n\n            }\n        })\n        console.log(response)\n        return (response)\n\n    } catch (err) {\n        console.log(err)\n        props.setRequestError(err.response.data)\n        return (err.response)\n\n    }\n}\n\nfunction RegisterComponent(props) {\n    const [open, setOpen] = useState(false)\n\n    useEffect(() => {\n        setOpen(true)\n    }, [])\n\n    return (\n        <Fade in={open}>\n\n            <div className=\"child-login-container\">\n                <RegistrationCard />\n            </div >\n        </Fade>\n    )\n}\n\nexport {\n    RegisterComponent,\n    CheckCredentials,\n    RegistrationCard,\n    RegisterUser\n}","// Copyright (C) 2022 Lo Gorman\n//\n// This file is part of rhomis-data-app.\n//\n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { RiSurveyFill } from 'react-icons/ri'\nimport { VscInspect } from 'react-icons/vsc'\nimport { FcAcceptDatabase } from 'react-icons/fc'\nimport { FiDatabase } from 'react-icons/fi'\nimport { MdHelpOutline, MdOutlineDashboardCustomize, MdOutlineSendToMobile, MdOutlineCreate } from 'react-icons/md'\nexport const PortalDataAll = [\n    {\n        name: \"Build a Survey\",\n        label: \"surveyBuilder\",\n        text: \"Get started straight away. Build a survey, collect test-data, and view your data.\",\n        icon: RiSurveyFill,\n        link: process.env.REACT_APP_SURVEY_BUILDER_URL,\n        external: true,\n    },\n    {\n        name: \"Manage Existing Projects\",\n        label: \"projectManager\",\n        text: \"Check up on your projects, download your data, and control user access.\",\n        icon: MdOutlineDashboardCustomize,\n        link: \"/projects\",\n        external: false,\n\n    },\n\n    // {\n    //     name: \"Collect Data\",\n    //     label: \"dataCollector\",\n    //     text: \"Collect data for an existing project and access enumerator training materials\",\n    //     icon: MdOutlineSendToMobile,\n    //     link: \"/projects\",\n    //     external: false,\n\n\n    // },\n    {\n        name: \"Global Dataset\",\n        label: \"globalData\",\n        text: \"Query publicly available survey data by time, location, and content.\",\n        icon: FiDatabase,\n        link: \"https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/9M6EHS\",\n        external: true,\n\n\n    },\n    {\n        name: \"Help\",\n        label: \"help\",\n        text: \"See guidance for more advanced use case and how to contribute to our system\",\n        icon: MdHelpOutline,\n        link: \"https://l-gorman.github.io/rhomis-docs/source/user-guide/first-time-user.html#rhomis-portal\",\n        external: true,\n    },\n    {\n        name: \"Administration\",\n        label: \"administrator\",\n        text: \"Create projects and forms (only used for development)\",\n        icon: MdOutlineCreate,\n        link: \"/administration\",\n        external: false,\n    }\n]\n\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Component, useState, useEffect, useContext } from 'react'\nimport { Form, Card, Table, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../authentication-component/AuthContext';\n\nimport axios from 'axios';\n\nimport { Redirect, useHistory } from 'react-router';\n\nimport { PortalDataAll } from './portal-data'\n\nimport './portal-component.css'\nimport '../../App.css'\n\n\n\n\n\nasync function FetchProjectInformation(authToken) {\n\n    // Basic get request for metadata\n    const response = await axios({\n        method: \"get\",\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/\",\n        headers: {\n            'Authorization': authToken\n        }\n    })\n    console.log(response.data)\n\n    return (response.data)\n}\n\nfunction PortalCard(props) {\n    const Icon = props.data.icon\n    const history = useHistory()\n\n\n\n    if (props.data.external === false) {\n        return (\n            <div onClick={() => { history.push(props.data.link) }}\n            >\n                < Card key={\"card-\" + props.data.name} className=\"sub-card portal-card border-0\">\n                    <div key={\"header-container-\" + props.data.name} className=\"portal-card-header-container\">\n                        <h4 key={\"card-header-\" + props.data.name} className=\"portal-card-header\">{props.data.name}</h4>\n                    </div>\n                    <div key={\"icon-container-\" + props.data.name} className=\"portal-icon-container\">\n                        <Icon size={100} color=\"white\" />\n                    </div>\n                </Card >\n            </div>\n        )\n    }\n\n    if (props.data.external === true & props.data.label === \"surveyBuilder\") {\n        console.log(\"Auth token\")\n\n        console.log(props.authToken)\n        return (\n            <div>\n                <form method=\"post\" action={props.data.link} class=\"inline\">\n                    <input type=\"hidden\" name=\"token\" value={props.authToken} />\n                    <input type=\"hidden\" name=\"redirect_url\" value=\"/admin/xlsform/create\" />\n                    <button type=\"submit\" style={{ margin: 0, padding: 0, border: 0, backgroundColor: \"white\" }}>\n\n\n                        < Card key={\"card-\" + props.data.name} className=\"sub-card portal-card border-0\">\n                            <div key={\"header-container-\" + props.data.name} className=\"portal-card-header-container\">\n                                <h4 key={\"card-header-\" + props.data.name} className=\"portal-card-header\">{props.data.name}</h4>\n                            </div>\n                            <div key={\"icon-container-\" + props.data.name} className=\"portal-icon-container\">\n                                <Icon size={100} color=\"white\" />\n                            </div>\n                        </Card >\n                    </button >\n                </form>\n\n            </div >\n        )\n    }\n\n\n\n    if (props.data.external === true & props.data.label !== \"surveyBuilder\") {\n        return (\n            <div>\n                <a style={{ 'textDecoration': 'none' }} href={props.data.link} target=\"_blank\">\n                    < Card className=\"sub-card portal-card border-0\">\n                        <div className=\"portal-card-header-container\">\n                            <h4 className=\"portal-card-header\">{props.data.name}</h4>\n                        </div>\n                        <div className=\"portal-icon-container\">\n\n                            <Icon size={100} color=\"white\" />\n                        </div>\n                    </Card >\n                </a>\n\n            </div >\n        )\n    }\n}\n\n\nfunction RenderPortalCards(props) {\n\n    const portalCardData = []\n    console.log(props.data[0])\n    console.log(props.userData)\n\n    if (props.userData) {\n        if (props.userData.basic === true) {\n            const cardToAdd = props.data.filter(item => item.label === \"surveyBuilder\")\n            portalCardData.push(...cardToAdd)\n        }\n        if (props.userData.dataCollector.length > 0) {\n            const cardToAdd = props.data.filter(item => item.label === \"dataCollector\")\n            portalCardData.push(...cardToAdd)\n        }\n\n        if (props.userData.projectManager.length > 0 | props.userData.analyst.length > 0) {\n            const cardToAdd = props.data.filter(item => item.label === \"projectManager\")\n            portalCardData.push(...cardToAdd)\n        }\n\n\n        if (props.userData.administrator === true) {\n            const cardToAdd = props.data.filter(item => item.label === \"administrator\")\n            portalCardData.push(...cardToAdd)\n        }\n\n\n        if (props.userData.researcher.length > 0 |\n            props.userData.basic === true) {\n            const cardToAdd = props.data.filter(item => item.label === \"globalData\")\n            portalCardData.push(...cardToAdd)\n        }\n        if (props.userData.basic === true) {\n            const cardToAdd = props.data.filter(item => item.label === \"help\")\n            portalCardData.push(...cardToAdd)\n        }\n\n    }\n\n    if (!props.userData) {\n        portalCardData.push(props.data[0])\n    }\n\n\n\n    return (\n        <>\n            {portalCardData.map((PortalItem) => {\n                return <PortalCard data={PortalItem} authToken={props.authToken} />\n            })\n            }\n        </>\n    )\n\n}\n\nexport default function PortalComponent() {\n\n    const [userData, setUserData] = useState(null)\n    const [useInfoAvail, setUserInfoAvail] = useState(false)\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    useEffect(async () => {\n        const newUserData = await FetchProjectInformation(authToken\n        )\n        setUserData(newUserData)\n        setUserInfoAvail(true)\n    }, [])\n\n    return (\n        <div className=\"sub-page-container\">\n            <Card className=\"main-card border-0\">\n                <Card.Header className=\"bg-dark text-white\">\n                    <h3 >Portal</h3>\n                </Card.Header>\n                <Card.Body className=\"main-card-body\">\n                    <RenderPortalCards data={PortalDataAll} userData={userData} authToken={authToken} />\n\n                </Card.Body>\n            </Card>\n\n        </div >\n    )\n\n}\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { createContext } from 'react';\n\nconst UserContext = createContext()\n\nexport default UserContext;","import axios from 'axios'\nimport { useFilters } from 'react-table/dist/react-table.development'\n\n\n\nasync function FetchUserInformation(props) {\n   \n\n    let getSubmissionCount = false\n    let projectName = false\n    if (props.getSubmissionCount === true) {\n        getSubmissionCount = true\n        projectName = props.projectName\n    }\n\n    console.log(\"Get Submissions Count\")\n    console.log(projectName)\n    \n\n    if (props.authToken) {\n        try{\n        const response = await axios({\n            method: \"post\",\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/meta-data/\",\n            data: {\n                getSubmissionCount: getSubmissionCount,\n                projectName: projectName\n\n            },\n            headers: {\n                'Authorization': props.authToken\n            }\n        })\n        console.log(\"user info\")\n        console.log(response.data)\n        let result = JSON.parse(JSON.stringify(response.data))\n        console.log(result)\n        props.setUserInfo(result)\n    }catch(err){\n        console.log(err)\n    }\n\n    }\n\n\n\n    // return (response.data)\n}\n\n\nfunction CheckForLocalToken(props) {\n    const localToken = localStorage.getItem(\"userToken\")\n    console.log(\"local_token is :\" + localToken)\n    if (!localToken) {\n        props.setAuthToken(null)\n        return null\n    }\n\n    const currentDate = new Date()\n    const localTokenCreationTime = new Date(localStorage.getItem(\"createdAt\"))\n\n    console.log(\"Difference\")\n    console.log(currentDate.getTime() - localTokenCreationTime.getTime())\n\n    const timeDifference = currentDate.getTime() - localTokenCreationTime.getTime()\n    if (timeDifference < 60 * 60 * 1000) {\n        props.setAuthToken(localToken)\n    }\n    if (timeDifference > 60 * 60 * 1000) {\n        props.setAuthToken(null)\n        return null\n    }\n\n    return localToken\n}\n\n\nasync function GetFormInformation(props) {\n\n    const result = await axios({\n        method: 'post',\n        url: process.env.REACT_APP_API_URL + \"api/project-data\",\n        headers: {\n            'Authorization': props.authToken\n        },\n        data: {\n            projectName: props.projectName,\n            formName: props.formName\n        }\n    })\n\n\n    if (result.status === 200) {\n\n        props.setFormData(result.data)\n    }\n    if (result.status === 400) {\n        alert(result.data)\n    }\n\n}\n\nasync function GetInformationForFormComponent(props) {\n\n    console.log(\"GET FORM INFO\")\n    console.log(props)\n    const authToken = await CheckForLocalToken({ setAuthToken: props.setAuthToken })\n    await FetchUserInformation({\n        authToken: authToken,\n        setUserInfo: props.setUserInfo\n    })\n\n    await GetFormInformation({\n        authToken: authToken,\n        projectName: props.projectName,\n        formName: props.formName,\n        setFormData: props.setFormData\n    })\n}\n\n\nexport {\n    CheckForLocalToken,\n    FetchUserInformation,\n    GetFormInformation,\n    GetInformationForFormComponent\n}","import React, { useState, useEffect, useContext } from 'react'\nimport { Form, Button, Card, Table } from 'react-bootstrap'\nimport axios from 'axios'\nimport AuthContext from '../authentication-component/AuthContext'\nimport UserContext from '../user-info-component/UserContext'\nimport './project-management-component.css'\nimport '../../App.css'\n\n\nimport { useHistory } from 'react-router'\n\nimport { AiOutlineArrowLeft } from 'react-icons/ai'\n\nimport QRCode from 'react-qr-code'\nimport { deflateSync } from 'zlib'\n\nimport { FetchUserInformation, CheckForLocalToken } from '../fetching-context-info/fetching-context-info'\n\n\nfunction NoProjectFound() {\n\n    return (\n        <div>\n            <Table striped bordered hover>\n                <thead key=\"table-header\">\n                    <tr key=\"table-row-1\">\n\n                        <th key=\"table-head-item-1\">Project Name</th>\n                        <th key=\"table-head-item-2\">Description</th>\n                        <th key=\"table-head-item-3\">Created at</th>\n\n\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td style={{ \"text-align\": \"center\" }} colSpan={3}>No projects found</td>\n                    </tr>\n\n                </tbody>\n\n            </Table>\n        </div >\n    )\n}\n\nfunction RenderProjectInformation(props) {\n\n    const history = useHistory()\n    console.log(props)\n    if (!props.data) {\n        return (<NoProjectFound />)\n\n\n    }\n\n    if (!props.data.projects) {\n        return (<NoProjectFound />)\n    }\n\n\n    if (props.data.projects.length === 0) {\n        return (<NoProjectFound />)\n    }\n\n\n    if (props.data.projects !== undefined) {\n        return (\n            <div>\n                <Table striped bordered hover>\n                    <thead key=\"table-header\">\n                        <tr key=\"table-row-1\">\n                            <th key=\"table-head-item-1\">Project Name</th>\n                            <th key=\"table-head-item-2\">Description</th>\n                            <th key=\"table-head-item-3\">Created at</th>\n                            <th key=\"table-head-item-4\"></th>\n                        </tr>\n                    </thead>\n                    <tbody key=\"table-body\">\n                        {props.data.projects.map((project, index) => {\n                            let date = new Date(project.createdAt)\n                            let dateString = date.toDateString()\n                            return (\n                                <tr key={\"table-row-\" + index}>\n\n                                    <td style={{ \"vertical-align\": \"middle\" }} key={\"table-row-\" + index + \"-item-1\"}>{project.name}</td>\n                                    <td style={{ \"vertical-align\": \"middle\" }} key={\"table-row-\" + index + \"-item-2\"}>{project.description}</td>\n                                    <td style={{ \"vertical-align\": \"middle\" }} key={\"table-row-\" + index + \"-item-3\"}>{dateString}</td>\n                                    <td style={{ \"vertical-align\": \"middle\" }} key={\"table-row-\" + index + \"-item-4\"}>\n                                        <Button className=\"bg-dark text-white border-0\" onClick={() => {\n                                            history.push(\"/projects/\" + project.name)\n                                            // props.setProjectSelected(project.name)\n                                            // const currentFilters = props.filters\n                                            // currentFilters.push(\"Project: \" + project.name)\n                                            // props.setFilters(currentFilters)\n                                            // props.setTitle(\"Select a Form\")\n                                        }}>\n                                            Select\n                                        </Button></td>\n                                </tr>\n                            )\n\n                        })}\n\n                    </tbody>\n                </Table>\n            </div>\n\n\n        )\n    }\n\n}\n\nfunction BackButton(props) {\n\n    if (props.filters.length === 1) {\n        props.setProjectSelected(false)\n        props.setFilters([])\n        props.setTitle(\"Select a Project\")\n    }\n\n    if (props.filters.length === 2) {\n        props.setFormSelected(false)\n        const newFilters = props.filters[0]\n        props.setFilters([newFilters])\n        props.setTitle(\"Select a Form\")\n\n    }\n\n}\n\nexport default function ProjectManagementComponent(props) {\n\n    const history = useHistory()\n\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    const [adminData, setAdminData] = useContext(UserContext)\n\n\n    const [filters, setFilters] = useState([])\n\n    const [title, setTitle] = useState(\"Select a Project\")\n\n    // const [projectName, setProjectName] = useState(null)\n\n    const [projectSelected, setProjectSelected] = useState(false)\n    const [formSelected, setFormSelected] = useState(false)\n\n    useEffect(async () => {\n        console.log(\"Effect running\")\n        await FetchUserInformation({\n            authToken: authToken,\n            setUserInfo: setAdminData\n        })\n    }, [])\n\n\n    return (\n        <div id=\"project-management-container\" className=\"sub-page-container\">\n\n            <Card className=\"main-card border-0\">\n                <Card.Header className=\" bg-dark text-white\">\n                    <div className=\"main-card-header-container\">\n                        <h3>{title}</h3>\n                        <div style={{ \"display\": \"flex\", \"flex-direction\": \"row\", \"margin-left\": \"auto\" }} >\n                            {/* Render the filters in the top of the card */}\n                            {filters ? filters.map((filter) => {\n                                return <div className=\"main-card-header-item\">{filter}</div>\n                            }) : ''}\n                            {/* Render the refresh button if no  */}\n                            {filters.length > 0 ?\n                                <Button className=\"bg-dark border-0\" onClick={() => {\n                                    BackButton({\n                                        setProjectSelected: setProjectSelected,\n                                        setFilters: setFilters,\n                                        filters: filters,\n                                        setFormSelected: setFormSelected,\n                                        setTitle: setTitle,\n\n                                    })\n                                }}>\n                                    <AiOutlineArrowLeft size={25} />\n                                </Button> :\n                                <Button className=\"bg-dark border-0\" onClick={() => {\n                                    history.push(\"/\")\n\n                                }\n                                }><AiOutlineArrowLeft size={25} /></Button>}\n                        </div>\n                    </div>\n\n\n                </Card.Header>\n\n                <Card.Body className=\"main-card-body\">\n                    <RenderProjectInformation data={adminData} setProjectSelected={setProjectSelected} filters={filters} setFilters={setFilters} setTitle={setTitle} />\n\n\n\n                </Card.Body>\n            </Card >\n        </div >\n    )\n}\n","// Copyright (C) 2022 Lo Gorman\n//\n// This file is part of rhomis-data-app.\n//\n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { useParams } from \"react-router-dom\";\nimport {\n  FetchUserInformation,\n  GetInformationForFormComponent,\n} from \"../fetching-context-info/fetching-context-info\";\nimport { Spinner } from \"react-bootstrap\";\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport {\n  Form,\n  Button,\n  Card,\n  Table,\n  CardGroup,\n  DropdownButton,\n  Dropdown,\n} from \"react-bootstrap\";\nimport axios from \"axios\";\nimport AuthContext from \"../authentication-component/AuthContext\";\nimport UserContext from \"../user-info-component/UserContext\";\nimport \"../project-management-component/project-management-component.css\";\nimport \"./form-management-component.css\"\nimport \"../../App.css\";\n\nimport { useHistory } from \"react-router\";\n\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\n\nimport QRCode from \"react-qr-code\";\nimport { deflateSync } from \"zlib\";\n\n// Generating a link to download the csv data\n\n// async function FinalizeForm(props) {\n\n//     console.log(\"Finalizing form\")\n\n//     const result = await axios({\n//         method: 'post',\n//         url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/forms/publish\",\n//         headers: {\n//             'Authorization': props.authToken\n//         },\n//         params: {\n//             form_name: props.form,\n//             project_name: props.project\n//         }\n//     })\n\n//     FetchUserInformation({\n//         authToken: props.authToken,\n//         setUserInfo: props.setAdminData\n//     })\n\n//     // console.log(\"Finalization response\")\n//     // console.log(result)\n\n// }\n\nfunction formatDate(date) {\n  var d = new Date(date),\n    month = \"\" + (d.getMonth() + 1),\n    day = \"\" + d.getDate(),\n    year = d.getFullYear();\n\n  if (month.length < 2) month = \"0\" + month;\n  if (day.length < 2) day = \"0\" + day;\n\n  return [day, month, year].join(\"/\");\n}\n\nfunction NoInfoFound() {\n  return (\n    <Table striped bordered hover>\n      <thead>\n        <tr>\n          <th>Form Name</th>\n          <th>Status</th>\n\n          <th>Created At</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td colSpan={3}>Forms Not Found</td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n}\n\nfunction FormTables(props) {\n  const history = useHistory();\n\n  let allowToFinalize = false;\n  if (!props.data) {\n    return <NoInfoFound />;\n  }\n  if (!props.data.user) {\n    return <NoInfoFound />;\n  }\n  if (!props.data.user.roles) {\n    return <NoInfoFound />;\n  }\n  if (props.data.user.roles.projectManager !== undefined) {\n    if (props.data.user.roles.projectManager.includes(props.projectSelected))\n      allowToFinalize = true;\n  }\n\n  let formsExist = false;\n\n  if (props.data.forms !== undefined) {\n    if (props.data.forms.length > 0) {\n      let formsForProject = props.data.forms.filter(\n        (form) => form.project === props.projectSelected\n      );\n      formsExist = formsForProject.length > 0;\n    }\n  }\n\n  return (\n    <Table striped bordered hover>\n        \n      <thead>\n        <tr>\n          <th>Form Name</th>\n          <th>Status</th>\n\n          <th>Created At</th>\n          <th>Submissions</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        {formsExist ? (\n          props.data.forms.map((form) => {\n            // let date = new Date(form.createdAt)\n            let dateString = formatDate(form.createdAt);\n            if (form.project === props.projectSelected) {\n              let disableButton = true;\n\n              let accessData = false;\n\n              if (allowToFinalize === false) {\n                disableButton = false;\n              }\n\n              if (form.draft) {\n                disableButton = false;\n              }\n\n              if (form.submissions > 0) {\n                accessData = true;\n              }\n\n              return (\n                <tr>\n                  <td style={{ \"vertical-align\": \"middle\" }}>{form.name}</td>\n                  <td style={{ \"vertical-align\": \"middle\" }}>\n                    {form.draft ? \"Draft\" : \"Finalized\"}\n                  </td>\n                  <td style={{ \"vertical-align\": \"middle\" }}>{dateString}</td>\n                  <td style={{ \"vertical-align\": \"middle\" }}>\n                    {props.submissionsLoading ? (\n                      <Spinner\n                        as=\"span\"\n                        animation=\"border\"\n                        size=\"sm\"\n                        role=\"status\"\n                        aria-hidden=\"true\"\n                      />\n                    ) : (\n                      form.submissions\n                    )}\n                  </td>\n\n                  <td style={{ \"text-align\": \"center\" }}>\n                    <DropdownButton\n                      title=\"Options\"\n                      variant=\"dark\"\n                      menuVariant=\"dark border-0\"\n                      drop=\"end\"\n                    >\n                      <Dropdown.Item\n                        className=\"dark text-white border-0\"\n                        onClick={() => {\n                          history.push(\n                            \"/projects/\" +\n                              props.projectSelected +\n                              \"/forms/\" +\n                              form.name +\n                              \"/collect\"\n                          );\n                        }}\n                      >\n                        Collect Data\n                      </Dropdown.Item>\n                     \n                           \n                      {/* <Dropdown.Item className=\"dark text-white border-0\"> */}\n                      {form.draft?\n                      <form\n                          method=\"post\"\n                          action={\"https://rhomis-survey.stats4sdtest.online/login\"}\n                          class=\"inline\"\n                        >\n                          <input\n                            type=\"hidden\"\n                            name=\"token\"\n                            value={props.authToken}\n                          />\n                          <input\n                            type=\"hidden\"\n                            name=\"redirect_url\"\n                            value={\"/xlsform/\"+form.name+\"/edit\"}\n                          />\n                      <button\n                            type=\"submit\"\n                            value=\"submit\"\n                            className=\"form-button\"\n                            \n                          >\n                            Edit Form\n                            </button>\n                            </form>:<></>}\n\n                      {/* </Dropdown.Item> */}\n\n\n                      <Dropdown.Item\n                        className=\"dark text-white border-0\"\n                        onClick={() => {\n                          history.push(\n                            \"/projects/\" +\n                              props.projectSelected +\n                              \"/forms/\" +\n                              form.name +\n                              \"/users\"\n                          );\n                        }}\n                      >\n                        Manage Users\n                      </Dropdown.Item>\n                      {accessData ? (\n                        <Dropdown.Item\n                          className=\"dark text-white border-0\"\n                          onClick={() => {\n                            history.push(\n                              \"/projects/\" +\n                                props.projectSelected +\n                                \"/forms/\" +\n                                form.name +\n                                \"/data\"\n                            );\n                          }}\n                        >\n                          Access Data\n                        </Dropdown.Item>\n                      ) : (\n                        <></>\n                      )}\n                    </DropdownButton>\n                  </td>\n                </tr>\n              );\n            }\n          })\n        ) : (\n          <>\n            <tr>\n              <td style={{ \"text-align\": \"center\" }} colSpan={5}>\n                No forms created yet\n              </td>\n            </tr>\n          </>\n        )}\n        {/* <tr><td style={{ \"text-align\": \"center\" }} colSpan={5}><a href=\"https://rhomis-survey.stats4sdtest.online\"><Button >Start Creating a Survey</Button></a></td></tr></>} */}\n      </tbody>\n    </Table>\n  );\n}\n\nfunction RenderProjectAdmin(props) {\n  let renderUserForm = false;\n\n  const [newUser, setNewUser] = useState(\"\");\n\n  if (!props.data) {\n    return <NoInfoFound />;\n  }\n  if (!props.data.user) {\n    return <NoInfoFound />;\n  }\n  if (!props.data.user.roles) {\n    return <NoInfoFound />;\n  }\n\n  if (props.data.user.roles.projectManager !== undefined) {\n    if (props.data.user.roles.projectManager.includes(props.projectSelected))\n      renderUserForm = true;\n  }\n\n  return (\n    <>\n      <Card className=\"project-management-card\">\n        <Card.Header as=\"h5\">Select a Form</Card.Header>\n        <Card.Body>\n          {/* <Card.Title>Special title treatment</Card.Title> */}\n          <FormTables\n            submissionsLoading={props.submissionsLoading}\n            projectSelected={props.projectSelected}\n            authToken={props.authToken}\n            setAdminData={props.setAdminData}\n            data={props.data}\n            filters={props.filters}\n            setFilters={props.setFilters}\n            setFormSelected={props.setFormSelected}\n          />\n        </Card.Body>\n      </Card>\n    </>\n  );\n}\n\nfunction FormManagementComponent() {\n  // const { projectName } = useParams()\n\n  const history = useHistory();\n  const projectSelected = useParams().projectName;\n  const [authToken, setAuthToken] = useContext(AuthContext);\n  const [adminData, setAdminData] = useContext(UserContext);\n\n  const [submissionsLoading, setSubmissionLoading] = useState(true);\n\n  const [formData, setFormData] = useState();\n\n  console.log(\"admin data\");\n  console.log(adminData);\n\n  const [formSelected, setFormSelected] = useState(null);\n  const [filters, setFilters] = useState(null);\n  const data = null;\n\n  useEffect(() => {\n    console.log('projectSelected:  ' + projectSelected)\n\n    async function GetUserInfo() {\n      await FetchUserInformation({\n        authToken: authToken,\n        setUserInfo: setAdminData,\n        getSubmissionCount: true,\n        projectName: projectSelected\n      });\n\n      setSubmissionLoading(false);\n    }\n\n    GetUserInfo();\n  }, []);\n\n  // useEffect(() => {\n  //     console.log(\"Form Data\")\n  //     console.log(formData)\n\n  // }, [formData])\n\n  return (\n    <div id=\"project-management-container\" className=\"sub-page-container\">\n      <Card className=\"main-card border-0\">\n        <Card.Header className=\" bg-dark text-white\">\n          <div className=\"main-card-header-container\">\n            <h3>Form Overview</h3>\n            <div\n              style={{\n                display: \"flex\",\n                \"flex-direction\": \"row\",\n                \"margin-left\": \"auto\",\n              }}\n            >\n              <div className=\"main-card-header-item\">{projectSelected}</div>\n              <Button\n                className=\"bg-dark border-0\"\n                onClick={() => {\n                  history.push(\"/projects\");\n                }}\n              >\n                <AiOutlineArrowLeft size={25} />\n              </Button>\n            </div>\n          </div>\n        </Card.Header>\n        <Card.Body className=\"main-card-body\">\n          <RenderProjectAdmin\n            authToken={authToken}\n            projectSelected={projectSelected}\n            formSelected={formSelected}\n            setAdminData={setAdminData}\n            data={adminData}\n            setFormSelected={setFormSelected}\n            filters={filters}\n            setFilters={setFilters}\n            submissionsLoading={submissionsLoading}\n          />\n        </Card.Body>\n      </Card>\n    </div>\n  );\n}\n\nexport default FormManagementComponent;\n","import React, { useContext, useState, useEffect } from 'react'\nimport { Container, Navbar, Nav, Offcanvas, Button } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport AuthContext from '../authentication-component/AuthContext';\nimport { MdOutlineMenu } from 'react-icons/md'\n\nimport axios from 'axios';\n\nimport './navigation-bar-component.css'\n/*\nSetting up a standard react navbar to navigation component. Please\nnote that if you want to maintain state or context between routes,\nyou must use the 'react-router-dom' \"link\". I have integrated\nthis with the Nav.Link component\n*/\n\n\nasync function GetAdminData(props) {\n\n    const result = await axios({\n        method: 'get',\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/meta-data\",\n        headers: {\n            'Authorization': props.authToken\n        }\n    })\n\n    if (result.status === 200) {\n        if (result.data.projects.length > 0) {\n            props.setShowProjectManagement(true)\n        }\n        if (result.data.user.roles.administrator === true) {\n            props.setShowAdmin(true)\n        }\n        if (result.data.user.roles.dataCollector.length > 0) {\n            props.setShowCollectData(true)\n        }\n    }\n    if (result.status === 400) {\n        alert(result.data)\n    }\n}\n\n\n\n\n\nexport default function MainNavbar(props) {\n    // props.Logout()\n    const [authToken, setAuthToken] = useContext(AuthContext)\n    const [show, setShow] = useState(false)\n\n    const handleClose = () => setShow(false);\n    const handleShow = async () => setShow(true);\n    const [showAdmin, setShowAdmin] = useState(false)\n    const [showCollectData, setShowCollectData] = useState(false)\n    const [showProjectManagement, setShowProjectManagement] = useState(false)\n\n    useEffect(async () => {\n        await GetAdminData({\n            authToken: authToken,\n            setShowAdmin: setShowAdmin,\n            setShowCollectData: setShowCollectData,\n            setShowProjectManagement: setShowProjectManagement,\n        })\n\n    }, [])\n\n\n\n\n    return (\n        <>\n            <Navbar fixed=\"top\" bg=\"dark\" variant=\"dark\" expand=\"false\">\n                {/* <Container fluid> */}\n\n                <div className=\"menu-button\" onClick={handleShow}><MdOutlineMenu className=\"menu-button-icon\" size={30} /></div>\n                <h2 style={{ \"color\": \"white\" }}>RHoMIS</h2>\n                <Nav.Link className=\"logout-button\" as={Link} to=\"/login\" onClick={() => {\n                    setAuthToken(null)\n                    localStorage.clear()\n                }} >Logout</Nav.Link>\n\n\n\n                <Offcanvas\n                    backdrop=\"true\"\n                    style={{ \"background-color\": \"#212529\", \"width\": \"25%\" }}\n                    id=\"offcanvasNavbar\"\n                    aria-labelledby=\"offcanvasNavbarLabel\"\n                    placement=\"start\"\n                    show={show}\n                    onHide={handleClose}\n\n                >\n\n                    <Offcanvas.Header closeVariant=\"white\" closeButton style={{ \"color\": \"white\", \"background-color\": \"#212529\" }}>\n                        <Offcanvas.Title id=\"offcanvasNavbarLabel\"><h2 style={{ \"padding-left\": \"20px\" }}>Dashboard</h2></Offcanvas.Title>\n                    </Offcanvas.Header>\n                    <div className=\"side-bar-container\">\n\n                        <div className=\"side-bar-item\">\n                            <Nav.Link className=\"side-bar-link\" as={Link} onClick={() => { handleClose() }} to=\"/\">Portal</Nav.Link>\n                        </div>\n                        <div className=\"side-bar-item\">\n                            <form style={{ \"width\": \"100%\" }} method=\"post\" action={process.env.REACT_APP_SURVEY_BUILDER_URL} class=\"inline\">\n                                <input type=\"hidden\" name=\"token\" value={authToken} />\n                                <input type=\"hidden\" name=\"redirect_url\" value=\"/admin/xlsform/create\" />\n                                <input className=\"form-link\" type=\"submit\" value=\"Build a Survey\"\n                                />\n                            </form>\n                        </div>\n\n                        {showProjectManagement ? <div className=\"side-bar-item\">\n                            <Nav.Link className=\"side-bar-link\" as={Link} onClick={() => { handleClose() }} to=\"/projects\">Manage Projects</Nav.Link>\n                        </div> : <></>}\n\n\n\n\n\n                        {showAdmin ? <div className=\"side-bar-item\">\n                            <Nav.Link className=\"side-bar-link\" as={Link} onClick={() => {\n                                handleClose()\n\n                            }} to=\"/administration\">Administration</Nav.Link>\n                        </div> : <></>}\n                        <div className=\"side-bar-item\">\n                            <Nav.Link className=\"side-bar-link\" as={Link} to=\"/login\" onClick={() => {\n                                setAuthToken(null)\n                                localStorage.clear()\n                            }} >Logout</Nav.Link>\n                        </div>\n                    </div>\n\n                </Offcanvas>\n\n            </Navbar >\n\n\n\n\n        </>\n\n    )\n}\n\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState, useEffect, useContext } from 'react'\nimport { Card, Form, Accordion, Button, Table, Row, Col } from 'react-bootstrap'\n\nimport './form-creation-component.css'\nimport '../../App.css'\n\nimport axios from 'axios'\n\nimport AuthContext from '../authentication-component/AuthContext'\n\nasync function GetProjectInformation(props) {\n    console.log(\"authToken: \", props.authToken)\n    const result = await axios({\n        method: 'post',\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/meta-data\",\n        headers: {\n            'Authorization': props.authToken\n        }\n    })\n\n    console.log(\"response: \")\n    console.log(result)\n    if (result.status === 200) {\n        console.log(\"Setting project information\")\n        console.log(result.data)\n        props.setProjectInformation(result.data)\n\n    }\n    if (result.status === 400) {\n        alert(result.data)\n    }\n}\n\nasync function CreateProject(authToken, projectName, projectDescription) {\n    console.log(projectName)\n    console.log(authToken)\n\n    // Create project\n    const projectCreationResponse = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/projects/create\",\n        data: {\n            name: projectName,\n            description: projectDescription\n        },\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    return (projectCreationResponse)\n}\n\nasync function DeleteProject(authToken, projectName) {\n    console.log(projectName)\n    console.log(authToken)\n\n    // Create project\n    const projectCreationResponse = await axios({\n        method: \"delete\",\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/projects/delete\",\n        data: {\n            name: projectName\n        },\n        headers: {\n            'Authorization': authToken\n        }\n    })\n\n    return (projectCreationResponse)\n}\n\n\nasync function CreateForm(authToken, projectName, formName, formVersion, formFile) {\n    console.log(projectName)\n    console.log(process.env.REACT_APP_AUTHENTICATOR_URL + 'api/forms/new?form_name=' + formName + '&form_version=' + formVersion + '&project_name=' + projectName + '&publish=false')\n\n\n    // Create form\n    const formCreationResponse = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + 'api/forms/new?form_name=' + formName + '&form_version=' + formVersion + '&project_name=' + projectName + '&publish=false',\n        data: formFile,\n        headers: {\n            'Authorization': authToken,\n            'Content-Type': \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        }\n    })\n    return (formCreationResponse)\n\n\n\n\n}\n\nasync function UpdateForm(authToken, projectName, formName, formVersion, formFile) {\n\n\n    // Create form\n    const formCreationResponse = await axios({\n        method: \"post\",\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + 'api/forms/new-draft?form_name=' + formName + '&form_version=' + formVersion + '&project_name=' + projectName + '&publish=false',\n        data: formFile,\n        headers: {\n            'Authorization': authToken,\n            'Content-Type': \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        }\n    })\n    return (formCreationResponse)\n}\n\n\n\nfunction CreateProjectForm(props) {\n    return (\n        <>\n            <Form>\n                <Form.Group>\n                    <Form.Label>Project Name</Form.Label>\n                    <Form.Control type=\"text\" onChange={(event) => {\n                        props.setNewProjectName(event.target.value)\n                    }} />\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>Project Description</Form.Label>\n                    <Form.Control as=\"textarea\" rows={3} onChange={(event) => {\n                        props.setNewProjectDescription(event.target.value)\n                    }} />\n                </Form.Group>\n\n            </Form>\n            <Button style={{ \"text-align\": \"right\" }} onClick={async () => {\n                await CreateProject(props.authToken, props.newProjectName, props.newProjectDescription)\n                await props.GetProjectInformation({ authToken: props.authToken, setProjectInformation: props.setProjectInformation })\n\n\n            }}>Add project</Button>\n        </>\n    )\n}\n\nfunction NewFormEntry(props) {\n\n    console.log(props.data)\n    let projectList = [\"No Projects\"]\n    let disabled = true\n\n    if (props.data !== undefined & props.data !== null) {\n        if (props.data.projects !== undefined) {\n            projectList = props.data.projects.map((project) => {\n                return project.name\n            })\n            disabled = false\n        }\n\n        if (props.data.projects.length === 0) {\n            projectList = [\"No Projects\"]\n            disabled = true\n\n        }\n    }\n    console.log(projectList)\n\n    return (\n        <>\n            <Form>\n                <Form.Group>\n                    <Form.Label>\n                        Select a Project\n                    </Form.Label>\n                    <Form.Select defaultValue=\"Select a Project\" onChange={(event) => { props.setSelectedProject(event.target.value) }} disabled={disabled} aria-label=\"Default select example\">\n                        <option disabled={true}>Select a Project</option>\n                        {projectList.map((option) => {\n                            return <option>{option}</option>\n                        })}\n                    </Form.Select>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Label>\n                        Enter the name of the form\n                    </Form.Label>\n                    <Form.Control onChange={(event) => { props.setNewFormName(event.target.value) }} />\n                    <Form.Text>This must match the \"form_title\" field in your xlsx form settings</Form.Text>\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>\n                        Enter the form version\n                    </Form.Label>\n                    <Form.Control onChange={(event) => { props.setNewFormVersion(event.target.value) }} />\n\n\n                    <Form.Text>This must match the \"version\" field in your xlsx settings tab</Form.Text>\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>\n                        Select your file\n                    </Form.Label>\n                    <Form.Control type=\"file\" size=\"lg\" onChange={(e) => props.setSelectedFile(e.target.files[0])} />\n\n                </Form.Group>\n                <Button onClick={async () => {\n                    await CreateForm(props.authToken, props.selectedProject, props.newFormName, props.newFormVersion, props.selectedFile)\n                    await props.GetProjectInformation({ authToken: props.authToken, setProjectInformation: props.setProjectInformation })\n\n                }}>Submit</Button>\n            </Form>\n        </>\n    )\n}\n\n\nfunction NewDraftFormEntry(props) {\n    console.log(\"Draft form data\")\n\n    const [formList, setFormList] = useState([])\n\n    console.log(props.data)\n    let projectList = [\"No Projects\"]\n    let projectDisabled = true\n\n    if (props.data !== undefined & props.data !== null) {\n        if (props.data.projects !== undefined) {\n            projectList = props.data.projects.map((project) => {\n                return project.name\n            })\n            projectDisabled = false\n        }\n\n        if (props.data.projects.length === 0) {\n            projectList = [\"No Projects\"]\n            projectDisabled = true\n\n        }\n    }\n    console.log(projectList)\n\n    console.log(props.data)\n\n\n    return (\n        <>\n            <Form>\n                <Form.Group>\n                    <Form.Label>\n                        Select the form you would like to update\n                    </Form.Label>\n                    <Form.Select defaultValue=\"Select a Project\" onChange={(event) => {\n\n                        props.setSelectedDraftProject(event.target.value)\n\n                        const newFormList = []\n                        if (props.data !== undefined & props.data !== null) {\n                            if (props.data.forms !== undefined) {\n                                props.data.forms.map((form) => {\n                                    if (form.project === event.target.value) {\n                                        newFormList.push(form.name)\n                                    }\n                                })\n                                setFormList(newFormList)\n                            }\n\n                            if (props.data.projects.length === 0) {\n                                setFormList([])\n                            }\n                        }\n                    }\n                    } disabled={projectDisabled} aria-label=\"Default select example\">\n                        <option disabled={true}>Select a Project</option>\n                        {projectList.map((option) => {\n                            return <option>{option}</option>\n                        })}\n                    </Form.Select>\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>\n                        Select the form you would like to update\n                    </Form.Label>\n                    <Form.Select defaultValue=\"Select a form\" onChange={(event) => {\n                        props.setNewDraftFormName(event.target.value)\n                    }\n                    } aria-label=\"Default select example\">\n                        <option disabled={true}>Select a form</option>\n                        {formList.map((option) => {\n                            return <option>{option}</option>\n                        })}\n                    </Form.Select>\n                </Form.Group>\n\n\n                <Form.Group>\n                    <Form.Label>\n                        Enter the new form version\n                    </Form.Label>\n                    <Form.Control onChange={(event) => { props.setNewDraftFormVersion(event.target.value) }} />\n\n\n                    <Form.Text>This must match the \"version\" field in your xlsx settings tab, please ensure it is different to the previous version</Form.Text>\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>\n                        Select your file\n                    </Form.Label>\n                    <Form.Control type=\"file\" size=\"lg\" onChange={(e) => props.setSelectedDraftFile(e.target.files[0])} />\n\n                </Form.Group>\n                <Button onClick={async () => {\n                    await UpdateForm(props.authToken, props.selectedDraftProject, props.newDraftFormName, props.newDraftFormVersion, props.selectedDraftFile)\n                    await props.GetProjectInformation({ authToken: props.authToken, setProjectInformation: props.setProjectInformation })\n                }}>Submit</Button>\n            </Form>\n        </>\n    )\n}\n\n\nfunction FinalizeFormEntry(props) {\n\n\n    console.log(\"Draft form data\")\n\n    const [formList, setFormList] = useState([])\n\n\n    console.log(props.data)\n    let projectList = [\"No Projects\"]\n    let projectDisabled = true\n\n    if (props.data !== undefined & props.data !== null) {\n        if (props.data.projects !== undefined) {\n            projectList = props.data.projects.map((project) => {\n                return project.name\n            })\n            projectDisabled = false\n        }\n\n        if (props.data.projects.length === 0) {\n            projectList = [\"No Projects\"]\n            projectDisabled = true\n\n        }\n    }\n    console.log(projectList)\n\n    console.log(props.data)\n\n\n    return (\n        <>\n            <Form>\n                <Form.Group>\n                    <Form.Label>\n                        Select a project\n                    </Form.Label>\n                    <Form.Select defaultValue=\"Select a Project\" onChange={(event) => {\n\n                        props.setSelectedDraftProject(event.target.value)\n\n                        const newFormList = []\n                        if (props.data !== undefined & props.data !== null) {\n                            if (props.data.forms !== undefined) {\n                                props.data.forms.map((form) => {\n                                    if (form.project === event.target.value) {\n                                        newFormList.push(form.name)\n                                    }\n                                })\n                                setFormList(newFormList)\n                            }\n\n                            if (props.data.projects.length === 0) {\n                                setFormList([])\n                            }\n                        }\n                    }\n                    } disabled={projectDisabled} aria-label=\"Default select example\">\n                        <option disabled={true}>Select a Project</option>\n                        {projectList.map((option) => {\n                            return <option>{option}</option>\n                        })}\n                    </Form.Select>\n                </Form.Group>\n\n                <Form.Group>\n                    <Form.Label>\n                        Select the form you would like to finalize\n                    </Form.Label>\n                    <Form.Select defaultValue=\"Select a form\" onChange={(event) => {\n                        console.log(\"Form name seleceted\")\n                        console.log(event.target.value)\n                        props.setNewDraftFormName(event.target.value)\n                    }\n                    } aria-label=\"Default select example\">\n                        <option disabled={true}>Select a form</option>\n                        {formList.map((option) => {\n                            return <option>{option}</option>\n                        })}\n                    </Form.Select>\n                </Form.Group>\n\n\n                <Button onClick={async () => {\n                    await FinalizeForm({\n                        authToken: props.authToken,\n                        project: props.selectedDraftProject,\n                        form: props.newDraftFormName\n                    })\n                    await props.GetProjectInformation({ authToken: props.authToken, setProjectInformation: props.setProjectInformation })\n                }}>Finalise</Button>\n            </Form>\n        </>\n    )\n}\n\n\nasync function FinalizeForm(props) {\n\n    console.log(\"Finalizing form\")\n    console.log(props)\n    const result = await axios({\n        method: 'post',\n        url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/forms/publish\",\n        headers: {\n            'Authorization': props.authToken\n        },\n        params: {\n            form_name: props.form,\n            project_name: props.project\n        }\n    })\n\n\n\n\n\n}\n\nfunction RenderProjectInformation(props) {\n\n    console.log(props)\n    if (!props.data) {\n        return (\n            <div>\n                <Table>\n                    <thead key=\"table-header\">\n                        <tr key=\"table-row-1\">\n                            <th key=\"table-head-item-1\">#</th>\n\n                            <th key=\"table-head-item-2\">Project Name</th>\n                            <th key=\"table-head-item-3\">Description</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td colSpan={3}>No projects found</td>\n                        </tr>\n\n                    </tbody>\n\n                </Table>\n            </div>\n        )\n    }\n\n\n    if (props.data.projects !== undefined) {\n        return (\n            <div>\n                <Table>\n                    <thead key=\"table-header\">\n                        <tr key=\"table-row-1\">\n                            <th key=\"table-head-item-1\">#</th>\n\n                            <th key=\"table-head-item-2\">Project Name</th>\n                            <th key=\"table-head-item-3\">Description</th>\n                        </tr>\n                    </thead>\n                    <tbody key=\"table-body\">\n                        {props.data.projects.map((project, index) => {\n                            return (\n                                <tr key={\"table-row-\" + index}>\n                                    <td key={\"table-row-\" + index + \"-item-1\"}><Button variant=\"danger\" onClick={async () => {\n                                        await DeleteProject(props.authToken, project.name)\n\n                                    }}>Delete</Button></td>\n\n                                    <td key={\"table-row-\" + index + \"-item-2\"}>{project.name}</td>\n                                    <td key={\"table-row-\" + index + \"-item-3\"}>{project.description}</td>\n                                </tr>\n                            )\n\n                        })}\n\n                    </tbody>\n                </Table>\n            </div>\n\n\n        )\n    }\n\n}\n\n\nasync function AddAdministrator(props) {\n\n    try {\n\n        const result = await axios({\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/admin\",\n            method: \"post\",\n            headers: {\n                Authorization: props.authToken\n            },\n            data: {\n                email: props.newAdmin\n            }\n        })\n\n        console.log(result)\n\n        return (result.data)\n    } catch (err) {\n\n    }\n\n}\n\nexport default function FormCreationComponent() {\n\n\n\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    const [projectInformation, setProjectInformation] = useState(null)\n\n    const [newProjectName, setNewProjectName] = useState(null)\n    const [newProjectDescription, setNewProjectDescription] = useState(null)\n\n    const [selectedProject, setSelectedProject] = useState(null)\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [newFormName, setNewFormName] = useState(null);\n    const [newFormVersion, setNewFormVersion] = useState(null);\n\n\n    const [selectedDraftProject, setSelectedDraftProject] = useState(null);\n    const [selectedDraftFile, setSelectedDraftFile] = useState(null);\n    const [newDraftFormName, setNewDraftFormName] = useState(null);\n    const [newDraftFormVersion, setNewDraftFormVersion] = useState(null);\n\n\n    const [newAdmin, setNewAdmin] = useState(null)\n\n    useEffect(() => {\n\n\n        async function GetUserInfo() {\n        await GetProjectInformation({ authToken: authToken, setProjectInformation: setProjectInformation })\n        // const response = await FetchUserInformation({\n        //     authToken: authToken,\n        //     setUserInfo: setAdminData\n        // })\n\n\n    }\n\n    GetUserInfo()\n    }, [])\n\n\n    return (\n        <div id=\"project-management-container\" className=\"sub-page-container\">\n\n            <Card className=\"main-card border-0\">\n                <Card.Header className=\" bg-dark text-white\"><h3>Creating Forms/Projects</h3></Card.Header>\n                <Card.Body>\n                    <Accordion defaultActiveKey=\"0\">\n                        <Accordion.Item eventKey=\"0\">\n                            <Accordion.Header>Projects</Accordion.Header>\n                            <Accordion.Body>\n                                <RenderProjectInformation\n                                    GetProjectInformation={GetProjectInformation}\n                                    setProjectInformation={setProjectInformation}\n                                    data={projectInformation}\n                                    authToken={authToken} /></Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"1\">\n                            <Accordion.Header>Create a Project</Accordion.Header>\n                            <Accordion.Body>\n                                <CreateProjectForm\n\n                                    GetProjectInformation={GetProjectInformation}\n                                    setProjectInformation={setProjectInformation}\n                                    newProjectName={newProjectName}\n                                    setNewProjectName={setNewProjectName}\n                                    newProjectDescription={newProjectDescription}\n                                    setNewProjectDescription={setNewProjectDescription}\n                                    authToken={authToken} /></Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"2\">\n                            <Accordion.Header>Create a Form</Accordion.Header>\n                            <Accordion.Body>\n                                <NewFormEntry\n                                    GetProjectInformation={GetProjectInformation}\n                                    setProjectInformation={setProjectInformation}\n                                    authToken={authToken}\n                                    data={projectInformation}\n                                    selectedFile={selectedFile}\n                                    setSelectedFile={setSelectedFile}\n                                    setNewFormName={setNewFormName}\n                                    newFormName={newFormName}\n                                    setNewFormVersion={setNewFormVersion}\n                                    newFormVersion={newFormVersion}\n                                    setSelectedProject={setSelectedProject}\n                                    selectedProject={selectedProject} />\n                            </Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"3\">\n                            <Accordion.Header>Update Draft Form</Accordion.Header>\n                            <Accordion.Body>\n                                <NewDraftFormEntry\n                                    GetProjectInformation={GetProjectInformation}\n                                    setProjectInformation={setProjectInformation}\n                                    authToken={authToken}\n                                    data={projectInformation}\n                                    selectedDraftFile={selectedDraftFile}\n                                    setSelectedDraftFile={setSelectedDraftFile}\n                                    setNewDraftFormName={setNewDraftFormName}\n                                    newDraftFormName={newDraftFormName}\n                                    setNewDraftFormVersion={setNewDraftFormVersion}\n                                    newDraftFormVersion={newDraftFormVersion}\n                                    setSelectedDraftProject={setSelectedDraftProject}\n                                    selectedDraftProject={selectedDraftProject} />\n                            </Accordion.Body>\n                        </Accordion.Item>\n\n                        <Accordion.Item eventKey=\"4\">\n                            <Accordion.Header>Finalize a Form</Accordion.Header>\n                            <Accordion.Body>\n                                <FinalizeFormEntry\n                                    GetProjectInformation={GetProjectInformation}\n                                    setProjectInformation={setProjectInformation}\n                                    authToken={authToken}\n                                    data={projectInformation}\n                                    setSelectedDraftProject={setSelectedDraftProject}\n                                    selectedDraftProject={selectedDraftProject}\n                                    setNewDraftFormName={setNewDraftFormName}\n                                    newDraftFormName={newDraftFormName}\n                                />\n                            </Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"5\">\n                            <Accordion.Header>Add Administrator</Accordion.Header>\n                            <Accordion.Body>\n                                <Form>\n                                    <Row >\n                                        <Col md=\"4\">\n                                            <Form.Group >\n                                                <Form.Label>User Email</Form.Label>\n                                                <Form.Control type=\"email\" onChange={(event) => {\n                                                    setNewAdmin(event.target.value)\n\n                                                }} />\n\n                                                <Button className=\"border-0 bg-dark\" style={{ \"marginTop\": \"10px\" }}\n                                                    onClick={async () => {\n                                                        AddAdministrator({\n                                                            authToken: authToken,\n                                                            newAdmin: newAdmin\n                                                        })\n                                                    }}>Add User</Button>\n\n                                            </Form.Group>\n                                        </Col>\n                                    </Row>\n                                </Form>\n\n\n                            </Accordion.Body>\n                        </Accordion.Item>\n\n\n\n\n                    </Accordion>\n\n                </Card.Body>\n            </Card>\n        </div >\n    )\n}\n","import React, { useState, useContext, useEffect } from 'react'\nimport { Card, Button, Spinner } from 'react-bootstrap'\nimport { useParams, useHistory } from 'react-router-dom'\n\nimport AuthContext from '../authentication-component/AuthContext'\nimport UserContext from '../user-info-component/UserContext'\n\nimport { GetInformationForFormComponent, Set } from '../fetching-context-info/fetching-context-info'\n\nimport { FetchUserInformation } from '../fetching-context-info/fetching-context-info'\nimport { AiOutlineArrowLeft } from 'react-icons/ai'\n\nimport QRCode from 'react-qr-code'\nimport { deflateSync } from 'zlib'\n\nimport axios from 'axios'\n\n\nasync function ProcessData(props) {\n    console.log(props)\n    const form = props.data.forms.filter((item) => item.name === props.formSelected && item.project === props.projectSelected)[0]\n    const result = await axios({\n        method: 'post',\n        url: process.env.REACT_APP_API_URL + \"api/process-data\",\n        headers: {\n            'Authorization': props.authToken\n        },\n        data: {\n            commandType: props.commandType,\n            projectName: props.projectSelected,\n            formName: props.formSelected,\n            formVersion: form.formVersion,\n            draft: props.draft,\n        }\n    })\n    return (result)\n}\n\nfunction SetInitialFormState(props) {\n\n    // Check if the form code in the URL is correct\n    function CheckFormCode(props) {\n        if (!props.data) {\n            return false\n        }\n        if (!props.data.forms) {\n            return false\n        }\n        let form = props.data.forms.filter((item) => item.name === props.formSelected & item.project === props.projectSelected)\n        if (form.length === 1) {\n            return true\n        }\n        return (false)\n    }\n\n    // Check if the user is a project manager\n    function CheckProjectManager(props) {\n\n\n        if (!props.data) {\n            return false\n        }\n        if (!props.data.user) {\n            return false\n        }\n\n        if (!props.data.user.roles) {\n            return false\n        }\n\n        if (!props.data.user.roles.projectManager) {\n            return false\n        }\n\n        if (props.data.user.roles.projectManager.includes(props.projectSelected)) {\n            return true\n        }\n\n\n        return false\n\n    }\n\n    // Check if the ODK configuration details are included\n    function CheckODKConf(props) {\n\n        if (!props.data) {\n            return false\n        }\n\n        if (!props.data.forms) {\n            return false\n        }\n        let form = props.data.forms.filter((item) => item.name === props.formSelected && item.project === props.projectSelected)\n        if (form.length !== 1) {\n            return false\n        }\n\n        if (form[0].draft === true) {\n            return form[0].draftCollectionDetails\n\n        }\n        if (form[0].draft === false) {\n            return form[0].collectionDetails\n        }\n\n\n        return false\n    }\n\n    // Check if the encoded ODK settings exist\n    function CheckEncodedSettings(props) {\n\n        if (!props.data) {\n            return false\n        }\n\n        if (!props.data.forms) {\n            return false\n        }\n        let form = props.data.forms.filter((item) => item.name === props.formSelected && item.project === props.projectSelected)\n\n        if (form.length !== 1) {\n            return false\n        }\n\n        if (form[0].draft === true) {\n            let odkConf = form[0].draftCollectionDetails\n            return deflateSync(JSON.stringify(odkConf)).toString('base64')\n\n        }\n        if (form[0].draft === false) {\n            let odkConf = form[0].collectionDetails\n            return deflateSync(JSON.stringify(odkConf)).toString('base64')\n        }\n\n\n        return false\n\n    }\n\n    // Check if the form is a draft\n    function CheckDraft(props) {\n\n        if (!props.data) {\n            return false\n        }\n\n        if (!props.data.forms) {\n            return false\n        }\n        let form = props.data.forms.filter((item) => item.name === props.formSelected && item.project === props.projectSelected)\n\n        if (form.length !== 1) {\n            return false\n        }\n\n        if (form[0].draft === true) {\n            return true\n\n        }\n        if (form[0].draft === false) {\n            return false\n        }\n        return false\n\n    }\n\n    // Check if a code for the form should be rendered\n\n    const renderODKFormCode = CheckFormCode({\n        data: props.data,\n        formSelected: props.formSelected,\n        projectSelected: props.projectSelected\n    })\n\n\n    const projectManagerOfForm = CheckProjectManager({\n        data: props.data,\n        projectSelected: props.projectSelected\n    })\n\n\n    const odkConf = CheckODKConf({\n        data: props.data,\n        projectSelected: props.projectSelected,\n        formSelected: props.formSelected\n    })\n\n    const encoded_settings = CheckEncodedSettings({\n        data: props.data,\n        projectSelected: props.projectSelected,\n        formSelected: props.formSelected\n    })\n\n    const draft = CheckDraft({\n        data: props.data,\n        projectSelected: props.projectSelected,\n        formSelected: props.formSelected\n    })\n\n    // Need to add data collecter as an option\n    const stateToReturn = {\n        renderODKFormCode: renderODKFormCode,\n        projectManagerOfForm: projectManagerOfForm,\n        odkConf: odkConf,\n        encoded_settings: encoded_settings,\n        draft: draft\n    }\n    return stateToReturn\n}\n\n\n\n\n\nfunction CardBody(props) {\n    console.log(props)\n\n    return (\n        <>\n            <ol>\n                <li><a href='https://docs.getodk.org/collect-install/' target=\"_blank\">Install ODK</a></li>\n                <li>Open the ODK app</li>\n                <li>Scan this QR code</li>\n            </ol>\n            <div className=\"qr-code-container\">\n\n                {props.formState.encoded_settings ? <QRCode value={props.formState.encoded_settings} /> : <Spinner\n                    as=\"span\"\n                    animation=\"border\"\n                    size=\"100px\"\n                    role=\"status\"\n                    aria-hidden=\"true\"\n                />}\n\n            </div>\n\n\n            {\n                props.formState.draft ? <>\n\n                    <br />\n\n\n                    < br />\n                    <Button className=\"bg-dark border-0\" style={{ \"margin\": \"10px\" }}\n                        onClick={async () => {\n                            await ProcessData({\n                                commandType: \"generate\",\n                                draft: props.formState.draft,\n                                authToken: props.authToken,\n                                data: props.data,\n                                formSelected: props.formSelected,\n                                projectSelected: props.projectSelected\n                            })\n                            console.log(\"Finished Generating Data\")\n                        }}\n\n                    >Generate Mock Submissions</Button>\n\n                    <br />\n                    <p>*Your form is currently saved as a draft. Any submissions you make\n                        will be removed once the form is finalised. Mock submissions are a useful way to see what your\n                        data might look like, they will also be deleted once you finalise the form* </p>\n                </>\n                    : <></>\n            }\n\n\n        </>\n    )\n\n}\n\n\n\n\nexport default function DataCollectionComponent() {\n\n    const projectSelected = useParams().projectName\n    const formSelected = useParams().formName\n\n    const [renderInstallCode, setRenderInstallCode] = useState(false)\n    const [renderODKFormCode, setRenderODKFormCode] = useState(true)\n\n    const [authToken, setAuthToken] = useContext(AuthContext)\n    const [adminData, setAdminData] = useContext(UserContext)\n\n    const history = useHistory()\n\n    const [initialState, setInitialState] = useState({\n        renderODKFormCode: false,\n        projectManagerOfForm: false,\n        dataAnalystOfForm: false,\n        odkConf: false,\n        encoded_settings: false,\n        draft: false,\n        data:{\n            forms:[],\n            users:[],\n            projects:[]\n        }\n    })\n\n\n\n    useEffect(() => {\n\n        async function FetchUserInfo(){\n            await FetchUserInformation({\n                authToken: authToken,\n                setUserInfo: setAdminData\n            })\n        }\n\n        FetchUserInfo()\n        \n    }, [])\n\n    useEffect(() => {\n        const new_form_state = SetInitialFormState({\n            data: adminData,\n            formSelected: formSelected,\n            projectSelected: projectSelected\n        })\n\n        console.log(\"Setting initial state\")\n        console.log(new_form_state)\n        console.log(adminData)\n\n        setInitialState(new_form_state)\n\n\n    }, [adminData])\n\n    return (\n        <div id=\"project-management-container\" className=\"sub-page-container\">\n\n            <Card className=\"main-card border-0\">\n                <Card.Header className=\" bg-dark text-white\">\n                    <div className=\"main-card-header-container\">\n                        <h3>Collect Data</h3>\n\n                        <div style={{ \"display\": \"flex\", \"flex-direction\": \"row\", \"margin-left\": \"auto\" }} >\n                            <div className=\"main-card-header-item\">{projectSelected}</div>\n                            <div className=\"main-card-header-item\">{formSelected}</div>\n\n                            <Button className=\"bg-dark border-0\" onClick={() => {\n                                history.push(\"/projects/\" + projectSelected)\n\n                            }}>\n                                <AiOutlineArrowLeft size={25} />\n                            </Button>\n                        </div>\n                    </div>\n\n                </Card.Header>\n                <Card.Body className=\"main-card-body\">\n\n\n\n                    <CardBody formState={initialState} \n                    data={adminData}\n                    authToken={authToken}\n                    formSelected={formSelected}\n                    projectSelected={projectSelected}/>\n\n                </Card.Body>\n            </Card>\n        </div >\n\n    )\n}\n","import React, { useState, useContext, useEffect } from \"react\";\nimport {\n  Card,\n  Button,\n  Nav,\n  Accordion,\n  Table,\n  Spinner,\n  Form,\n  InputGroup,\n  FormControl\n} from \"react-bootstrap\";\nimport { AiOutlineArrowLeft } from \"react-icons/ai\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nimport AuthContext from \"../authentication-component/AuthContext\";\nimport UserContext from \"../user-info-component/UserContext\";\n\nimport { FetchUserInformation } from \"../fetching-context-info/fetching-context-info\";\n\nimport { GetInformationForFormComponent } from \"../fetching-context-info/fetching-context-info\";\n\nimport axios from \"axios\";\n\nimport { Store } from \"react-notifications-component\";\nimport { style } from \"@mui/system\";\n\nimport \"./data-access-component.css\"\n\nasync function FetchData(props) {\n  // Basic post request, fetching information by:\n  //dataType: type of data we are looking for (e.g. indicator data),\n\n  const response = await axios({\n    method: \"post\",\n    url: process.env.REACT_APP_API_URL + \"api/data\",\n    data: {\n      dataType: props.dataType,\n      projectID: props.projectID,\n      formID: props.formID,\n      unit: props.unit,\n      data: props.data,\n    },\n    headers: {\n      Authorization: props.authToken,\n    },\n  });\n\n  // If the response is null return null\n  // Otherwise return the dataset.\n  var data = response.data;\n  if (data === null) {\n    return null;\n  } else {\n    return data;\n  }\n}\n\nfunction RenderConversionTable(props) {\n   console.log(props)\n\n    return(\n      <div className=\"table-div\">\n      <Table className=\"units-table\">\n        <thead>\n          <tr key=\"row_1\">\n            <th  >Survey Value</th>\n            <th  >Conversion</th>\n\n          </tr>\n        </thead>\n        <tbody>\n\n            {props.unitsData.map((unit)=>{\n                return(<tr key={\"unit-row-\"+unit.survey_value+ unit.id_rhomis_dataset}>\n                    <td style={{\"vertical-align\":\"middle\"}} key={\"unit-row-\"+unit.survey_value+\"-survey-value-\"+unit.id_rhomis_dataset}>{unit.survey_value}</td>\n\n                    <td style={{\"vertical-align\":\"middle\"}}key={\"unit-row-\"+unit.survey_value+\"-conversion-\"+unit.id_rhomis_dataset}><form>\n                <input class=\"form-control\" type=\"text\" defaultValue={unit.conversion} \n                onChange={(event)=>{\n\n                  UpdateUnitsData({\n                    ...props,\n                    update:event.target.value,\n                    unit:unit\n                  })\n\n                  \n\n                }}/>\n              </form> </td>\n                    {/* <td key={\"unit-row-\"+unit.survey_value+\"-survey-value\"}>{unit.conversion}</td> */}\n\n\n                </tr>)\n            })\n            \n            \n            }\n         \n        </tbody>\n      </Table>\n      </div>\n\n    );\n  }\n  \nfunction UpdateUnitsData(props){\n  console.log(props)\n\n  let changing_units = props.unitsData\n\n  let index = changing_units.findIndex((elem)=>{\n    if (elem.unit_type===props.unit.unit_type &&\n      elem.survey_value===props.unit.survey_value &&\n      elem.id_rhomis_dataset===props.unit.id_rhomis_dataset\n      ){\n        return true\n      }\n  })\n  console.log(index)\n \n  changing_units[index].conversion = props.update\n  \n  props.setUnitsData(changing_units)\n\n  \n}\n\n\nasync function SubmitUnitsData(props){\n  console.log(props.unitsData)\n\n  try {\n    const result = await axios({\n      method: \"post\",\n      url: process.env.REACT_APP_API_URL + \"api/conversions\",\n      headers: {\n        Authorization: props.authToken,\n      },\n      data: {\n        projectSelected:props.projectSelected,\n        formSelected:props.formSelected,\n        unitType: props.unitsSelect,\n        unitsData:props.unitsData\n      },\n    });\n\n    if (result.status === 200) {\n      Store.addNotification({\n        title: \"Success\",\n        message: props.process_label + \" Completed\",\n        type: \"success\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 2000,\n        },\n      });\n    }\n    return result;\n  } catch (err) {\n    console.log(err.response);\n    Store.addNotification({\n      title: \"Error\",\n      message: err.response.data,\n      type: \"danger\",\n      insert: \"top\",\n      container: \"top-right\",\n      animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n      animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n      dismiss: {\n        duration: 2000,\n      },\n    });\n  }\n\n}\n\nfunction ShowUnitsForm(props) {\n  const [unitsSelect, setUnitsSelect] = useState(null);\n  const [unitsDownloadLink, setUnitsDownloadLink] = useState();\n  const [unitsData, setUnitsData] = useState([{\n      survey_value: \"\",\n      conversion: \"\"\n  }]);\n\n  const [submitAllUnits, setSubmitAllUnits] = useState(false)\n  console.log(props);\n\n  const pricesNames = [\n      'mean_crop_price_lcu_per_kg',\n      'mean_livestock_price_per_animal',\n      'mean_meat_price_per_kg',\n      'mean_milk_price_per_litre',\n      'mean_eggs_price_per_kg',\n      'mean_bees_honey_price_per_kg',\n      'crop_calories',\n      'milk_calories',\n      'eggs_calories',\n      'honey_calories',\n      'meat_calories',\n      'staple_crop'\n  ]\n  useEffect(()=>{\n      console.log(\"Units\")\n      console.log(unitsData)\n  },\n    [unitsData])\n\n  return (\n    <>\n      <Form>\n        <Form.Label>{props.formLabel}</Form.Label>\n\n        <Form.Select\n          defaultValue=\"Select\"\n          onChange={async (event) => {\n            setUnitsSelect(event.target.value);\n            const newUnitsData = await FetchData({\n              authToken: props.authToken,\n              dataType: event.target.value,\n              projectID: props.projectSelected,\n              formID: props.formSelected,\n              unit: true,\n              data: false,\n            });\n            const units_download_link = generateDataDownloadLink(\n              newUnitsData,\n              unitsDownloadLink\n            );\n            setUnitsDownloadLink(units_download_link);\n\n            setUnitsData(newUnitsData);\n          }}\n        >\n          <option key=\"default-select\" disabled={true}>\n            Select\n          </option>\n          {props.formData.units.map((unitType) => {\n            if(props.formType===\"units\"){\n                if (pricesNames.some((priceName)=>priceName==unitType)===false){\n                  return <option key={\"unit-option-\" + unitType}>{unitType}</option>;\n\n                }\n            }\n            if(props.formType===\"prices\"){\n              if (pricesNames.some((priceName)=>priceName==unitType)===true){\n                return <option key={\"unit-option-\" + unitType}>{unitType}</option>;\n\n              }\n            }\n            // return <option key={\"unit-option-\" + unitType}>{unitType}</option>;\n          })}\n        </Form.Select>\n      </Form>\n      <br />\n      {unitsSelect?<RenderConversionTable unitsData={unitsData} setUnitsData={setUnitsData}/>\n     \n            :<></>}\n\n      <br/>\n      <Form >\n          <Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\n            <Form.Check type=\"checkbox\" label={props.checkBoxLabel}\n            onChange={()=>{\n              let currentState = submitAllUnits\n\n              setSubmitAllUnits(!currentState)\n\n\n            }}/>\n          </Form.Group>\n        </Form>\n      <div style={{ \"display\":\"inline-grid\",\"width\":\"100%\"}}>\n        \n        <div style={{\"marginLeft\": \"auto\", \"marginRight\": 0}}>\n        {!submitAllUnits?\n        <>\n        <a\n                            // Name of the file to download\n                            download={props.projectSelected + '_' + props.formSelected + '_' + unitsSelect + '.csv'}\n                            // link to the download URL\n                            href={unitsDownloadLink}\n                        >\n\n<Button style={{\"margin\":\"2px\"}} className=\"bg-dark border-0\" >Download</Button></a>\n      \n     \n      <Button className=\"bg-dark border-0\" \n      onClick={async()=>{\n        await SubmitUnitsData({\n          ...props,\n          unitsData:unitsData,\n          unitsSelect:unitsSelect,\n          process_label: \"Conversion Submission\"\n        })\n      }}\n      >Submit</Button></>\n      :\n      <>\n      <Button className=\"bg-dark border-0\" onClick={async ()=>{\n        await ProcessData({\n          commandType: props.commandType,\n          formSelected: props.formSelected,\n          projectSelected: props.projectSelected,\n          process_label: props.processLabel,\n          data: props.userInfo,\n          authToken: props.authToken,\n        });\n\n        GetInformationForFormComponent({\n          setAuthToken: props.setAuthToken,\n          authToken: props.authToken,\n          setUserInfo: props.setUserInfo,\n          projectName: props.projectSelected,\n          formName: props.formSelected,\n          setFormData: props.setFormData,\n        });\n        \n      }}>{props.submissionLabel}</Button>\n      </>}\n      </div>\n      </div>\n\n    </>\n  );\n}\n\nasync function ProcessData(props) {\n  const form = props.data.forms.filter(\n    (item) =>\n      item.name === props.formSelected && item.project === props.projectSelected\n  )[0];\n\n  Store.addNotification({\n    title: \"Processing data\",\n    type: \"default\",\n    insert: \"top\",\n    container: \"top-right\",\n    animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n    animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n    dismiss: {\n      duration: 2000,\n    },\n  });\n  try {\n    const result = await axios({\n      method: \"post\",\n      url: process.env.REACT_APP_API_URL + \"api/process-data\",\n      headers: {\n        Authorization: props.authToken,\n      },\n      data: {\n        commandType: props.commandType,\n        projectName: props.projectSelected,\n        formName: props.formSelected,\n        formVersion: form.formVersion,\n        draft: form.draft,\n      },\n    });\n\n    if (result.status === 200) {\n      Store.addNotification({\n        title: \"Success\",\n        message: props.process_label + \" Completed\",\n        type: \"success\",\n        insert: \"top\",\n        container: \"top-right\",\n        animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n        animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n        dismiss: {\n          duration: 2000,\n        },\n      });\n    }\n    return true;\n  } catch (err) {\n    console.log(err.response);\n    Store.addNotification({\n      title: \"Error\",\n      message: err.response.data,\n      type: \"danger\",\n      insert: \"top\",\n      container: \"top-right\",\n      animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n      animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n      dismiss: {\n        duration: 2000,\n      },\n    });\n    return false;\n\n  }\n}\n\nfunction RenderUnitsForm(props) {\n  return (\n    <Card style={{ \"marginTop\": \"30px\" }}>\n      <Card.Header>Units</Card.Header>\n      <Card.Body>\n        <ShowUnitsForm {...props}\n        formType='units' \n        formLabel=\"Select the type of unit\"\n        checkBoxLabel=\"I confirm that I have verified and submitted all units, proceed to (re)calculate product prices\"\n        submissionLabel=\"Calculate Prices\"\n        commandType=\"prices\"\n        processLabel= \"Price Calculations\"\n        />\n      </Card.Body>\n    </Card>\n  );\n}\n\nfunction RenderPriceAndCalorieConversions(props) {\n  return (\n    <Card style={{ \"marginTop\": \"30px\" }}>\n      <Card.Header>Prices and Calories</Card.Header>\n      <Card.Body>\n      <ShowUnitsForm {...props}\n        formType='prices' \n        formLabel=\"Select the price/calorie conversion\"\n        checkBoxLabel=\"I confirm that I have verified and submitted all price and calorie conversions, proceed to (re)calculate RHoMIS indicators\"\n        submissionLabel=\"Calculate Indicators\"\n        commandType=\"indicators\"\n        processLabel= \"Indicator Calculations\"\n        />\n      </Card.Body>\n    </Card>\n  );\n}\n\nfunction RenderFinalOutputs(props) {\n  const [rhomisDataSelect, setRHoMISSelect] = useState(null)\n  const [rhomisData, setRHoMISData] = useState(null)\n  const [dataDownloadLink, setDataDownloadLink] = useState('')\n  return (\n    <Card style={{ \"margin-top\": \"30px\" }}>\n      <Card.Header>Final Outputs</Card.Header>\n\n      <Card.Body>\n                        <Form>\n                            <Form.Group>\n                                <Form.Label>Select the type of data</Form.Label>\n                                <Form.Select defaultValue=\"Select\"\n                                    onChange={async (event) => {\n                                        setRHoMISSelect(event.target.value)\n                                        const newRHoMISData = await FetchData({\n                                            authToken: props.authToken,\n                                            dataType: event.target.value,\n                                            projectID: props.projectSelected,\n                                            formID: props.formSelected,\n                                            unit: false,\n                                            data: true\n                                        })\n                                        const rhomis_download_link = generateDataDownloadLink(newRHoMISData, dataDownloadLink)\n                                        setDataDownloadLink(rhomis_download_link)\n                                        setRHoMISData(newRHoMISData)\n\n                                    }}>\n                                    <option key=\"default-select\" disabled={true}>Select</option>\n                                    {props.formData.dataSets.map((dataSet) => {\n                                        return <option key={\"data-option-\" + dataSet}>{dataSet}</option>\n                                    })}\n                                </Form.Select>\n                            </Form.Group>\n\n                        </Form>\n\n                        {rhomisData ? <>\n                            <br />\n                            {renderTable(rhomisData)}\n                            <div style={{ \"display\":\"inline-grid\",\"width\":\"100%\"}}>\n        \n        <div style={{\"marginLeft\": \"auto\", \"marginRight\": 0, \"marginTop\":\"2px\"}}><a\n                                // Name of the file to download\n                                download={props.projectSelected + '_' + props.formSelected + '_' + rhomisDataSelect + '.csv'}\n                                // link to the download URL\n                                href={dataDownloadLink}\n                            >\n                                <Button className=\"bg-dark border-0\">Download Data</Button></a></div></div>\n                        </>\n                            : <></>}\n                    </Card.Body>\n    </Card>\n  );\n}\n\nfunction RenderDataCard(props) {\n  return (\n    <>\n      {props.showUnits ? <RenderUnitsForm {...props} /> : <></>}\n      {props.showPrices ? <RenderPriceAndCalorieConversions {...props} /> : <></>}\n      {props.showOutputs ? <RenderFinalOutputs {...props} /> : <></>}\n    </>\n  );\n}\n\nfunction CheckDataStatus() {}\n\nfunction renderTable(data) {\n  // console.log(data)\n\n\n  if (data !== null) {\n      var full_data_set = data\n      var column_names = []\n\n      // Looping through households\n      for (let household_index = 0; household_index < full_data_set.length; household_index++) {\n          // All of the column names for this individual household\n          var household_column_names = Object.keys(full_data_set[household_index])\n          //Looping through individual column names for the individual household\n          for (let column_index = 0; column_index < household_column_names.length; column_index++) {\n              // The new column name for that household\n              var new_column = household_column_names[column_index]\n\n              if (!column_names.some(column => column === new_column)) {\n\n                  if (household_index === 0) {\n                      column_names.splice(column_index, 0, new_column)\n                  }\n\n                  if (household_index > 0) {\n\n                      // Check if the previous column was in the column index\n                      if (!household_column_names[column_index - 1] !== undefined) {\n                          var index_of_previous_column_name = column_names.indexOf(household_column_names[column_index - 1])\n                          column_names.splice(index_of_previous_column_name + 1, 0, new_column)\n\n                      } else {\n                          column_names.splice(column_index + 1, 0, new_column)\n                      }\n                  }\n              }\n\n          }\n      }\n      return (\n          <div className=\"table-div\">  \n              \n              <Table striped hover size=\"sm\" responsive>\n                  {/* Table header */}\n                  <thead>\n                      <tr key=\"row_1\">\n                          {column_names.map((column, column_key) => {\n                              return (<th className=\"col-md-1\" key={\"row_1_column_\" + column_key}>{column}</th>)\n                          })}\n                      </tr>\n                  </thead>\n                  {/* Table Body */}\n                  <tbody>\n                      {full_data_set.map((household, household_key) => {\n                          return (<tr key={\"row_\" + household_key}>\n                              {column_names.map((column, column_key) => {\n                                  return (<td height=\"10px\" key={\"row_\" + household_key + \"column_\" + column_key + \"_\" + \"household_\" + household_key}>{household[column] ? household[column] : \"NA\"}</td>)\n                              })}\n                          </tr>)\n                      })}\n\n                  </tbody>\n              </Table>\n          </ div>)\n  }\n}\n\nfunction generateCSV(data) {\n  //Return nothing if the data is null\n  if (data === null) {\n    return;\n  }\n\n  if (data.length === undefined) {\n    return;\n  }\n\n  // Creating an empty list to include all of the lines of the csv\n  var csv_lines = [];\n\n  // This is the full RHoMIS Data set\n  var full_data_set = data;\n\n  // Identifying the column headers\n  // Some households have more columns than other. This merges column\n  // names in order based on the rows of each household\n  var column_names = [];\n\n  // Looping through households\n  for (\n    let household_index = 0;\n    household_index < full_data_set.length;\n    household_index++\n  ) {\n    // All of the column names for this individual household\n    var household_column_names = Object.keys(full_data_set[household_index]);\n    //Looping through individual column names for the individual household\n    for (\n      let column_index = 0;\n      column_index < household_column_names.length;\n      column_index++\n    ) {\n      // The new column name for that household\n      var new_column = household_column_names[column_index];\n      // Checking whether the new column has previously been encountered\n      if (!column_names.some((column) => column === new_column)) {\n        // If this is the first househould, adds the new element at the column index\n        // not deleting any items\n        if (household_index === 0) {\n          column_names.splice(column_index, 0, new_column);\n        }\n        // Checks if this is a household after the first household\n        if (household_index > 0) {\n          // Check if the previous column was in the column index\n          if (!household_column_names[column_index - 1] !== undefined) {\n            // Looks at the column before, if it was encountered previously\n            // we make sure this new column is added in the correct place\n            var index_of_previous_column_name = column_names.indexOf(\n              household_column_names[column_index - 1]\n            );\n\n            column_names.splice(\n              index_of_previous_column_name + 1,\n              0,\n              new_column\n            );\n          } else {\n            // If the previous column did not exist previously, we make sure to add the new column\n            // at the end.\n            column_names.splice(column_index + 1, 0, new_column);\n          }\n        }\n      }\n    }\n  }\n  // add all of the column names, seperated by a column and a space\n  csv_lines.push(column_names.join(\", \"));\n\n  // Now push each individual household to the csv\n  var household_data = full_data_set.map((household) => {\n    var household_array = column_names.map((column) => {\n      if (household[column] !== null) {\n        return household[column];\n      } else {\n        return \"\";\n      }\n    });\n    // Join the column values by comma\n    var household_row = household_array.join(\", \");\n    return household_row;\n  });\n  csv_lines = csv_lines.concat(household_data);\n\n  // Join each line and seperate by \\n\n  var csv_string = csv_lines.join(\"\\n\");\n  return csv_string;\n}\n\nfunction generateDataDownloadLink(dataToDownload, dataDownloadLink) {\n  // Generating the csv string from the data we\n  // hope to download (comes in JSON format)\n  const dataCSV = generateCSV(dataToDownload);\n  // Create a file-like immutable objesct\n  const data = new Blob([dataCSV], { type: \"text/plain\" });\n\n  // Clears the previous URL used to download the data\n  if (dataDownloadLink !== \"\") {\n    window.URL.revokeObjectURL(dataDownloadLink);\n  }\n  // update the download link state\n  return window.URL.createObjectURL(data);\n}\n\nasync function CheckFormData(props) {\n  if (props.formData.unitsExtracted == true) {\n    // Extract Units\n    props.setShowUnits(true);\n  }\n  if (props.formData.unitsExtracted == false) {\n    Store.addNotification({\n      title: \"Extracting Units\",\n      message: \"Please wait while we extract units from the dataset\",\n      type: \"success\",\n      insert: \"top\",\n      container: \"top-right\",\n      animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n      animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n      dismiss: {\n        duration: 2000,\n      },\n    });\n\n    const processing_result = await ProcessData({\n      commandType: \"units\",\n      formSelected: props.formSelected,\n      projectSelected: props.projectSelected,\n      process_label: \"Unit Extraction\",\n      data: props.data,\n      authToken: props.authToken,\n    });\n\n    if (processing_result===true){\n      await GetInformationForFormComponent({\n        setAuthToken: props.setAuthToken,\n        authToken: props.authToken,\n        setUserInfo: props.setUserInfo,\n        projectName: props.projectSelected,\n        formName: props.formSelected,\n        setFormData: props.setFormData,\n      });\n  }\n  }\n\n  if (props.formData.pricesCalculated == true) {\n    props.setShowPrices(true);\n  }\n  if (props.formData.pricesCalculated == false) {\n  }\n\n  if (props.formData.finalIndicators == true) {\n    props.setShowOutputs(true);\n  }\n  if (props.formData.finalIndicators == false) {\n    //\n  }\n}\n\nexport default function DataAccessComponent() {\n  const projectSelected = useParams().projectName;\n  const formSelected = useParams().formName;\n\n  const [authToken, setAuthToken] = useContext(AuthContext);\n  const [adminData, setAdminData] = useContext(UserContext);\n\n  const history = useHistory();\n\n  const [formData, setFormData] = useState({});\n\n  const [loading, setLoading] = useState(true);\n  const [showUnits, setShowUnits] = useState(false);\n  const [showPrices, setShowPrices] = useState(false);\n  const [showOutputs, setShowOutputs] = useState(false);\n\n\n\n  useEffect(() => {\n    async function GetUserInfo() {\n      await GetInformationForFormComponent({\n        setAuthToken: setAuthToken,\n        authToken: authToken,\n        setUserInfo: setAdminData,\n        projectName: projectSelected,\n        formName: formSelected,\n        setFormData: setFormData,\n      });\n      setLoading(false);\n      // const response = await FetchUserInformation({\n      //     authToken: authToken,\n      //     setUserInfo: setAdminData\n      // })\n    }\n    GetUserInfo();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"Form Data\");\n    console.log(formData);\n    async function CheckAndUpdateFormInformation() {\n      await CheckFormData({\n        setAuthToken: setAuthToken,\n        authToken: authToken,\n\n        setUserInfo: setAdminData,\n        setFormData: setFormData,\n\n        formData: formData,\n\n        data: adminData,\n        projectSelected: projectSelected,\n        formSelected: formSelected,\n\n        setShowUnits: setShowUnits,\n        setShowPrices: setShowPrices,\n        setShowOutputs: setShowOutputs,\n      });\n    }\n\n    CheckAndUpdateFormInformation();\n  }, [formData]);\n\n  return (\n    <div id=\"project-management-container\" className=\"sub-page-container\">\n      <Card className=\"main-card border-0\">\n        <Card.Header className=\" bg-dark text-white\">\n          <div className=\"main-card-header-container\">\n            <h3>Data</h3>\n\n            <div\n              style={{\n                display: \"flex\",\n                \"flex-direction\": \"row\",\n                \"margin-left\": \"auto\",\n              }}\n            >\n              <div className=\"main-card-header-item\">{projectSelected}</div>\n              <div className=\"main-card-header-item\">{formSelected}</div>\n\n              <Button\n                className=\"bg-dark border-0\"\n                onClick={() => {\n                  history.push(\"/projects/\" + projectSelected);\n                }}\n              >\n                <AiOutlineArrowLeft size={25} />\n              </Button>\n            </div>\n          </div>\n        </Card.Header>\n        <Card.Body>\n          {loading ? (\n            <Spinner\n              as=\"span\"\n              animation=\"border\"\n              size=\"sm\"\n              role=\"status\"\n              aria-hidden=\"true\"\n            />\n          ) : (\n            <RenderDataCard\n              authToken={authToken}\n              formData={formData}\n              projectSelected={projectSelected}\n              formSelected={formSelected}\n              showUnits={showUnits}\n              userInfo={adminData}\n              showPrices={showPrices}\n              showOutputs={showOutputs}\n              setAuthToken={setAuthToken}\n              setFormData={setFormData}\n            />\n          )}\n        </Card.Body>\n      </Card>\n    </div>\n  );\n}\n","import React, { useState, useContext, useEffect } from 'react'\nimport { Card, Form, Button } from 'react-bootstrap'\nimport axios from 'axios'\n\nimport AuthContext from '../authentication-component/AuthContext';\nimport UserContext from '../user-info-component/UserContext';\n\nimport { Store } from 'react-notifications-component';\n\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport { AiOutlineArrowLeft } from 'react-icons/ai';\n\nfunction CheckProjectManager(props) {\n\n\n    if (!props.data) {\n        return false\n    }\n    if (!props.data.user) {\n        return false\n    }\n\n    if (!props.data.user.roles) {\n        return false\n    }\n\n    if (!props.data.user.roles.projectManager) {\n        return false\n    }\n\n    if (props.data.user.roles.projectManager.includes(props.projectSelected)) {\n        return true\n    }\n\n\n    return false\n\n}\n\n\n\n\nfunction BuildRequest(props) {\n    console.log(props)\n    if (props.userType === \"projectManager\") {\n        return {\n            method: 'post',\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/project-manager\",\n            headers: {\n                'Authorization': props.authToken\n            },\n            data: {\n                projectName: props.projectName,\n                email: props.email\n            }\n        }\n    }\n    if (props.userType === \"dataCollector\") {\n        return {\n            method: 'post',\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/data-collector\",\n            headers: {\n                'Authorization': props.authToken\n            },\n            data: {\n                formName: props.formName,\n                email: props.email\n            }\n        }\n\n    }\n\n    if (props.userType === \"analyst\") {\n        return {\n            method: 'post',\n            url: process.env.REACT_APP_AUTHENTICATOR_URL + \"api/user/analyst\",\n            headers: {\n                'Authorization': props.authToken\n            },\n            data: {\n                formName: props.formName,\n                email: props.email\n            }\n        }\n    }\n\n}\n\nasync function AddFormUser(props) {\n    let request = BuildRequest(props)\n\n\n    try {\n        const result = await axios(request)\n\n\n\n        if (result.status === 200) {\n            Store.addNotification({\n                title: \"Success\",\n                message: \"User Added\",\n                type: \"success\",\n                insert: \"top\",\n                container: \"top-right\",\n                animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n                animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n                dismiss: {\n                    duration: 2000\n                }\n            });\n        }\n\n        return (result)\n\n    } catch (err) {\n        console.log(err)\n        Store.addNotification({\n            title: \"Error\",\n            message: err.response.data,\n            type: \"danger\",\n            insert: \"top\",\n            container: \"top-right\",\n            animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n            animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n            dismiss: {\n                duration: 2000\n            }\n        });\n        return (err)\n\n    }\n\n}\n\n\nfunction UserForm(props) {\n    const [newUser, setNewUser] = useState()\n\n    const [projectManagerEmail, setProjectManagerEmail] = useState()\n\n    const [userType, setUserType] = useState('')\n    const [email, setEmail] = useState('')\n    console.log(\"User form props\")\n    console.log(props)\n    return (\n        <>\n            {\n                props.projectManagerOfForm ?\n                    <>\n                        <Card.Body>\n\n                            <Card >\n                                <Card.Header as=\"h5\">Add Project Manager</Card.Header>\n                                <Card.Body>\n                                    <Form>\n                                        <Form.Group>\n                                            <Form.Label>User email</Form.Label>\n                                            <Form.Control onChange={(event) => {\n                                                setProjectManagerEmail(event.target.value)\n                                            }} />\n                                        </Form.Group>\n                                        <Button className=\"bg-dark text-white border-0 float-right\" style={{ \"marginTop\": \"10px\" }}\n                                            onClick={async () => {\n                                                console.log(props.projectSelected)\n                                                const result = await AddFormUser({\n                                                    authToken: props.authToken,\n                                                    email: projectManagerEmail,\n                                                    projectName: props.projectSelected,\n                                                    formName: null,\n                                                    userType: \"projectManager\"\n                                                })\n                                                console.log(result)\n                                            }}>Add Project Manager</Button>\n                                    </Form>\n                                </Card.Body>\n                            </Card>\n                            <br />\n                            <Card>\n                                <Card.Header as=\"h5\">Add Form Level User</Card.Header>\n\n                                <Card.Body>\n                                    <Form>\n                                        <Form.Group>\n                                            <Form.Label>User email</Form.Label>\n                                            <Form.Control onChange={(event) => {\n                                                setEmail(event.target.value)\n\n                                            }}></Form.Control>\n                                        </Form.Group>\n                                        <Form.Group>\n                                            <Form.Label>User Role</Form.Label>\n                                            <Form.Select aria-label=\"Default select example\" defaultValue=\"Open this select menu\"\n                                                onChange={(event) => {\n                                                    setUserType(event.target.value)\n\n                                                }}>\n                                                <option disabled={true}>Open this select menu</option>\n                                                <option value=\"dataCollector\">Data Collector: Can access training materials and configure enumerator devices</option>\n                                                <option value=\"analyst\">Data Analyst: Can download processed data</option>\n                                            </Form.Select>\n                                        </Form.Group>\n\n                                        <Button className=\"bg-dark text-white border-0 float-right\" style={{ \"marginTop\": \"10px\" }}\n                                            onClick={async () => {\n                                                const result = await AddFormUser({\n                                                    authToken: props.authToken,\n                                                    email: email,\n                                                    formName: props.formSelected,\n                                                    userType: userType\n                                                })\n                                            }}>Add User</Button>\n\n                                    </Form >\n                                </Card.Body>\n                            </Card>\n                        </Card.Body>\n                    </> :\n                    <></>\n            }\n        </>\n    )\n}\n\nexport default function UserManagementComponent() {\n    const [projectManagerOfForm, setProjectManagerOfForm] = useState(false)\n\n    const projectSelected = useParams().projectName\n    const formSelected = useParams().formName\n\n    const [adminData, setAdminData] = useContext(UserContext)\n    const [authToken, setAuthToken] = useContext(AuthContext)\n\n    const history = useHistory()\n\n    console.log(\"Admin data\")\n    console.log(adminData)\n\n    useEffect(() => {\n\n        const projectManager = CheckProjectManager({\n            data: adminData,\n            projectSelected: projectSelected\n        })\n        console.log(\"project manager\")\n        console.log(projectManager)\n        setProjectManagerOfForm(projectManager)\n\n    }, [adminData])\n\n    useEffect(() => {\n\n        const projectManager = CheckProjectManager({\n            data: adminData,\n            projectSelected: projectSelected\n        })\n        console.log(\"project manager\")\n        console.log(projectManager)\n        setProjectManagerOfForm(projectManager)\n\n    }, [])\n\n\n    return (\n        <div id=\"project-management-container\" className=\"sub-page-container\">\n\n            <Card className=\"main-card border-0\">\n                <Card.Header className=\" bg-dark text-white\">\n                    <div className=\"main-card-header-container\">\n                        <h3>User Management</h3>\n\n                        <div style={{ \"display\": \"flex\", \"flex-direction\": \"row\", \"margin-left\": \"auto\" }} >\n                            <div className=\"main-card-header-item\">{projectSelected}</div>\n                            <div className=\"main-card-header-item\">{formSelected}</div>\n\n                            <Button className=\"bg-dark border-0\" onClick={() => {\n                                history.push(\"/projects/\" + projectSelected)\n\n                            }}>\n                                <AiOutlineArrowLeft size={25} />\n                            </Button>\n                        </div>\n                    </div>\n                </Card.Header>\n                <Card.Body className=\"main-card-body\">\n                    <UserForm\n                        projectSelected={projectSelected}\n                        formSelected={formSelected}\n                        projectManagerOfForm={projectManagerOfForm}\n                        authToken={authToken} />\n\n                </Card.Body>\n            </Card>\n        </div >\n    )\n}\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useContext, useEffect } from 'react'\n\nimport { Login, LoginComponent } from \"../login-component/login-component\"\nimport { DataQueryComponent } from \"../data-query-component/data-query-component\"\nimport { RegisterComponent } from '../register-component/register-component';\nimport PortalComponent from '../portal-component/portal-component';\nimport NotFoundComponent from '../not-found-component/not-found-component';\nimport ProjectManagementComponent from \"../project-management-component/project-management-component\"\nimport FormManagementComponent from '../form-management-component/form-management-component';\nimport FormAdminComponent from '../form-admin-component/form-admin-component';\n// import AccountManagementComponent from './components/account-management-component/account-management-component';\nimport MainNavbar from '../navigation-bar/navigation-bar-component'\nimport FormCreationComponent from '../form-creation-component/form-creation-component';\n\nimport DataCollectionComponent from '../data-collection-component/data-collection-component';\nimport DataAccessComponent from '../data-access-component/data-access-component';\nimport UserManagementComponent from '../user-management-component/user-management-component';\nimport AuthContext from '../authentication-component/AuthContext';\nimport UserContext from '../user-info-component/UserContext';\nimport {\n    HashRouter as Router,\n    RouteProps,\n    useHistory,\n    useLocation,\n    // BrowserRouter as Router,\n    Switch,\n    Route,\n    Redirect,\n} from \"react-router-dom\";\n\n\nimport { FetchUserInformation, CheckForLocalToken } from '../fetching-context-info/fetching-context-info';\n\n\nexport default function RoutingComponent() {\n\n    const [authToken, setAuthToken] = useContext(AuthContext)\n    const [userInfo, setUserInfo] = useContext(UserContext)\n    const history = useHistory()\n    // const location = useLocation()\n\n    useEffect(() => {\n        CheckForLocalToken({\n            setAuthToken: setAuthToken\n        })\n    }, [])\n\n    useEffect(() => {\n        FetchUserInformation({\n            authToken: authToken,\n            setUserInfo: setUserInfo\n        })\n    }, [authToken])\n\n    console.log(\"Auth token context\")\n    console.log(authToken)\n\n    return (<RedirectComponents authToken={authToken} />)\n\n\n}\n\nfunction RedirectComponents(props) {\n\n    console.log(props.authToken)\n    if (props.authToken) {\n        return (\n            < Router >\n                <MainNavbar />\n                {/* <Fade> */}\n                <Switch>\n                    <Route exact path=\"/\">\n                        <Redirect from=\"/\" to=\"/home\" />\n                    </Route>\n                    <Route path=\"/home\" component={PortalComponent} />\n                    <Route path=\"/register\"><RegisterComponent /></Route>\n                    {/* <Route path=\"/login\"><LoginComponent /></Route> */}\n\n                    <Route path=\"/projects/:projectName/forms/:formName/collect\" component={DataCollectionComponent} />\n                    <Route path=\"/projects/:projectName/forms/:formName/users\" component={UserManagementComponent} />\n                    <Route path=\"/projects/:projectName/forms/:formName/data\" component={DataAccessComponent} />\n                    {/* <Route path=\"/projects/:projectName/forms/:formName\" component={FormAdminComponent} /> */}\n                    <Route path=\"/projects/:projectName\" component={FormManagementComponent} />\n\n                    <Route path=\"/projects\" ><ProjectManagementComponent /></Route>\n\n\n                    {/* <Route path=\"/project/:projectName/form/:formName\"><FormManagementComponent /></Route> */}\n\n                    <Route path=\"/data-querying\" component={DataQueryComponent} />\n                    <Route path=\"/administration\" component={FormCreationComponent} />\n\n                    {/* <Route path=\"*\" component={NotFoundComponent} /> */}\n                    <Redirect from=\"*\" to=\"/home\" />\n\n                </Switch >\n                {/* </Fade> */}\n\n            </Router >\n        )\n    }\n\n    if (!props.authToken) {\n        return (\n            < Router >\n                {/* <Fade> */}\n                <Switch>\n                    <Route exact path=\"/\">\n                        <Redirect from=\"/\" to=\"/login\" />\n                    </Route>\n                    <Route path=\"/register\"><RegisterComponent /></Route>\n                    <Route path=\"/login\"><LoginComponent /></Route>\n                </Switch >\n                {/* </Fade> */}\n\n            </Router >\n        )\n    }\n\n\n}\n","// Copyright (C) 2022 Lo Gorman\n// \n// This file is part of rhomis-data-app.\n// \n// rhomis-data-app is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// \n// rhomis-data-app is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n// \n// You should have received a copy of the GNU General Public License\n// along with rhomis-data-app.  If not, see <http://www.gnu.org/licenses/>.\n\n/* See this tutorial for authentication state management\nhttps://stackoverflow.com/questions/41030361/how-to-update-react-context-from-inside-a-child-component\nhttps://reactrouter.com/web/example/auth-workflow \n*/\n\n// Import styling\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// Import router information\nimport React, { useState } from 'react';\nimport axios from 'axios';\n\n// Import the various components\nimport RoutingComponent from './components/routing-component/routing-component';\n// Import the context which stores the authentication tokens\nimport AuthContext from './components/authentication-component/AuthContext';\nimport UserContext from './components/user-info-component/UserContext';\n\n\nimport { ReactNotifications } from 'react-notifications-component'\nimport 'react-notifications-component/dist/theme.css'\n\n\n\nfunction App() {\n  const [authToken, setAuthToken] = useState(null);\n  const [userInfo, setUserInfo] = useState(null)\n\n  return (\n    <>\n      <ReactNotifications />\n\n      <AuthContext.Provider value={[authToken, setAuthToken]}>\n        <UserContext.Provider value={[userInfo, setUserInfo]}>\n          <div className=\"main-app-background\">\n            <div className=\"main-page\">\n              <RoutingComponent />\n            </div >\n          </div>\n        </UserContext.Provider>\n      </AuthContext.Provider>\n    </>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}